import{j as i,F as p,a as e,b as s,I as u,T as I,Q as q,M as k,B as f,P as w,R as h,c as y}from"./vendor.bc7dbd83.js";const v=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))d(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&d(l)}).observe(document,{childList:!0,subtree:!0});function a(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerpolicy&&(r.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?r.credentials="include":t.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function d(t){if(t.ep)return;t.ep=!0;const r=a(t);fetch(t.href,r)}};v();const S={width:"80%",height:"90%",border:"none",position:"absolute",top:0,left:0,right:0,bottom:0,margin:"auto",boxShadow:"0 0 #000, 0 0 #000, 0 25px 50px -12px rgba(0, 0, 0, .25)"},C=({btnKey:o})=>{const n=logseq.settings?.buttons?.find(a=>a.key===o);return i(p,{children:[e("div",{className:"mask",onClick:()=>logseq.hideMainUI()}),e("iframe",{className:"iframe",src:n.href,style:n.style||S})]})};const m={span:3},N=()=>{const o=logseq.settings,n={buttons:Array.isArray(o?.buttons)?o?.buttons.map(t=>({...t,style:t.style?JSON.stringify(t.style):void 0})):[]};console.log("[faiz:] === initialValues",n);const[a]=s.useForm(),d=()=>{a.validateFields().then(t=>{console.log("[faiz:] === form.validateFields",t),logseq.updateSettings({buttons:1});const r={buttons:t.buttons.map(l=>({...l,style:l?.style?JSON.parse(l?.style):void 0}))};console.log("[faiz:] === newConfig",r),logseq.updateSettings(r),logseq.hideMainUI()})};return i(p,{children:[e("div",{className:"mask bg-black opacity-60",onClick:()=>logseq.hideMainUI()}),e("div",{className:"rounded shadow-lg w-4/5 h-4/5 page-center flex justify-center overflow-auto bg-white pt-16",children:i(s,{labelCol:{span:3},style:{width:600},form:a,initialValues:n,children:[e(s.List,{name:"buttons",children:(t,{add:r,remove:l})=>i(p,{children:[t.map((c,b)=>e(s.Item,{label:`Button ${b+1}`,children:i("div",{className:"border-2 border-dashed border-gray-300 p-3",children:[e(s.Item,{name:[c.name,"key"],label:"Key",labelCol:m,rules:[{required:!0}],children:e(u,{})}),e(s.Item,{label:"Icon",labelCol:m,required:!0,children:i("div",{className:"flex items-center",children:[e(s.Item,{name:[c.name,"icon"],rules:[{required:!0}],noStyle:!0,children:e(u,{})}),e(I,{title:"View tablericons",children:e(q,{className:"ml-1",onClick:()=>logseq.App.openExternalLink("https://tablericons.com")})})]})}),e(s.Item,{name:[c.name,"href"],label:"Url",labelCol:m,rules:[{required:!0,type:"url"}],children:e(u,{})}),e(s.Item,{name:[c.name,"style"],label:"Style",labelCol:m,rules:[{validator:(A,g)=>{if(g){if(!/^{/.test(g))return Promise.reject(new Error("Should be a json string"));try{return JSON.parse(g),Promise.resolve()}catch{return Promise.reject(new Error("Invalid JSON"))}}return Promise.resolve()}}],children:e(u.TextArea,{})}),e(k,{onClick:()=>l(c.name),className:"absolute right-3 bottom-3"})]})},c.key)),e(s.Item,{wrapperCol:{offset:3},children:e(f,{type:"dashed",onClick:()=>r(),block:!0,icon:e(w,{}),children:"Add New Button"})})]})}),i(s.Item,{wrapperCol:{offset:3},children:[e(f,{onClick:()=>logseq.hideMainUI(),className:"mr-4 mb-16",children:"Cancel"}),e(f,{type:"primary",onClick:d,children:"Save"})]})]})})]})};logseq.ready(()=>{console.log("[faiz:] === logseq-plugin-browser loaded ==="),logseq.App.registerCommandPalette({key:"logseq-plugin-browser-config",label:"Modify logseq-plugin-browser config"},o=>{console.log("[faiz:] === registerCommandPalette",o),x(),logseq.showMainUI()}),logseq.setMainUIInlineStyle({position:"fixed",zIndex:11}),logseq.provideModel({show(o){const n=o.dataset.faizKey;console.log("[faiz:] === key",n,o),M(n),logseq.showMainUI()}}),logseq.settings?.buttons?.forEach(o=>{logseq.App.registerUIItem("toolbar",{key:o.key,template:`<a data-on-click="show" data-faiz-key="${o.key}" class="button"><i class="ti ${o.icon}"></i></a>`})})});function M(o){h.render(e(y.StrictMode,{children:e(C,{btnKey:o})}),document.getElementById("root"))}function x(){h.render(e(y.StrictMode,{children:e(N,{})}),document.getElementById("root"))}
