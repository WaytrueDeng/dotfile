import{c as commonjsGlobal,e as effectScope,r as ref,m as markRaw,i as inject,w as watch,a as reactive,b as isRef,d as isReactive,t as toRaw,g as getCurrentInstance,o as onUnmounted,n as nextTick,f as toRefs,h as computed,j as defineComponent,k as openBlock,l as createBlock,p as withCtx,q as createBaseVNode,s as toDisplayString,u as unref,v as normalizeStyle,x as createTextVNode,_ as __unplugin_components_0,y as getAugmentedNamespace,z as codemirror$1,A as onMounted,B as createElementBlock,N as NIcon,C as createVNode,D as createApp}from"./vendor.e79b4dcb.js";const p=function(){const g=document.createElement("link").relList;if(g&&g.supports&&g.supports("modulepreload"))return;for(const v of document.querySelectorAll('link[rel="modulepreload"]'))d(v);new MutationObserver(v=>{for(const S of v)if(S.type==="childList")for(const L of S.addedNodes)L.tagName==="LINK"&&L.rel==="modulepreload"&&d(L)}).observe(document,{childList:!0,subtree:!0});function a(v){const S={};return v.integrity&&(S.integrity=v.integrity),v.referrerpolicy&&(S.referrerPolicy=v.referrerpolicy),v.crossorigin==="use-credentials"?S.credentials="include":v.crossorigin==="anonymous"?S.credentials="omit":S.credentials="same-origin",S}function d(v){if(v.ep)return;v.ep=!0;const S=a(v);fetch(v.href,S)}};p();var lsplugin_user={exports:{}};/*! For license information please see lsplugin.user.js.LICENSE.txt */(function(f,g){(function(a,d){f.exports=d()})(self,function(){return(()=>{var a={227:(L,E,P)=>{var K=P(155);E.formatArgs=function(Q){if(Q[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+Q[0]+(this.useColors?"%c ":" ")+"+"+L.exports.humanize(this.diff),!this.useColors)return;const F="color: "+this.color;Q.splice(1,0,F,"color: inherit");let q=0,H=0;Q[0].replace(/%[a-zA-Z%]/g,te=>{te!=="%%"&&(q++,te==="%c"&&(H=q))}),Q.splice(H,0,F)},E.save=function(Q){try{Q?E.storage.setItem("debug",Q):E.storage.removeItem("debug")}catch{}},E.load=function(){let Q;try{Q=E.storage.getItem("debug")}catch{}return!Q&&K!==void 0&&"env"in K&&(Q=K.env.DEBUG),Q},E.useColors=function(){return!(typeof window>"u"||!window.process||window.process.type!=="renderer"&&!window.process.__nwjs)||(typeof navigator>"u"||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},E.storage=function(){try{return localStorage}catch{}}(),E.destroy=(()=>{let Q=!1;return()=>{Q||(Q=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),E.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],E.log=console.debug||console.log||(()=>{}),L.exports=P(447)(E);const{formatters:W}=L.exports;W.j=function(Q){try{return JSON.stringify(Q)}catch(F){return"[UnexpectedJSONParseError]: "+F.message}}},447:(L,E,P)=>{L.exports=function(K){function W(q){let H,te=null;function B(...O){if(!B.enabled)return;const k=B,w=Number(new Date),N=w-(H||w);k.diff=N,k.prev=H,k.curr=w,H=w,O[0]=W.coerce(O[0]),typeof O[0]!="string"&&O.unshift("%O");let R=0;O[0]=O[0].replace(/%([a-zA-Z%])/g,(_,h)=>{if(_==="%%")return"%";R++;const y=W.formatters[h];if(typeof y=="function"){const I=O[R];_=y.call(k,I),O.splice(R,1),R--}return _}),W.formatArgs.call(k,O),(k.log||W.log).apply(k,O)}return B.namespace=q,B.useColors=W.useColors(),B.color=W.selectColor(q),B.extend=Q,B.destroy=W.destroy,Object.defineProperty(B,"enabled",{enumerable:!0,configurable:!1,get:()=>te===null?W.enabled(q):te,set:O=>{te=O}}),typeof W.init=="function"&&W.init(B),B}function Q(q,H){const te=W(this.namespace+(H===void 0?":":H)+q);return te.log=this.log,te}function F(q){return q.toString().substring(2,q.toString().length-2).replace(/\.\*\?$/,"*")}return W.debug=W,W.default=W,W.coerce=function(q){return q instanceof Error?q.stack||q.message:q},W.disable=function(){const q=[...W.names.map(F),...W.skips.map(F).map(H=>"-"+H)].join(",");return W.enable(""),q},W.enable=function(q){let H;W.save(q),W.names=[],W.skips=[];const te=(typeof q=="string"?q:"").split(/[\s,]+/),B=te.length;for(H=0;H<B;H++)te[H]&&((q=te[H].replace(/\*/g,".*?"))[0]==="-"?W.skips.push(new RegExp("^"+q.substr(1)+"$")):W.names.push(new RegExp("^"+q+"$")))},W.enabled=function(q){if(q[q.length-1]==="*")return!0;let H,te;for(H=0,te=W.skips.length;H<te;H++)if(W.skips[H].test(q))return!1;for(H=0,te=W.names.length;H<te;H++)if(W.names[H].test(q))return!0;return!1},W.humanize=P(824),W.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(K).forEach(q=>{W[q]=K[q]}),W.names=[],W.skips=[],W.formatters={},W.selectColor=function(q){let H=0;for(let te=0;te<q.length;te++)H=(H<<5)-H+q.charCodeAt(te),H|=0;return W.colors[Math.abs(H)%W.colors.length]},W.enable(W.load()),W}},856:function(L){L.exports=function(){var E=Object.hasOwnProperty,P=Object.setPrototypeOf,K=Object.isFrozen,W=Object.getPrototypeOf,Q=Object.getOwnPropertyDescriptor,F=Object.freeze,q=Object.seal,H=Object.create,te=typeof Reflect<"u"&&Reflect,B=te.apply,O=te.construct;B||(B=function(Ne,Oe,ke){return Ne.apply(Oe,ke)}),F||(F=function(Ne){return Ne}),q||(q=function(Ne){return Ne}),O||(O=function(Ne,Oe){return new(Function.prototype.bind.apply(Ne,[null].concat(function(ke){if(Array.isArray(ke)){for(var et=0,yt=Array(ke.length);et<ke.length;et++)yt[et]=ke[et];return yt}return Array.from(ke)}(Oe))))});var k,w=se(Array.prototype.forEach),N=se(Array.prototype.pop),R=se(Array.prototype.push),_=se(String.prototype.toLowerCase),h=se(String.prototype.match),y=se(String.prototype.replace),I=se(String.prototype.indexOf),J=se(String.prototype.trim),Z=se(RegExp.prototype.test),ae=(k=TypeError,function(){for(var Ne=arguments.length,Oe=Array(Ne),ke=0;ke<Ne;ke++)Oe[ke]=arguments[ke];return O(k,Oe)});function se(Ne){return function(Oe){for(var ke=arguments.length,et=Array(ke>1?ke-1:0),yt=1;yt<ke;yt++)et[yt-1]=arguments[yt];return B(Ne,Oe,et)}}function pe(Ne,Oe){P&&P(Ne,null);for(var ke=Oe.length;ke--;){var et=Oe[ke];if(typeof et=="string"){var yt=_(et);yt!==et&&(K(Oe)||(Oe[ke]=yt),et=yt)}Ne[et]=!0}return Ne}function X(Ne){var Oe=H(null),ke=void 0;for(ke in Ne)B(E,Ne,[ke])&&(Oe[ke]=Ne[ke]);return Oe}function he(Ne,Oe){for(;Ne!==null;){var ke=Q(Ne,Oe);if(ke){if(ke.get)return se(ke.get);if(typeof ke.value=="function")return se(ke.value)}Ne=W(Ne)}return function(et){return console.warn("fallback value for",et),null}}var oe=F(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Ee=F(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),le=F(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),be=F(["animate","color-profile","cursor","discard","fedropshadow","feimage","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Fe=F(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),z=F(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),x=F(["#text"]),Se=F(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Me=F(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),De=F(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Ve=F(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Ae=q(/\{\{[\s\S]*|[\s\S]*\}\}/gm),Bt=q(/<%[\s\S]*|[\s\S]*%>/gm),gt=q(/^data-[\-\w.\u00B7-\uFFFF]/),Xe=q(/^aria-[\-\w]+$/),Ue=q(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Be=q(/^(?:\w+script|data):/i),ht=q(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Zt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ne){return typeof Ne}:function(Ne){return Ne&&typeof Symbol=="function"&&Ne.constructor===Symbol&&Ne!==Symbol.prototype?"symbol":typeof Ne};function ot(Ne){if(Array.isArray(Ne)){for(var Oe=0,ke=Array(Ne.length);Oe<Ne.length;Oe++)ke[Oe]=Ne[Oe];return ke}return Array.from(Ne)}var Ot=function(){return typeof window>"u"?null:window},Lt=function(Ne,Oe){if((Ne===void 0?"undefined":Zt(Ne))!=="object"||typeof Ne.createPolicy!="function")return null;var ke=null,et="data-tt-policy-suffix";Oe.currentScript&&Oe.currentScript.hasAttribute(et)&&(ke=Oe.currentScript.getAttribute(et));var yt="dompurify"+(ke?"#"+ke:"");try{return Ne.createPolicy(yt,{createHTML:function(Kt){return Kt}})}catch{return console.warn("TrustedTypes policy "+yt+" could not be created."),null}};return function Ne(){var Oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ot(),ke=function(ee){return Ne(ee)};if(ke.version="2.3.1",ke.removed=[],!Oe||!Oe.document||Oe.document.nodeType!==9)return ke.isSupported=!1,ke;var et=Oe.document,yt=Oe.document,Kt=Oe.DocumentFragment,jr=Oe.HTMLTemplateElement,At=Oe.Node,nn=Oe.Element,St=Oe.NodeFilter,gn=Oe.NamedNodeMap,ar=gn===void 0?Oe.NamedNodeMap||Oe.MozNamedAttrMap:gn,sr=Oe.Text,lr=Oe.Comment,_t=Oe.DOMParser,Pt=Oe.trustedTypes,dt=nn.prototype,Wt=he(dt,"cloneNode"),fn=he(dt,"nextSibling"),Cr=he(dt,"childNodes"),Ct=he(dt,"parentNode");if(typeof jr=="function"){var An=yt.createElement("template");An.content&&An.content.ownerDocument&&(yt=An.content.ownerDocument)}var rn=Lt(Pt,et),Hr=rn&&kn?rn.createHTML(""):"",Zn=yt,Qn=Zn.implementation,ri=Zn.createNodeIterator,zr=Zn.createDocumentFragment,mt=Zn.getElementsByTagName,qr=et.importNode,Yt={};try{Yt=X(yt).documentMode?yt.documentMode:{}}catch{}var Mt={};ke.isSupported=typeof Ct=="function"&&Qn&&Qn.createHTMLDocument!==void 0&&Yt!==9;var ur=Ae,zt=Bt,Ar=gt,Er=Xe,on=Be,Yn=ht,Sr=Ue,Nt=null,kr=pe({},[].concat(ot(oe),ot(Ee),ot(le),ot(Fe),ot(x))),Dt=null,cr=pe({},[].concat(ot(Se),ot(Me),ot(De),ot(Ve))),Tr=null,fr=null,Kr=!0,hr=!0,dr=!1,En=!1,It=!1,pr=!1,Sn=!1,Bn=!1,gr=!1,Vr=!0,kn=!1,qt=!0,mr=!0,Tn=!1,Rn={},mn=null,vn=pe({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),vr=null,Rr=pe({},["audio","video","img","source","image","track"]),Ln=null,yr=pe({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Lr="http://www.w3.org/1998/Math/MathML",an="http://www.w3.org/2000/svg",Qe="http://www.w3.org/1999/xhtml",Xn=Qe,Nn=!1,On=null,Wn=yt.createElement("form"),er=function(ee){On&&On===ee||(ee&&(ee===void 0?"undefined":Zt(ee))==="object"||(ee={}),ee=X(ee),Nt="ALLOWED_TAGS"in ee?pe({},ee.ALLOWED_TAGS):kr,Dt="ALLOWED_ATTR"in ee?pe({},ee.ALLOWED_ATTR):cr,Ln="ADD_URI_SAFE_ATTR"in ee?pe(X(yr),ee.ADD_URI_SAFE_ATTR):yr,vr="ADD_DATA_URI_TAGS"in ee?pe(X(Rr),ee.ADD_DATA_URI_TAGS):Rr,mn="FORBID_CONTENTS"in ee?pe({},ee.FORBID_CONTENTS):vn,Tr="FORBID_TAGS"in ee?pe({},ee.FORBID_TAGS):{},fr="FORBID_ATTR"in ee?pe({},ee.FORBID_ATTR):{},Rn="USE_PROFILES"in ee&&ee.USE_PROFILES,Kr=ee.ALLOW_ARIA_ATTR!==!1,hr=ee.ALLOW_DATA_ATTR!==!1,dr=ee.ALLOW_UNKNOWN_PROTOCOLS||!1,En=ee.SAFE_FOR_TEMPLATES||!1,It=ee.WHOLE_DOCUMENT||!1,Bn=ee.RETURN_DOM||!1,gr=ee.RETURN_DOM_FRAGMENT||!1,Vr=ee.RETURN_DOM_IMPORT!==!1,kn=ee.RETURN_TRUSTED_TYPE||!1,Sn=ee.FORCE_BODY||!1,qt=ee.SANITIZE_DOM!==!1,mr=ee.KEEP_CONTENT!==!1,Tn=ee.IN_PLACE||!1,Sr=ee.ALLOWED_URI_REGEXP||Sr,Xn=ee.NAMESPACE||Qe,En&&(hr=!1),gr&&(Bn=!0),Rn&&(Nt=pe({},[].concat(ot(x))),Dt=[],Rn.html===!0&&(pe(Nt,oe),pe(Dt,Se)),Rn.svg===!0&&(pe(Nt,Ee),pe(Dt,Me),pe(Dt,Ve)),Rn.svgFilters===!0&&(pe(Nt,le),pe(Dt,Me),pe(Dt,Ve)),Rn.mathMl===!0&&(pe(Nt,Fe),pe(Dt,De),pe(Dt,Ve))),ee.ADD_TAGS&&(Nt===kr&&(Nt=X(Nt)),pe(Nt,ee.ADD_TAGS)),ee.ADD_ATTR&&(Dt===cr&&(Dt=X(Dt)),pe(Dt,ee.ADD_ATTR)),ee.ADD_URI_SAFE_ATTR&&pe(Ln,ee.ADD_URI_SAFE_ATTR),ee.FORBID_CONTENTS&&(mn===vn&&(mn=X(mn)),pe(mn,ee.FORBID_CONTENTS)),mr&&(Nt["#text"]=!0),It&&pe(Nt,["html","head","body"]),Nt.table&&(pe(Nt,["tbody"]),delete Tr.tbody),F&&F(ee),On=ee)},tr=pe({},["mi","mo","mn","ms","mtext"]),Xt=pe({},["foreignobject","desc","title","annotation-xml"]),sn=pe({},Ee);pe(sn,le),pe(sn,be);var Un=pe({},Fe);pe(Un,z);var en=function(ee){var Ie=Ct(ee);Ie&&Ie.tagName||(Ie={namespaceURI:Qe,tagName:"template"});var Te=_(ee.tagName),st=_(Ie.tagName);if(ee.namespaceURI===an)return Ie.namespaceURI===Qe?Te==="svg":Ie.namespaceURI===Lr?Te==="svg"&&(st==="annotation-xml"||tr[st]):Boolean(sn[Te]);if(ee.namespaceURI===Lr)return Ie.namespaceURI===Qe?Te==="math":Ie.namespaceURI===an?Te==="math"&&Xt[st]:Boolean(Un[Te]);if(ee.namespaceURI===Qe){if(Ie.namespaceURI===an&&!Xt[st]||Ie.namespaceURI===Lr&&!tr[st])return!1;var pt=pe({},["title","style","font","a","script"]);return!Un[Te]&&(pt[Te]||!sn[Te])}return!1},ln=function(ee){R(ke.removed,{element:ee});try{ee.parentNode.removeChild(ee)}catch{try{ee.outerHTML=Hr}catch{ee.remove()}}},In=function(ee,Ie){try{R(ke.removed,{attribute:Ie.getAttributeNode(ee),from:Ie})}catch{R(ke.removed,{attribute:null,from:Ie})}if(Ie.removeAttribute(ee),ee==="is"&&!Dt[ee])if(Bn||gr)try{ln(Ie)}catch{}else try{Ie.setAttribute(ee,"")}catch{}},Nr=function(ee){var Ie=void 0,Te=void 0;if(Sn)ee="<remove></remove>"+ee;else{var st=h(ee,/^[\r\n\t ]+/);Te=st&&st[0]}var pt=rn?rn.createHTML(ee):ee;if(Xn===Qe)try{Ie=new _t().parseFromString(pt,"text/html")}catch{}if(!Ie||!Ie.documentElement){Ie=Qn.createDocument(Xn,"template",null);try{Ie.documentElement.innerHTML=Nn?"":pt}catch{}}var M=Ie.body||Ie.documentElement;return ee&&Te&&M.insertBefore(yt.createTextNode(Te),M.childNodes[0]||null),Xn===Qe?mt.call(Ie,It?"html":"body")[0]:It?Ie.documentElement:M},_r=function(ee){return ri.call(ee.ownerDocument||ee,ee,St.SHOW_ELEMENT|St.SHOW_COMMENT|St.SHOW_TEXT,null,!1)},Or=function(ee){return!(ee instanceof sr||ee instanceof lr||typeof ee.nodeName=="string"&&typeof ee.textContent=="string"&&typeof ee.removeChild=="function"&&ee.attributes instanceof ar&&typeof ee.removeAttribute=="function"&&typeof ee.setAttribute=="function"&&typeof ee.namespaceURI=="string"&&typeof ee.insertBefore=="function")},yn=function(ee){return(At===void 0?"undefined":Zt(At))==="object"?ee instanceof At:ee&&(ee===void 0?"undefined":Zt(ee))==="object"&&typeof ee.nodeType=="number"&&typeof ee.nodeName=="string"},Rt=function(ee,Ie,Te){Mt[ee]&&w(Mt[ee],function(st){st.call(ke,Ie,Te,On)})},Gr=function(ee){var Ie=void 0;if(Rt("beforeSanitizeElements",ee,null),Or(ee)||h(ee.nodeName,/[\u0080-\uFFFF]/))return ln(ee),!0;var Te=_(ee.nodeName);if(Rt("uponSanitizeElement",ee,{tagName:Te,allowedTags:Nt}),!yn(ee.firstElementChild)&&(!yn(ee.content)||!yn(ee.content.firstElementChild))&&Z(/<[/\w]/g,ee.innerHTML)&&Z(/<[/\w]/g,ee.textContent)||Te==="select"&&Z(/<template/i,ee.innerHTML))return ln(ee),!0;if(!Nt[Te]||Tr[Te]){if(mr&&!mn[Te]){var st=Ct(ee)||ee.parentNode,pt=Cr(ee)||ee.childNodes;if(pt&&st)for(var M=pt.length-1;M>=0;--M)st.insertBefore(Wt(pt[M],!0),fn(ee))}return ln(ee),!0}return ee instanceof nn&&!en(ee)?(ln(ee),!0):Te!=="noscript"&&Te!=="noembed"||!Z(/<\/no(script|embed)/i,ee.innerHTML)?(En&&ee.nodeType===3&&(Ie=ee.textContent,Ie=y(Ie,ur," "),Ie=y(Ie,zt," "),ee.textContent!==Ie&&(R(ke.removed,{element:ee.cloneNode()}),ee.textContent=Ie)),Rt("afterSanitizeElements",ee,null),!1):(ln(ee),!0)},jn=function(ee,Ie,Te){if(qt&&(Ie==="id"||Ie==="name")&&(Te in yt||Te in Wn))return!1;if(!(hr&&!fr[Ie]&&Z(Ar,Ie))){if(!(Kr&&Z(Er,Ie))){if(!Dt[Ie]||fr[Ie])return!1;if(!Ln[Ie]){if(!Z(Sr,y(Te,Yn,""))){if((Ie!=="src"&&Ie!=="xlink:href"&&Ie!=="href"||ee==="script"||I(Te,"data:")!==0||!vr[ee])&&!(dr&&!Z(on,y(Te,Yn,"")))){if(Te)return!1}}}}}return!0},Hn=function(ee){var Ie=void 0,Te=void 0,st=void 0,pt=void 0;Rt("beforeSanitizeAttributes",ee,null);var M=ee.attributes;if(M){var b={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Dt};for(pt=M.length;pt--;){var U=Ie=M[pt],ne=U.name,ye=U.namespaceURI;if(Te=J(Ie.value),st=_(ne),b.attrName=st,b.attrValue=Te,b.keepAttr=!0,b.forceKeepAttr=void 0,Rt("uponSanitizeAttribute",ee,b),Te=b.attrValue,!b.forceKeepAttr&&(In(ne,ee),b.keepAttr))if(Z(/\/>/i,Te))In(ne,ee);else{En&&(Te=y(Te,ur," "),Te=y(Te,zt," "));var ge=ee.nodeName.toLowerCase();if(jn(ge,st,Te))try{ye?ee.setAttributeNS(ye,ne,Te):ee.setAttribute(ne,Te),N(ke.removed)}catch{}}}Rt("afterSanitizeAttributes",ee,null)}},Jr=function ee(Ie){var Te=void 0,st=_r(Ie);for(Rt("beforeSanitizeShadowDOM",Ie,null);Te=st.nextNode();)Rt("uponSanitizeShadowNode",Te,null),Gr(Te)||(Te.content instanceof Kt&&ee(Te.content),Hn(Te));Rt("afterSanitizeShadowDOM",Ie,null)};return ke.sanitize=function(ee,Ie){var Te=void 0,st=void 0,pt=void 0,M=void 0,b=void 0;if((Nn=!ee)&&(ee="<!-->"),typeof ee!="string"&&!yn(ee)){if(typeof ee.toString!="function")throw ae("toString is not a function");if(typeof(ee=ee.toString())!="string")throw ae("dirty is not a string, aborting")}if(!ke.isSupported){if(Zt(Oe.toStaticHTML)==="object"||typeof Oe.toStaticHTML=="function"){if(typeof ee=="string")return Oe.toStaticHTML(ee);if(yn(ee))return Oe.toStaticHTML(ee.outerHTML)}return ee}if(pr||er(Ie),ke.removed=[],typeof ee=="string"&&(Tn=!1),!Tn)if(ee instanceof At)(st=(Te=Nr("<!---->")).ownerDocument.importNode(ee,!0)).nodeType===1&&st.nodeName==="BODY"||st.nodeName==="HTML"?Te=st:Te.appendChild(st);else{if(!Bn&&!En&&!It&&ee.indexOf("<")===-1)return rn&&kn?rn.createHTML(ee):ee;if(!(Te=Nr(ee)))return Bn?null:Hr}Te&&Sn&&ln(Te.firstChild);for(var U=_r(Tn?ee:Te);pt=U.nextNode();)pt.nodeType===3&&pt===M||Gr(pt)||(pt.content instanceof Kt&&Jr(pt.content),Hn(pt),M=pt);if(M=null,Tn)return ee;if(Bn){if(gr)for(b=zr.call(Te.ownerDocument);Te.firstChild;)b.appendChild(Te.firstChild);else b=Te;return Vr&&(b=qr.call(et,b,!0)),b}var ne=It?Te.outerHTML:Te.innerHTML;return En&&(ne=y(ne,ur," "),ne=y(ne,zt," ")),rn&&kn?rn.createHTML(ne):ne},ke.setConfig=function(ee){er(ee),pr=!0},ke.clearConfig=function(){On=null,pr=!1},ke.isValidAttribute=function(ee,Ie,Te){On||er({});var st=_(ee),pt=_(Ie);return jn(st,pt,Te)},ke.addHook=function(ee,Ie){typeof Ie=="function"&&(Mt[ee]=Mt[ee]||[],R(Mt[ee],Ie))},ke.removeHook=function(ee){Mt[ee]&&N(Mt[ee])},ke.removeHooks=function(ee){Mt[ee]&&(Mt[ee]=[])},ke.removeAllHooks=function(){Mt={}},ke}()}()},729:L=>{var E=Object.prototype.hasOwnProperty,P="~";function K(){}function W(H,te,B){this.fn=H,this.context=te,this.once=B||!1}function Q(H,te,B,O,k){if(typeof B!="function")throw new TypeError("The listener must be a function");var w=new W(B,O||H,k),N=P?P+te:te;return H._events[N]?H._events[N].fn?H._events[N]=[H._events[N],w]:H._events[N].push(w):(H._events[N]=w,H._eventsCount++),H}function F(H,te){--H._eventsCount==0?H._events=new K:delete H._events[te]}function q(){this._events=new K,this._eventsCount=0}Object.create&&(K.prototype=Object.create(null),new K().__proto__||(P=!1)),q.prototype.eventNames=function(){var H,te,B=[];if(this._eventsCount===0)return B;for(te in H=this._events)E.call(H,te)&&B.push(P?te.slice(1):te);return Object.getOwnPropertySymbols?B.concat(Object.getOwnPropertySymbols(H)):B},q.prototype.listeners=function(H){var te=P?P+H:H,B=this._events[te];if(!B)return[];if(B.fn)return[B.fn];for(var O=0,k=B.length,w=new Array(k);O<k;O++)w[O]=B[O].fn;return w},q.prototype.listenerCount=function(H){var te=P?P+H:H,B=this._events[te];return B?B.fn?1:B.length:0},q.prototype.emit=function(H,te,B,O,k,w){var N=P?P+H:H;if(!this._events[N])return!1;var R,_,h=this._events[N],y=arguments.length;if(h.fn){switch(h.once&&this.removeListener(H,h.fn,void 0,!0),y){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,te),!0;case 3:return h.fn.call(h.context,te,B),!0;case 4:return h.fn.call(h.context,te,B,O),!0;case 5:return h.fn.call(h.context,te,B,O,k),!0;case 6:return h.fn.call(h.context,te,B,O,k,w),!0}for(_=1,R=new Array(y-1);_<y;_++)R[_-1]=arguments[_];h.fn.apply(h.context,R)}else{var I,J=h.length;for(_=0;_<J;_++)switch(h[_].once&&this.removeListener(H,h[_].fn,void 0,!0),y){case 1:h[_].fn.call(h[_].context);break;case 2:h[_].fn.call(h[_].context,te);break;case 3:h[_].fn.call(h[_].context,te,B);break;case 4:h[_].fn.call(h[_].context,te,B,O);break;default:if(!R)for(I=1,R=new Array(y-1);I<y;I++)R[I-1]=arguments[I];h[_].fn.apply(h[_].context,R)}}return!0},q.prototype.on=function(H,te,B){return Q(this,H,te,B,!1)},q.prototype.once=function(H,te,B){return Q(this,H,te,B,!0)},q.prototype.removeListener=function(H,te,B,O){var k=P?P+H:H;if(!this._events[k])return this;if(!te)return F(this,k),this;var w=this._events[k];if(w.fn)w.fn!==te||O&&!w.once||B&&w.context!==B||F(this,k);else{for(var N=0,R=[],_=w.length;N<_;N++)(w[N].fn!==te||O&&!w[N].once||B&&w[N].context!==B)&&R.push(w[N]);R.length?this._events[k]=R.length===1?R[0]:R:F(this,k)}return this},q.prototype.removeAllListeners=function(H){var te;return H?(te=P?P+H:H,this._events[te]&&F(this,te)):(this._events=new K,this._eventsCount=0),this},q.prototype.off=q.prototype.removeListener,q.prototype.addListener=q.prototype.on,q.prefixed=P,q.EventEmitter=q,L.exports=q},717:L=>{typeof Object.create=="function"?L.exports=function(E,P){E.super_=P,E.prototype=Object.create(P.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}})}:L.exports=function(E,P){E.super_=P;var K=function(){};K.prototype=P.prototype,E.prototype=new K,E.prototype.constructor=E}},824:L=>{var E=1e3,P=60*E,K=60*P,W=24*K;function Q(F,q,H,te){var B=q>=1.5*H;return Math.round(F/H)+" "+te+(B?"s":"")}L.exports=function(F,q){q=q||{};var H,te,B=typeof F;if(B==="string"&&F.length>0)return function(O){if(!((O=String(O)).length>100)){var k=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(O);if(k){var w=parseFloat(k[1]);switch((k[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*w;case"weeks":case"week":case"w":return 6048e5*w;case"days":case"day":case"d":return w*W;case"hours":case"hour":case"hrs":case"hr":case"h":return w*K;case"minutes":case"minute":case"mins":case"min":case"m":return w*P;case"seconds":case"second":case"secs":case"sec":case"s":return w*E;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return w;default:return}}}}(F);if(B==="number"&&isFinite(F))return q.long?(H=F,(te=Math.abs(H))>=W?Q(H,te,W,"day"):te>=K?Q(H,te,K,"hour"):te>=P?Q(H,te,P,"minute"):te>=E?Q(H,te,E,"second"):H+" ms"):function(O){var k=Math.abs(O);return k>=W?Math.round(O/W)+"d":k>=K?Math.round(O/K)+"h":k>=P?Math.round(O/P)+"m":k>=E?Math.round(O/E)+"s":O+"ms"}(F);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(F))}},520:(L,E,P)=>{var K=P(155),W=K.platform==="win32",Q=P(539);function F(h,y){for(var I=[],J=0;J<h.length;J++){var Z=h[J];Z&&Z!=="."&&(Z===".."?I.length&&I[I.length-1]!==".."?I.pop():y&&I.push(".."):I.push(Z))}return I}function q(h){for(var y=h.length-1,I=0;I<=y&&!h[I];I++);for(var J=y;J>=0&&!h[J];J--);return I===0&&J===y?h:I>J?[]:h.slice(I,J+1)}var H=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,te=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,B={};function O(h){var y=H.exec(h),I=(y[1]||"")+(y[2]||""),J=y[3]||"",Z=te.exec(J);return[I,Z[1],Z[2],Z[3]]}function k(h){var y=H.exec(h),I=y[1]||"",J=!!I&&I[1]!==":";return{device:I,isUnc:J,isAbsolute:J||!!y[2],tail:y[3]}}function w(h){return"\\\\"+h.replace(/^[\\\/]+/,"").replace(/[\\\/]+/g,"\\")}B.resolve=function(){for(var h="",y="",I=!1,J=arguments.length-1;J>=-1;J--){var Z;if(J>=0?Z=arguments[J]:h?(Z=K.env["="+h])&&Z.substr(0,3).toLowerCase()===h.toLowerCase()+"\\"||(Z=h+"\\"):Z=K.cwd(),!Q.isString(Z))throw new TypeError("Arguments to path.resolve must be strings");if(Z){var ae=k(Z),se=ae.device,pe=ae.isUnc,X=ae.isAbsolute,he=ae.tail;if((!se||!h||se.toLowerCase()===h.toLowerCase())&&(h||(h=se),I||(y=he+"\\"+y,I=X),h&&I))break}}return pe&&(h=w(h)),h+(I?"\\":"")+(y=F(y.split(/[\\\/]+/),!I).join("\\"))||"."},B.normalize=function(h){var y=k(h),I=y.device,J=y.isUnc,Z=y.isAbsolute,ae=y.tail,se=/[\\\/]$/.test(ae);return(ae=F(ae.split(/[\\\/]+/),!Z).join("\\"))||Z||(ae="."),ae&&se&&(ae+="\\"),J&&(I=w(I)),I+(Z?"\\":"")+ae},B.isAbsolute=function(h){return k(h).isAbsolute},B.join=function(){for(var h=[],y=0;y<arguments.length;y++){var I=arguments[y];if(!Q.isString(I))throw new TypeError("Arguments to path.join must be strings");I&&h.push(I)}var J=h.join("\\");return/^[\\\/]{2}[^\\\/]/.test(h[0])||(J=J.replace(/^[\\\/]{2,}/,"\\")),B.normalize(J)},B.relative=function(h,y){h=B.resolve(h),y=B.resolve(y);for(var I=h.toLowerCase(),J=y.toLowerCase(),Z=q(y.split("\\")),ae=q(I.split("\\")),se=q(J.split("\\")),pe=Math.min(ae.length,se.length),X=pe,he=0;he<pe;he++)if(ae[he]!==se[he]){X=he;break}if(X==0)return y;var oe=[];for(he=X;he<ae.length;he++)oe.push("..");return(oe=oe.concat(Z.slice(X))).join("\\")},B._makeLong=function(h){if(!Q.isString(h))return h;if(!h)return"";var y=B.resolve(h);return/^[a-zA-Z]\:\\/.test(y)?"\\\\?\\"+y:/^\\\\[^?.]/.test(y)?"\\\\?\\UNC\\"+y.substring(2):h},B.dirname=function(h){var y=O(h),I=y[0],J=y[1];return I||J?(J&&(J=J.substr(0,J.length-1)),I+J):"."},B.basename=function(h,y){var I=O(h)[2];return y&&I.substr(-1*y.length)===y&&(I=I.substr(0,I.length-y.length)),I},B.extname=function(h){return O(h)[3]},B.format=function(h){if(!Q.isObject(h))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof h);var y=h.root||"";if(!Q.isString(y))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof h.root);var I=h.dir,J=h.base||"";return I?I[I.length-1]===B.sep?I+J:I+B.sep+J:J},B.parse=function(h){if(!Q.isString(h))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof h);var y=O(h);if(!y||y.length!==4)throw new TypeError("Invalid path '"+h+"'");return{root:y[0],dir:y[0]+y[1].slice(0,-1),base:y[2],ext:y[3],name:y[2].slice(0,y[2].length-y[3].length)}},B.sep="\\",B.delimiter=";";var N=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,R={};function _(h){return N.exec(h).slice(1)}R.resolve=function(){for(var h="",y=!1,I=arguments.length-1;I>=-1&&!y;I--){var J=I>=0?arguments[I]:K.cwd();if(!Q.isString(J))throw new TypeError("Arguments to path.resolve must be strings");J&&(h=J+"/"+h,y=J[0]==="/")}return(y?"/":"")+(h=F(h.split("/"),!y).join("/"))||"."},R.normalize=function(h){var y=R.isAbsolute(h),I=h&&h[h.length-1]==="/";return(h=F(h.split("/"),!y).join("/"))||y||(h="."),h&&I&&(h+="/"),(y?"/":"")+h},R.isAbsolute=function(h){return h.charAt(0)==="/"},R.join=function(){for(var h="",y=0;y<arguments.length;y++){var I=arguments[y];if(!Q.isString(I))throw new TypeError("Arguments to path.join must be strings");I&&(h+=h?"/"+I:I)}return R.normalize(h)},R.relative=function(h,y){h=R.resolve(h).substr(1),y=R.resolve(y).substr(1);for(var I=q(h.split("/")),J=q(y.split("/")),Z=Math.min(I.length,J.length),ae=Z,se=0;se<Z;se++)if(I[se]!==J[se]){ae=se;break}var pe=[];for(se=ae;se<I.length;se++)pe.push("..");return(pe=pe.concat(J.slice(ae))).join("/")},R._makeLong=function(h){return h},R.dirname=function(h){var y=_(h),I=y[0],J=y[1];return I||J?(J&&(J=J.substr(0,J.length-1)),I+J):"."},R.basename=function(h,y){var I=_(h)[2];return y&&I.substr(-1*y.length)===y&&(I=I.substr(0,I.length-y.length)),I},R.extname=function(h){return _(h)[3]},R.format=function(h){if(!Q.isObject(h))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof h);var y=h.root||"";if(!Q.isString(y))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof h.root);return(h.dir?h.dir+R.sep:"")+(h.base||"")},R.parse=function(h){if(!Q.isString(h))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof h);var y=_(h);if(!y||y.length!==4)throw new TypeError("Invalid path '"+h+"'");return y[1]=y[1]||"",y[2]=y[2]||"",y[3]=y[3]||"",{root:y[0],dir:y[0]+y[1].slice(0,-1),base:y[2],ext:y[3],name:y[2].slice(0,y[2].length-y[3].length)}},R.sep="/",R.delimiter=":",L.exports=W?B:R,L.exports.posix=R,L.exports.win32=B},155:L=>{var E,P,K=L.exports={};function W(){throw new Error("setTimeout has not been defined")}function Q(){throw new Error("clearTimeout has not been defined")}function F(R){if(E===setTimeout)return setTimeout(R,0);if((E===W||!E)&&setTimeout)return E=setTimeout,setTimeout(R,0);try{return E(R,0)}catch{try{return E.call(null,R,0)}catch{return E.call(this,R,0)}}}(function(){try{E=typeof setTimeout=="function"?setTimeout:W}catch{E=W}try{P=typeof clearTimeout=="function"?clearTimeout:Q}catch{P=Q}})();var q,H=[],te=!1,B=-1;function O(){te&&q&&(te=!1,q.length?H=q.concat(H):B=-1,H.length&&k())}function k(){if(!te){var R=F(O);te=!0;for(var _=H.length;_;){for(q=H,H=[];++B<_;)q&&q[B].run();B=-1,_=H.length}q=null,te=!1,function(h){if(P===clearTimeout)return clearTimeout(h);if((P===Q||!P)&&clearTimeout)return P=clearTimeout,clearTimeout(h);try{P(h)}catch{try{return P.call(null,h)}catch{return P.call(this,h)}}}(R)}}function w(R,_){this.fun=R,this.array=_}function N(){}K.nextTick=function(R){var _=new Array(arguments.length-1);if(arguments.length>1)for(var h=1;h<arguments.length;h++)_[h-1]=arguments[h];H.push(new w(R,_)),H.length!==1||te||F(k)},w.prototype.run=function(){this.fun.apply(null,this.array)},K.title="browser",K.browser=!0,K.env={},K.argv=[],K.version="",K.versions={},K.on=N,K.addListener=N,K.once=N,K.off=N,K.removeListener=N,K.removeAllListeners=N,K.emit=N,K.prependListener=N,K.prependOnceListener=N,K.listeners=function(R){return[]},K.binding=function(R){throw new Error("process.binding is not supported")},K.cwd=function(){return"/"},K.chdir=function(R){throw new Error("process.chdir is not supported")},K.umask=function(){return 0}},384:L=>{L.exports=function(E){return E&&typeof E=="object"&&typeof E.copy=="function"&&typeof E.fill=="function"&&typeof E.readUInt8=="function"}},539:(L,E,P)=>{var K=P(155),W=/%[sdj%]/g;E.format=function(le){if(!h(le)){for(var be=[],Fe=0;Fe<arguments.length;Fe++)be.push(q(arguments[Fe]));return be.join(" ")}Fe=1;for(var z=arguments,x=z.length,Se=String(le).replace(W,function(De){if(De==="%%")return"%";if(Fe>=x)return De;switch(De){case"%s":return String(z[Fe++]);case"%d":return Number(z[Fe++]);case"%j":try{return JSON.stringify(z[Fe++])}catch{return"[Circular]"}default:return De}}),Me=z[Fe];Fe<x;Me=z[++Fe])R(Me)||!J(Me)?Se+=" "+Me:Se+=" "+q(Me);return Se},E.deprecate=function(le,be){if(y(P.g.process))return function(){return E.deprecate(le,be).apply(this,arguments)};if(K.noDeprecation===!0)return le;var Fe=!1;return function(){if(!Fe){if(K.throwDeprecation)throw new Error(be);K.traceDeprecation?console.trace(be):console.error(be),Fe=!0}return le.apply(this,arguments)}};var Q,F={};function q(le,be){var Fe={seen:[],stylize:te};return arguments.length>=3&&(Fe.depth=arguments[2]),arguments.length>=4&&(Fe.colors=arguments[3]),N(be)?Fe.showHidden=be:be&&E._extend(Fe,be),y(Fe.showHidden)&&(Fe.showHidden=!1),y(Fe.depth)&&(Fe.depth=2),y(Fe.colors)&&(Fe.colors=!1),y(Fe.customInspect)&&(Fe.customInspect=!0),Fe.colors&&(Fe.stylize=H),B(Fe,le,Fe.depth)}function H(le,be){var Fe=q.styles[be];return Fe?"\x1B["+q.colors[Fe][0]+"m"+le+"\x1B["+q.colors[Fe][1]+"m":le}function te(le,be){return le}function B(le,be,Fe){if(le.customInspect&&be&&se(be.inspect)&&be.inspect!==E.inspect&&(!be.constructor||be.constructor.prototype!==be)){var z=be.inspect(Fe,le);return h(z)||(z=B(le,z,Fe)),z}var x=function(Xe,Ue){if(y(Ue))return Xe.stylize("undefined","undefined");if(h(Ue)){var Be="'"+JSON.stringify(Ue).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return Xe.stylize(Be,"string")}return _(Ue)?Xe.stylize(""+Ue,"number"):N(Ue)?Xe.stylize(""+Ue,"boolean"):R(Ue)?Xe.stylize("null","null"):void 0}(le,be);if(x)return x;var Se=Object.keys(be),Me=function(Xe){var Ue={};return Xe.forEach(function(Be,ht){Ue[Be]=!0}),Ue}(Se);if(le.showHidden&&(Se=Object.getOwnPropertyNames(be)),ae(be)&&(Se.indexOf("message")>=0||Se.indexOf("description")>=0))return O(be);if(Se.length===0){if(se(be)){var De=be.name?": "+be.name:"";return le.stylize("[Function"+De+"]","special")}if(I(be))return le.stylize(RegExp.prototype.toString.call(be),"regexp");if(Z(be))return le.stylize(Date.prototype.toString.call(be),"date");if(ae(be))return O(be)}var Ve,Ae="",Bt=!1,gt=["{","}"];return w(be)&&(Bt=!0,gt=["[","]"]),se(be)&&(Ae=" [Function"+(be.name?": "+be.name:"")+"]"),I(be)&&(Ae=" "+RegExp.prototype.toString.call(be)),Z(be)&&(Ae=" "+Date.prototype.toUTCString.call(be)),ae(be)&&(Ae=" "+O(be)),Se.length!==0||Bt&&be.length!=0?Fe<0?I(be)?le.stylize(RegExp.prototype.toString.call(be),"regexp"):le.stylize("[Object]","special"):(le.seen.push(be),Ve=Bt?function(Xe,Ue,Be,ht,Zt){for(var ot=[],Ot=0,Lt=Ue.length;Ot<Lt;++Ot)Ee(Ue,String(Ot))?ot.push(k(Xe,Ue,Be,ht,String(Ot),!0)):ot.push("");return Zt.forEach(function(Ne){Ne.match(/^\d+$/)||ot.push(k(Xe,Ue,Be,ht,Ne,!0))}),ot}(le,be,Fe,Me,Se):Se.map(function(Xe){return k(le,be,Fe,Me,Xe,Bt)}),le.seen.pop(),function(Xe,Ue,Be){return Xe.reduce(function(ht,Zt){return Zt.indexOf(`
`),ht+Zt.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?Be[0]+(Ue===""?"":Ue+`
 `)+" "+Xe.join(`,
  `)+" "+Be[1]:Be[0]+Ue+" "+Xe.join(", ")+" "+Be[1]}(Ve,Ae,gt)):gt[0]+Ae+gt[1]}function O(le){return"["+Error.prototype.toString.call(le)+"]"}function k(le,be,Fe,z,x,Se){var Me,De,Ve;if((Ve=Object.getOwnPropertyDescriptor(be,x)||{value:be[x]}).get?De=Ve.set?le.stylize("[Getter/Setter]","special"):le.stylize("[Getter]","special"):Ve.set&&(De=le.stylize("[Setter]","special")),Ee(z,x)||(Me="["+x+"]"),De||(le.seen.indexOf(Ve.value)<0?(De=R(Fe)?B(le,Ve.value,null):B(le,Ve.value,Fe-1)).indexOf(`
`)>-1&&(De=Se?De.split(`
`).map(function(Ae){return"  "+Ae}).join(`
`).substr(2):`
`+De.split(`
`).map(function(Ae){return"   "+Ae}).join(`
`)):De=le.stylize("[Circular]","special")),y(Me)){if(Se&&x.match(/^\d+$/))return De;(Me=JSON.stringify(""+x)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Me=Me.substr(1,Me.length-2),Me=le.stylize(Me,"name")):(Me=Me.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Me=le.stylize(Me,"string"))}return Me+": "+De}function w(le){return Array.isArray(le)}function N(le){return typeof le=="boolean"}function R(le){return le===null}function _(le){return typeof le=="number"}function h(le){return typeof le=="string"}function y(le){return le===void 0}function I(le){return J(le)&&pe(le)==="[object RegExp]"}function J(le){return typeof le=="object"&&le!==null}function Z(le){return J(le)&&pe(le)==="[object Date]"}function ae(le){return J(le)&&(pe(le)==="[object Error]"||le instanceof Error)}function se(le){return typeof le=="function"}function pe(le){return Object.prototype.toString.call(le)}function X(le){return le<10?"0"+le.toString(10):le.toString(10)}E.debuglog=function(le){if(y(Q)&&(Q=K.env.NODE_DEBUG||""),le=le.toUpperCase(),!F[le])if(new RegExp("\\b"+le+"\\b","i").test(Q)){var be=K.pid;F[le]=function(){var Fe=E.format.apply(E,arguments);console.error("%s %d: %s",le,be,Fe)}}else F[le]=function(){};return F[le]},E.inspect=q,q.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},q.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},E.isArray=w,E.isBoolean=N,E.isNull=R,E.isNullOrUndefined=function(le){return le==null},E.isNumber=_,E.isString=h,E.isSymbol=function(le){return typeof le=="symbol"},E.isUndefined=y,E.isRegExp=I,E.isObject=J,E.isDate=Z,E.isError=ae,E.isFunction=se,E.isPrimitive=function(le){return le===null||typeof le=="boolean"||typeof le=="number"||typeof le=="string"||typeof le=="symbol"||le===void 0},E.isBuffer=P(384);var he=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function oe(){var le=new Date,be=[X(le.getHours()),X(le.getMinutes()),X(le.getSeconds())].join(":");return[le.getDate(),he[le.getMonth()],be].join(" ")}function Ee(le,be){return Object.prototype.hasOwnProperty.call(le,be)}E.log=function(){console.log("%s - %s",oe(),E.format.apply(E,arguments))},E.inherits=P(717),E._extend=function(le,be){if(!be||!J(be))return le;for(var Fe=Object.keys(be),z=Fe.length;z--;)le[Fe[z]]=be[Fe[z]];return le}}},d={};function v(L){var E=d[L];if(E!==void 0)return E.exports;var P=d[L]={exports:{}};return a[L].call(P.exports,P,P.exports,v),P.exports}v.n=L=>{var E=L&&L.__esModule?()=>L.default:()=>L;return v.d(E,{a:E}),E},v.d=(L,E)=>{for(var P in E)v.o(E,P)&&!v.o(L,P)&&Object.defineProperty(L,P,{enumerable:!0,get:E[P]})},v.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),v.o=(L,E)=>Object.prototype.hasOwnProperty.call(L,E),v.r=L=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(L,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(L,"__esModule",{value:!0})};var S={};return(()=>{v.r(S),v.d(S,{LSPluginUser:()=>st,setupPluginUserInstance:()=>pt});var L=v(520);v(856);const E=function(M,b){return M===b||M!=M&&b!=b},P=function(M,b){for(var U=M.length;U--;)if(E(M[U][0],b))return U;return-1};var K=Array.prototype.splice;function W(M){var b=-1,U=M==null?0:M.length;for(this.clear();++b<U;){var ne=M[b];this.set(ne[0],ne[1])}}W.prototype.clear=function(){this.__data__=[],this.size=0},W.prototype.delete=function(M){var b=this.__data__,U=P(b,M);return!(U<0||(U==b.length-1?b.pop():K.call(b,U,1),--this.size,0))},W.prototype.get=function(M){var b=this.__data__,U=P(b,M);return U<0?void 0:b[U][1]},W.prototype.has=function(M){return P(this.__data__,M)>-1},W.prototype.set=function(M,b){var U=this.__data__,ne=P(U,M);return ne<0?(++this.size,U.push([M,b])):U[ne][1]=b,this};const Q=W,F=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal;var q=typeof self=="object"&&self&&self.Object===Object&&self;const H=F||q||Function("return this")(),te=H.Symbol;var B=Object.prototype,O=B.hasOwnProperty,k=B.toString,w=te?te.toStringTag:void 0,N=Object.prototype.toString,R=te?te.toStringTag:void 0;const _=function(M){return M==null?M===void 0?"[object Undefined]":"[object Null]":R&&R in Object(M)?function(b){var U=O.call(b,w),ne=b[w];try{b[w]=void 0;var ye=!0}catch{}var ge=k.call(b);return ye&&(U?b[w]=ne:delete b[w]),ge}(M):function(b){return N.call(b)}(M)},h=function(M){var b=typeof M;return M!=null&&(b=="object"||b=="function")},y=function(M){if(!h(M))return!1;var b=_(M);return b=="[object Function]"||b=="[object GeneratorFunction]"||b=="[object AsyncFunction]"||b=="[object Proxy]"},I=H["__core-js_shared__"];var J,Z=(J=/[^.]+$/.exec(I&&I.keys&&I.keys.IE_PROTO||""))?"Symbol(src)_1."+J:"",ae=Function.prototype.toString,se=/^\[object .+?Constructor\]$/,pe=Function.prototype,X=Object.prototype,he=pe.toString,oe=X.hasOwnProperty,Ee=RegExp("^"+he.call(oe).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const le=function(M){return!(!h(M)||(b=M,Z&&Z in b))&&(y(M)?Ee:se).test(function(U){if(U!=null){try{return ae.call(U)}catch{}try{return U+""}catch{}}return""}(M));var b},be=function(M,b){var U=function(ne,ye){return ne==null?void 0:ne[ye]}(M,b);return le(U)?U:void 0},Fe=be(H,"Map"),z=be(Object,"create");var x=Object.prototype.hasOwnProperty,Se=Object.prototype.hasOwnProperty;function Me(M){var b=-1,U=M==null?0:M.length;for(this.clear();++b<U;){var ne=M[b];this.set(ne[0],ne[1])}}Me.prototype.clear=function(){this.__data__=z?z(null):{},this.size=0},Me.prototype.delete=function(M){var b=this.has(M)&&delete this.__data__[M];return this.size-=b?1:0,b},Me.prototype.get=function(M){var b=this.__data__;if(z){var U=b[M];return U==="__lodash_hash_undefined__"?void 0:U}return x.call(b,M)?b[M]:void 0},Me.prototype.has=function(M){var b=this.__data__;return z?b[M]!==void 0:Se.call(b,M)},Me.prototype.set=function(M,b){var U=this.__data__;return this.size+=this.has(M)?0:1,U[M]=z&&b===void 0?"__lodash_hash_undefined__":b,this};const De=Me,Ve=function(M,b){var U,ne,ye=M.__data__;return((ne=typeof(U=b))=="string"||ne=="number"||ne=="symbol"||ne=="boolean"?U!=="__proto__":U===null)?ye[typeof b=="string"?"string":"hash"]:ye.map};function Ae(M){var b=-1,U=M==null?0:M.length;for(this.clear();++b<U;){var ne=M[b];this.set(ne[0],ne[1])}}Ae.prototype.clear=function(){this.size=0,this.__data__={hash:new De,map:new(Fe||Q),string:new De}},Ae.prototype.delete=function(M){var b=Ve(this,M).delete(M);return this.size-=b?1:0,b},Ae.prototype.get=function(M){return Ve(this,M).get(M)},Ae.prototype.has=function(M){return Ve(this,M).has(M)},Ae.prototype.set=function(M,b){var U=Ve(this,M),ne=U.size;return U.set(M,b),this.size+=U.size==ne?0:1,this};const Bt=Ae;function gt(M){var b=this.__data__=new Q(M);this.size=b.size}gt.prototype.clear=function(){this.__data__=new Q,this.size=0},gt.prototype.delete=function(M){var b=this.__data__,U=b.delete(M);return this.size=b.size,U},gt.prototype.get=function(M){return this.__data__.get(M)},gt.prototype.has=function(M){return this.__data__.has(M)},gt.prototype.set=function(M,b){var U=this.__data__;if(U instanceof Q){var ne=U.__data__;if(!Fe||ne.length<199)return ne.push([M,b]),this.size=++U.size,this;U=this.__data__=new Bt(ne)}return U.set(M,b),this.size=U.size,this};const Xe=gt,Ue=function(){try{var M=be(Object,"defineProperty");return M({},"",{}),M}catch{}}(),Be=function(M,b,U){b=="__proto__"&&Ue?Ue(M,b,{configurable:!0,enumerable:!0,value:U,writable:!0}):M[b]=U},ht=function(M,b,U){(U!==void 0&&!E(M[b],U)||U===void 0&&!(b in M))&&Be(M,b,U)},Zt=function(M,b,U){for(var ne=-1,ye=Object(M),ge=U(M),n=ge.length;n--;){var i=ge[++ne];if(b(ye[i],i,ye)===!1)break}return M};var ot=g&&!g.nodeType&&g,Ot=ot&&!0&&f&&!f.nodeType&&f,Lt=Ot&&Ot.exports===ot?H.Buffer:void 0,Ne=Lt?Lt.allocUnsafe:void 0;const Oe=H.Uint8Array,ke=function(M,b){var U,ne,ye=b?(U=M.buffer,ne=new U.constructor(U.byteLength),new Oe(ne).set(new Oe(U)),ne):M.buffer;return new M.constructor(ye,M.byteOffset,M.length)};var et=Object.create;const yt=function(){function M(){}return function(b){if(!h(b))return{};if(et)return et(b);M.prototype=b;var U=new M;return M.prototype=void 0,U}}(),Kt=(jr=Object.getPrototypeOf,At=Object,function(M){return jr(At(M))});var jr,At,nn=Object.prototype;const St=function(M){var b=M&&M.constructor;return M===(typeof b=="function"&&b.prototype||nn)},gn=function(M){return M!=null&&typeof M=="object"},ar=function(M){return gn(M)&&_(M)=="[object Arguments]"};var sr=Object.prototype,lr=sr.hasOwnProperty,_t=sr.propertyIsEnumerable;const Pt=ar(function(){return arguments}())?ar:function(M){return gn(M)&&lr.call(M,"callee")&&!_t.call(M,"callee")},dt=Array.isArray,Wt=function(M){return typeof M=="number"&&M>-1&&M%1==0&&M<=9007199254740991},fn=function(M){return M!=null&&Wt(M.length)&&!y(M)};var Cr=g&&!g.nodeType&&g,Ct=Cr&&!0&&f&&!f.nodeType&&f,An=Ct&&Ct.exports===Cr?H.Buffer:void 0;const rn=(An?An.isBuffer:void 0)||function(){return!1};var Hr=Function.prototype,Zn=Object.prototype,Qn=Hr.toString,ri=Zn.hasOwnProperty,zr=Qn.call(Object),mt={};mt["[object Float32Array]"]=mt["[object Float64Array]"]=mt["[object Int8Array]"]=mt["[object Int16Array]"]=mt["[object Int32Array]"]=mt["[object Uint8Array]"]=mt["[object Uint8ClampedArray]"]=mt["[object Uint16Array]"]=mt["[object Uint32Array]"]=!0,mt["[object Arguments]"]=mt["[object Array]"]=mt["[object ArrayBuffer]"]=mt["[object Boolean]"]=mt["[object DataView]"]=mt["[object Date]"]=mt["[object Error]"]=mt["[object Function]"]=mt["[object Map]"]=mt["[object Number]"]=mt["[object Object]"]=mt["[object RegExp]"]=mt["[object Set]"]=mt["[object String]"]=mt["[object WeakMap]"]=!1;var qr=g&&!g.nodeType&&g,Yt=qr&&!0&&f&&!f.nodeType&&f,Mt=Yt&&Yt.exports===qr&&F.process,ur=function(){try{return Yt&&Yt.require&&Yt.require("util").types||Mt&&Mt.binding&&Mt.binding("util")}catch{}}(),zt=ur&&ur.isTypedArray;const Ar=zt?function(M){return function(b){return M(b)}}(zt):function(M){return gn(M)&&Wt(M.length)&&!!mt[_(M)]},Er=function(M,b){if((b!=="constructor"||typeof M[b]!="function")&&b!="__proto__")return M[b]};var on=Object.prototype.hasOwnProperty;const Yn=function(M,b,U){var ne=M[b];on.call(M,b)&&E(ne,U)&&(U!==void 0||b in M)||Be(M,b,U)};var Sr=/^(?:0|[1-9]\d*)$/;const Nt=function(M,b){var U=typeof M;return!!(b=b??9007199254740991)&&(U=="number"||U!="symbol"&&Sr.test(M))&&M>-1&&M%1==0&&M<b};var kr=Object.prototype.hasOwnProperty;const Dt=function(M,b){var U=dt(M),ne=!U&&Pt(M),ye=!U&&!ne&&rn(M),ge=!U&&!ne&&!ye&&Ar(M),n=U||ne||ye||ge,i=n?function(u,c){for(var C=-1,D=Array(u);++C<u;)D[C]=c(C);return D}(M.length,String):[],o=i.length;for(var s in M)!b&&!kr.call(M,s)||n&&(s=="length"||ye&&(s=="offset"||s=="parent")||ge&&(s=="buffer"||s=="byteLength"||s=="byteOffset")||Nt(s,o))||i.push(s);return i};var cr=Object.prototype.hasOwnProperty;const Tr=function(M){if(!h(M))return function(ye){var ge=[];if(ye!=null)for(var n in Object(ye))ge.push(n);return ge}(M);var b=St(M),U=[];for(var ne in M)(ne!="constructor"||!b&&cr.call(M,ne))&&U.push(ne);return U},fr=function(M){return fn(M)?Dt(M,!0):Tr(M)},Kr=function(M){return function(b,U,ne,ye){var ge=!ne;ne||(ne={});for(var n=-1,i=U.length;++n<i;){var o=U[n],s=ye?ye(ne[o],b[o],o,ne,b):void 0;s===void 0&&(s=b[o]),ge?Be(ne,o,s):Yn(ne,o,s)}return ne}(M,fr(M))},hr=function(M,b,U,ne,ye,ge,n){var i,o=Er(M,U),s=Er(b,U),u=n.get(s);if(u)ht(M,U,u);else{var c=ge?ge(o,s,U+"",M,b,n):void 0,C=c===void 0;if(C){var D=dt(s),$=!D&&rn(s),V=!D&&!$&&Ar(s);c=s,D||$||V?dt(o)?c=o:gn(i=o)&&fn(i)?c=function(G,ce){var de=-1,ue=G.length;for(ce||(ce=Array(ue));++de<ue;)ce[de]=G[de];return ce}(o):$?(C=!1,c=function(G,ce){if(ce)return G.slice();var de=G.length,ue=Ne?Ne(de):new G.constructor(de);return G.copy(ue),ue}(s,!0)):V?(C=!1,c=ke(s,!0)):c=[]:function(G){if(!gn(G)||_(G)!="[object Object]")return!1;var ce=Kt(G);if(ce===null)return!0;var de=ri.call(ce,"constructor")&&ce.constructor;return typeof de=="function"&&de instanceof de&&Qn.call(de)==zr}(s)||Pt(s)?(c=o,Pt(o)?c=Kr(o):h(o)&&!y(o)||(c=function(G){return typeof G.constructor!="function"||St(G)?{}:yt(Kt(G))}(s))):C=!1}C&&(n.set(s,c),ye(c,s,ne,ge,n),n.delete(s)),ht(M,U,c)}},dr=function M(b,U,ne,ye,ge){b!==U&&Zt(U,function(n,i){if(ge||(ge=new Xe),h(n))hr(b,U,i,ne,M,ye,ge);else{var o=ye?ye(Er(b,i),n,i+"",b,U,ge):void 0;o===void 0&&(o=n),ht(b,i,o)}},fr)},En=function(M){return M},It=function(M,b,U){switch(U.length){case 0:return M.call(b);case 1:return M.call(b,U[0]);case 2:return M.call(b,U[0],U[1]);case 3:return M.call(b,U[0],U[1],U[2])}return M.apply(b,U)};var pr=Math.max;const Sn=Ue?function(M,b){return Ue(M,"toString",{configurable:!0,enumerable:!1,value:(U=b,function(){return U}),writable:!0});var U}:En;var Bn=Date.now;const gr=function(M){var b=0,U=0;return function(){var ne=Bn(),ye=16-(ne-U);if(U=ne,ye>0){if(++b>=800)return arguments[0]}else b=0;return M.apply(void 0,arguments)}}(Sn),Vr=(qt=function(M,b,U){dr(M,b,U)},function(M,b){return gr(function(U,ne,ye){return ne=pr(ne===void 0?U.length-1:ne,0),function(){for(var ge=arguments,n=-1,i=pr(ge.length-ne,0),o=Array(i);++n<i;)o[n]=ge[ne+n];n=-1;for(var s=Array(ne+1);++n<ne;)s[n]=ge[n];return s[ne]=ye(o),It(U,this,s)}}(M,b,En),M+"")}(function(M,b){var U=-1,ne=b.length,ye=ne>1?b[ne-1]:void 0,ge=ne>2?b[2]:void 0;for(ye=qt.length>3&&typeof ye=="function"?(ne--,ye):void 0,ge&&function(i,o,s){if(!h(s))return!1;var u=typeof o;return!!(u=="number"?fn(s)&&Nt(o,s.length):u=="string"&&o in s)&&E(s[o],i)}(b[0],b[1],ge)&&(ye=ne<3?void 0:ye,ne=1),M=Object(M);++U<ne;){var n=b[U];n&&qt(M,n,U)}return M})),kn=navigator.platform.toLowerCase()==="win32"?L.win32:L.posix;var qt;const mr=Vr;function Tn(M,b){let U,ne,ye=!1;const ge=i=>o=>{M&&clearTimeout(M),i(o),ye=!0},n=new Promise((i,o)=>{U=ge(i),ne=ge(o),M&&(M=setTimeout(()=>ne(new Error(`[deferred timeout] ${b}`)),M))});return{created:Date.now(),setTag:i=>b=i,resolve:U,reject:ne,promise:n,get settled(){return ye}}}var Rn=v(227),mn=v.n(Rn);const vn="application/x-postmate-v1+json";let vr=0;const Rr={handshake:1,"handshake-reply":1,call:1,emit:1,reply:1,request:1},Ln=(M,b)=>!(typeof b=="string"&&M.origin!==b||!M.data||typeof M.data=="object"&&!("postmate"in M.data)||M.data.type!==vn||!Rr[M.data.postmate]);class yr{parent;frame;child;events={};childOrigin;listener;constructor(b){this.parent=b.parent,this.frame=b.frame,this.child=b.child,this.childOrigin=b.childOrigin,this.listener=U=>{if(!Ln(U,this.childOrigin))return!1;const{data:ne,name:ye}=((U||{}).data||{}).value||{};U.data.postmate==="emit"&&ye in this.events&&this.events[ye].forEach(ge=>{ge.call(this,ne)})},this.parent.addEventListener("message",this.listener,!1)}get(b){return new Promise(U=>{const ne=++vr,ye=ge=>{ge.data.uid===ne&&ge.data.postmate==="reply"&&(this.parent.removeEventListener("message",ye,!1),U(ge.data.value))};this.parent.addEventListener("message",ye,!1),this.child.postMessage({postmate:"request",type:vn,property:b,uid:ne},this.childOrigin)})}call(b,U){this.child.postMessage({postmate:"call",type:vn,property:b,data:U},this.childOrigin)}on(b,U){this.events[b]||(this.events[b]=[]),this.events[b].push(U)}destroy(){window.removeEventListener("message",this.listener,!1),this.frame.parentNode.removeChild(this.frame)}}class Lr{model;parent;parentOrigin;child;constructor(b){this.model=b.model,this.parent=b.parent,this.parentOrigin=b.parentOrigin,this.child=b.child,this.child.addEventListener("message",U=>{if(!Ln(U,this.parentOrigin))return;const{property:ne,uid:ye,data:ge}=U.data;U.data.postmate!=="call"?((n,i)=>{const o=typeof n[i]=="function"?n[i]():n[i];return Promise.resolve(o)})(this.model,ne).then(n=>{U.source.postMessage({property:ne,postmate:"reply",type:vn,uid:ye,value:n},U.origin)}):ne in this.model&&typeof this.model[ne]=="function"&&this.model[ne](ge)})}emit(b,U){this.parent.postMessage({postmate:"emit",type:vn,value:{name:b,data:U}},this.parentOrigin)}}class an{static debug=!1;container;parent;frame;child;childOrigin;url;model;static Model;constructor(b){this.container=b.container,this.url=b.url,this.parent=window,this.frame=document.createElement("iframe"),b.id&&(this.frame.id=b.id),b.name&&(this.frame.name=b.name),this.frame.classList.add.apply(this.frame.classList,b.classListArray||[]),this.container.appendChild(this.frame),this.child=this.frame.contentWindow,this.model=b.model||{}}sendHandshake(b){const U=(ge=>{const n=document.createElement("a");n.href=ge;const i=n.protocol.length>4?n.protocol:window.location.protocol,o=n.host.length?n.port==="80"||n.port==="443"?n.hostname:n.host:window.location.host;return n.origin||`${i}//${o}`})(b=b||this.url);let ne,ye=0;return new Promise((ge,n)=>{const i=s=>!!Ln(s,U)&&(s.data.postmate==="handshake-reply"?(clearInterval(ne),this.parent.removeEventListener("message",i,!1),this.childOrigin=s.origin,ge(new yr(this))):n("Failed handshake"));this.parent.addEventListener("message",i,!1);const o=()=>{ye++,this.child.postMessage({postmate:"handshake",type:vn,model:this.model},U),ye===5&&clearInterval(ne)};this.frame.addEventListener("load",()=>{o(),ne=setInterval(o,500)}),this.frame.src=b})}}class Qe{child;model;parent;parentOrigin;constructor(b){this.child=window,this.model=b,this.parent=this.child.parent}sendHandshakeReply(){return new Promise((b,U)=>{const ne=ye=>{if(ye.data.postmate){if(ye.data.postmate==="handshake"){this.child.removeEventListener("message",ne,!1),ye.source.postMessage({postmate:"handshake-reply",type:vn},ye.origin),this.parentOrigin=ye.origin;const ge=ye.data.model;return ge&&Object.keys(ge).forEach(n=>{this.model[n]=ge[n]}),b(new Lr(this))}return U("Handshake Reply Failed")}};this.child.addEventListener("message",ne,!1)})}}var Xn=v(729),Nn=v.n(Xn);const{importHTML:On,createSandboxContainer:Wn}=window.QSandbox||{};function er(M,b){return M.startsWith("http")?fetch(M,b):(M=M.replace("file://",""),new Promise(async(U,ne)=>{try{const ye=await window.apis.doAction(["readFile",M]);U({text:()=>ye})}catch(ye){console.error(ye),ne(ye)}}))}class tr extends Nn(){_pluginLocal;_frame;_root;_loaded=!1;_unmountFns=[];constructor(b){super(),this._pluginLocal=b,b._dispose(()=>{this._unmount()})}async load(){const{name:b,entry:U}=this._pluginLocal.options;if(this.loaded||!U)return;const{template:ne,execScripts:ye}=await On(U,{fetch:er});this._mount(ne,document.body);const ge=Wn(b,{elementGetter:()=>this._root?.firstChild}).instance.proxy;ge.__shadow_mode__=!0,ge.LSPluginLocal=this._pluginLocal,ge.LSPluginShadow=this,ge.LSPluginUser=ge.logseq=new st(this._pluginLocal.toJSON(),this._pluginLocal.caller);const n=await ye(ge,!0);this._unmountFns.push(n.unmount),this._loaded=!0}_mount(b,U){const ne=this._frame=document.createElement("div");ne.classList.add("lsp-shadow-sandbox"),ne.id=this._pluginLocal.id,this._root=ne.attachShadow({mode:"open"}),this._root.innerHTML=`<div>${b}</div>`,U.appendChild(ne),this.emit("mounted")}_unmount(){for(const b of this._unmountFns)b&&b.call(null)}destroy(){this.frame?.parentNode?.removeChild(this.frame)}get loaded(){return this._loaded}get document(){return this._root?.firstChild}get frame(){return this._frame}}const Xt=mn()("LSPlugin:caller"),sn="#await#response#",Un="#lspmsg#error#",en=M=>`#lspmsg#${M}`;class ln extends Nn(){_pluginLocal;_connected=!1;_parent;_child;_shadow;_status;_userModel={};_call;_callUserModel;_debugTag="";constructor(b){super(),this._pluginLocal=b,b&&(this._debugTag=b.debugTag)}async connectToChild(){if(this._connected)return;const{shadow:b}=this._pluginLocal;b?await this._setupShadowSandbox():await this._setupIframeSandbox()}async connectToParent(b={}){if(this._connected)return;const U=this,ne=this._pluginLocal!=null;let ye=0;const ge=new Map,n=Tn(5e3),i=this._extendUserModel({"#lspmsg#ready#":async s=>{i[en(s?.pid)]=({type:u,payload:c})=>{Xt(`[call from host (_call)] ${this._debugTag}`,u,c),U.emit(u,c)},await n.resolve()},"#lspmsg#beforeunload#":async s=>{const u=Tn(1e4);U.emit("beforeunload",Object.assign({actor:u},s)),await u.promise},"#lspmsg#settings#":async({type:s,payload:u})=>{U.emit("settings:changed",u)},"#lspmsg#":async({ns:s,type:u,payload:c})=>{Xt(`[call from host (async)] ${this._debugTag}`,s,u,c),s&&s.startsWith("hook")?U.emit(`${s}:${u}`,c):U.emit(u,c)},"#lspmsg#reply#":({_sync:s,result:u})=>{if(Xt(`[sync reply] #${s}`,u),ge.has(s)){const c=ge.get(s);c&&(u?.hasOwnProperty(Un)?c.reject(u[Un]):c.resolve(u),ge.delete(s))}},...b});if(ne)return await n.promise,JSON.parse(JSON.stringify(this._pluginLocal?.toJSON()));const o=new Qe(i).sendHandshakeReply();return this._status="pending",await o.then(s=>{this._child=s,this._connected=!0,this._call=async(u,c={},C)=>{if(C){const D=++ye;ge.set(D,C),c._sync=D,C.setTag(`async call #${D}`),Xt("async call #",D)}return s.emit(en(i.baseInfo.id),{type:u,payload:c}),C?.promise},this._callUserModel=async(u,c)=>{try{i[u](c)}catch{Xt(`[model method] #${u} not existed`)}},setInterval(()=>{if(ge.size>100)for(const[u,c]of ge)c.settled&&ge.delete(u)},18e5)}).finally(()=>{this._status=void 0}),await n.promise,i.baseInfo}async call(b,U={}){return this._call?.call(this,b,U)}async callAsync(b,U={}){const ne=Tn(1e4);return this._call?.call(this,b,U,ne)}async callUserModel(b,U={}){return this._callUserModel?.call(this,b,U)}async _setupIframeSandbox(){const b=this._pluginLocal,U=b.id,ne=new URL(b.options.entry);ne.searchParams.set("__v__",b.options.version);const ye=document.querySelector(`#${U}`);ye&&ye.parentElement.removeChild(ye);const ge=document.createElement("div");ge.classList.add("lsp-iframe-sandbox-container"),ge.id=U;try{const o=(await this._pluginLocal._loadLayoutsData())?.$$0;if(o){ge.dataset.inited_layout="true";const{width:s,height:u,left:c,top:C}=o;Object.assign(ge.style,{width:s+"px",height:u+"px",left:c+"px",top:C+"px"})}}catch(o){console.error("[Restore Layout Error]",o)}document.body.appendChild(ge);let n,i=new an({id:U+"_iframe",container:ge,url:ne.href,classListArray:["lsp-iframe-sandbox"],model:{baseInfo:JSON.parse(JSON.stringify(b.toJSON()))}}).sendHandshake();return this._status="pending",new Promise((o,s)=>{n=setTimeout(()=>{s(new Error("handshake Timeout"))},3e3),i.then(u=>{this._parent=u,this._connected=!0,this.emit("connected"),u.on(en(b.id),({type:c,payload:C})=>{Xt("[call from plugin] ",c,C),this._pluginLocal?.emit(c,C||{})}),this._call=async(...c)=>{await u.call(en(b.id),{type:c[0],payload:Object.assign(c[1]||{},{$$pid:b.id})})},this._callUserModel=async(c,C)=>{if(c.startsWith(sn))return await u.get(c.replace(sn,""));u.call(c,C)},o(null)}).catch(u=>{s(u)}).finally(()=>{clearTimeout(n)})}).catch(o=>{throw Xt("[iframe sandbox] error",o),o}).finally(()=>{this._status=void 0})}async _setupShadowSandbox(){const b=this._pluginLocal,U=this._shadow=new tr(b);try{this._status="pending",await U.load(),this._connected=!0,this.emit("connected"),this._call=async(ne,ye={},ge)=>(ge&&(ye.actor=ge),this._pluginLocal?.emit(ne,Object.assign(ye,{$$pid:b.id})),ge?.promise),this._callUserModel=async(...ne)=>{let ye=ne[0];ye?.startsWith(sn)&&(ye=ye.replace(sn,""));const ge=ne[1]||{},n=this._userModel[ye];typeof n=="function"&&await n.call(null,ge)}}catch(ne){throw Xt("[shadow sandbox] error",ne),ne}finally{this._status=void 0}}_extendUserModel(b){return Object.assign(this._userModel,b)}_getSandboxIframeContainer(){return this._parent?.frame.parentNode}_getSandboxShadowContainer(){return this._shadow?.frame.parentNode}_getSandboxIframeRoot(){return this._parent?.frame}_getSandboxShadowRoot(){return this._shadow?.frame}set debugTag(b){this._debugTag=b}async destroy(){let b=null;this._parent&&(b=this._getSandboxIframeContainer(),await this._parent.destroy()),this._shadow&&(b=this._getSandboxShadowContainer(),this._shadow.destroy()),b?.parentNode.removeChild(b)}}var In=function(){return(In=Object.assign||function(M){for(var b,U=1,ne=arguments.length;U<ne;U++)for(var ye in b=arguments[U])Object.prototype.hasOwnProperty.call(b,ye)&&(M[ye]=b[ye]);return M}).apply(this,arguments)};function Nr(M){return M.toLowerCase()}var _r=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],Or=/[^A-Z0-9]+/gi;function yn(M,b,U){return b instanceof RegExp?M.replace(b,U):b.reduce(function(ne,ye){return ne.replace(ye,U)},M)}class Rt{ctx;constructor(b){this.ctx=b}get ctxId(){return this.ctx.baseInfo.id}setItem(b,U){return this.ctx.caller.callAsync("api:call",{method:"write-plugin-storage-file",args:[this.ctxId,b,U]})}getItem(b){return this.ctx.caller.callAsync("api:call",{method:"read-plugin-storage-file",args:[this.ctxId,b]})}removeItem(b){return this.ctx.caller.call("api:call",{method:"unlink-plugin-storage-file",args:[this.ctxId,b]})}clear(){return this.ctx.caller.call("api:call",{method:"clear-plugin-storage-files",args:[this.ctxId]})}hasItem(b){return this.ctx.caller.callAsync("api:call",{method:"exist-plugin-storage-file",args:[this.ctxId,b]})}}const Gr=Symbol.for("proxy-continue"),jn=mn()("LSPlugin:user");function Hn(M,b,U){if(typeof U!="function")return!1;const{key:ne,label:ye,desc:ge,palette:n,keybinding:i}=b,o=`SimpleCommandHook${ne}${++ee}`;this.Editor["on"+o](U),this.caller?.call("api:call",{method:"register-plugin-simple-command",args:[this.baseInfo.id,[{key:ne,label:ye,type:M,desc:ge,keybinding:i},["editor/hook",o]],n]})}const Jr={registerCommand:Hn,registerCommandPalette(M,b){const{key:U,label:ne,keybinding:ye}=M;return Hn.call(this,"global-palette-command",{key:U,label:ne,palette:!0,keybinding:ye},b)},registerUIItem(M,b){const U=this.baseInfo.id;this.caller?.call("api:call",{method:"register-plugin-ui-item",args:[U,M,b]})},registerPageMenuItem(M,b){if(typeof b!="function")return!1;const U=M+"_"+this.baseInfo.id,ne=M;Hn.call(this,"page-menu-item",{key:U,label:ne},b)},setFullScreen(M){const b=(...U)=>this._callWin("setFullScreen",...U);M==="toggle"?this._callWin("isFullScreen").then(U=>{U?b():b(!0)}):M?b(!0):b()}};let ee=0;const Ie={registerSlashCommand(M,b){jn("Register slash command #",this.baseInfo.id,M,b),typeof b=="function"&&(b=[["editor/clear-current-slash",!1],["editor/restore-saved-cursor"],["editor/hook",b]]),b=b.map(U=>{const[ne,...ye]=U;switch(ne){case"editor/hook":let ge=ye[0],n=()=>{this.caller?.callUserModel(ge)};typeof ge=="function"&&(n=ge);const i=`SlashCommandHook${ne}${++ee}`;U[1]=i,this.Editor["on"+i](n)}return U}),this.caller?.call("api:call",{method:"register-plugin-slash-command",args:[this.baseInfo.id,[M,b]]})},registerBlockContextMenuItem(M,b){if(typeof b!="function")return!1;const U=M+"_"+this.baseInfo.id,ne=M;Hn.call(this,"block-context-menu-item",{key:U,label:ne},b)},scrollToBlockInPage(M,b){const U="block-content-"+b;this.App.pushState("page",{name:M},{anchor:U})}},Te={};class st extends Nn(){_baseInfo;_caller;_settingsSchema;_connected=!1;_ui=new Map;_fileStorage;_beforeunloadCallback;constructor(b,U){super(),this._baseInfo=b,this._caller=U,U.on("sys:ui:visible",ne=>{ne?.toggle&&this.toggleMainUI()}),U.on("settings:changed",ne=>{const ye=Object.assign({},this.settings),ge=Object.assign(this._baseInfo.settings,ne);this.emit("settings:changed",{...ge},ye)}),U.on("beforeunload",async ne=>{const{actor:ye,...ge}=ne,n=this._beforeunloadCallback;try{n&&await n(ge),ye?.resolve(null)}catch(i){console.debug(`${U.debugTag} [beforeunload] `,i),ye?.reject(i)}}),this._fileStorage=new Rt(this)}async ready(b,U){if(!this._connected)try{typeof b=="function"&&(U=b,b={});let ne=await this._caller.connectToParent(b);this._connected=!0,ne=mr(this._baseInfo,ne),this._settingsSchema&&(ne.settings=function(ye,ge){const n=(ge||[]).reduce((i,o)=>("default"in o&&(i[o.key]=o.default),i),{});return Object.assign(n,ye)}(ne.settings,this._settingsSchema),await this.useSettingsSchema(this._settingsSchema)),ne?.id&&(this._caller.debugTag=`#${ne.id} [${ne.name}]`),U&&U.call(this,ne)}catch(ne){console.error("[LSPlugin Ready Error]",ne)}}ensureConnected(){if(!this._connected)throw new Error("not connected")}beforeunload(b){typeof b=="function"&&(this._beforeunloadCallback=b)}provideModel(b){return this.caller._extendUserModel(b),this}provideTheme(b){return this.caller.call("provider:theme",b),this}provideStyle(b){return this.caller.call("provider:style",b),this}provideUI(b){return this.caller.call("provider:ui",b),this}useSettingsSchema(b){return this.connected&&this.caller.call("settings:schema",{schema:b,isSync:!0}),this._settingsSchema=b,this}updateSettings(b){this.caller.call("settings:update",b)}onSettingsChanged(b){const U="settings:changed";return this.on(U,b),()=>this.off(U,b)}showSettingsUI(){this.caller.call("settings:visible:changed",{visible:!0})}hideSettingsUI(){this.caller.call("settings:visible:changed",{visible:!1})}setMainUIAttrs(b){this.caller.call("main-ui:attrs",b)}setMainUIInlineStyle(b){this.caller.call("main-ui:style",b)}hideMainUI(b){const U={key:0,visible:!1,cursor:b?.restoreEditingCursor};this.caller.call("main-ui:visible",U),this.emit("ui:visible:changed",U),this._ui.set(U.key,U)}showMainUI(b){const U={key:0,visible:!0,autoFocus:b?.autoFocus};this.caller.call("main-ui:visible",U),this.emit("ui:visible:changed",U),this._ui.set(U.key,U)}toggleMainUI(){const b=this._ui.get(0);b&&b.visible?this.hideMainUI():this.showMainUI()}get isMainUIVisible(){const b=this._ui.get(0);return Boolean(b&&b.visible)}get connected(){return this._connected}get baseInfo(){return this._baseInfo}get settings(){return this.baseInfo?.settings}get caller(){return this._caller}resolveResourceFullUrl(b){if(this.ensureConnected(),b)return b=b.replace(/^[.\\/]+/,""),function(U,...ne){try{const ye=new URL(U);if(!ye.origin)throw new Error(null);const ge=kn.join(U.substr(ye.origin.length),...ne);return ye.origin+ge}catch{return kn.join(U,...ne)}}(this._baseInfo.lsr,b)}_makeUserProxy(b,U){const ne=this,ye=this.caller;return new Proxy(b,{get(ge,n,i){const o=ge[n];return function(...s){if(!o||o.apply(ne,s)===Gr){if(U){const C=n.toString().match(/^(once|off|on)/i);if(C!=null){const D=C[0].toLowerCase(),$=C.input.slice(D.length),V=`hook:${U}:${u=$,c===void 0&&(c={}),function(ce,de){return de===void 0&&(de={}),function(ue,ve){ve===void 0&&(ve={});for(var Re=ve.splitRegexp,Ce=Re===void 0?_r:Re,We=ve.stripRegexp,qe=We===void 0?Or:We,je=ve.transform,rt=je===void 0?Nr:je,lt=ve.delimiter,kt=lt===void 0?" ":lt,ut=yn(yn(ue,Ce,"$1\0$2"),qe,"\0"),ct=0,Ge=ut.length;ut.charAt(ct)==="\0";)ct++;for(;ut.charAt(Ge-1)==="\0";)Ge--;return ut.slice(ct,Ge).split("\0").map(rt).join(kt)}(ce,In({delimiter:"."},de))}(u,In({delimiter:"_"},c))}`,G=s[0];return ye[D](V,G),D!=="off"?()=>ye.off(V,G):void 0}}var u,c;return ye.callAsync("api:call",{tag:U,method:n,args:s})}}}})}_callWin(...b){return this._caller.callAsync("api:call",{method:"_callMainWin",args:b})}get App(){return this._makeUserProxy(Jr,"app")}get Editor(){return this._makeUserProxy(Ie,"editor")}get DB(){return this._makeUserProxy(Te)}get FileStorage(){return this._fileStorage}}function pt(M,b){return new st(M,b)}if(window.__LSP__HOST__==null){const M=new ln(null);window.logseq=pt({},M)}})(),S})()})})(lsplugin_user,lsplugin_user.exports);var isVue2=!1;/*!
  * pinia v2.0.11
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */let activePinia;const setActivePinia=f=>activePinia=f,piniaSymbol=Symbol();function isPlainObject(f){return f&&typeof f=="object"&&Object.prototype.toString.call(f)==="[object Object]"&&typeof f.toJSON!="function"}var MutationType;(function(f){f.direct="direct",f.patchObject="patch object",f.patchFunction="patch function"})(MutationType||(MutationType={}));function createPinia(){const f=effectScope(!0),g=f.run(()=>ref({}));let a=[],d=[];const v=markRaw({install(S){setActivePinia(v),v._a=S,S.provide(piniaSymbol,v),S.config.globalProperties.$pinia=v,d.forEach(L=>a.push(L)),d=[]},use(S){return!this._a&&!isVue2?d.push(S):a.push(S),this},_p:a,_a:null,_e:f,_s:new Map,state:g});return v}const noop=()=>{};function addSubscription(f,g,a,d=noop){f.push(g);const v=()=>{const S=f.indexOf(g);S>-1&&(f.splice(S,1),d())};return!a&&getCurrentInstance()&&onUnmounted(v),v}function triggerSubscriptions(f,...g){f.slice().forEach(a=>{a(...g)})}function mergeReactiveObjects(f,g){for(const a in g){const d=g[a],v=f[a];isPlainObject(v)&&isPlainObject(d)&&!isRef(d)&&!isReactive(d)?f[a]=mergeReactiveObjects(v,d):f[a]=d}return f}const skipHydrateSymbol=Symbol();function shouldHydrate(f){return!isPlainObject(f)||!f.hasOwnProperty(skipHydrateSymbol)}const{assign}=Object;function isComputed(f){return!!(isRef(f)&&f.effect)}function createOptionsStore(f,g,a,d){const{state:v,actions:S,getters:L}=g,E=a.state.value[f];let P;function K(){E||(a.state.value[f]=v?v():{});const W=toRefs(a.state.value[f]);return assign(W,S,Object.keys(L||{}).reduce((Q,F)=>(Q[F]=markRaw(computed(()=>{setActivePinia(a);const q=a._s.get(f);return L[F].call(q,q)})),Q),{}))}return P=createSetupStore(f,K,g,a),P.$reset=function(){const Q=v?v():{};this.$patch(F=>{assign(F,Q)})},P}function createSetupStore(f,g,a={},d,v){let S;const L=a.state,E=assign({actions:{}},a),P={deep:!0};let K,W,Q=markRaw([]),F=markRaw([]),q;const H=d.state.value[f];!L&&!H&&(d.state.value[f]={}),ref({});function te(_){let h;K=W=!1,typeof _=="function"?(_(d.state.value[f]),h={type:MutationType.patchFunction,storeId:f,events:q}):(mergeReactiveObjects(d.state.value[f],_),h={type:MutationType.patchObject,payload:_,storeId:f,events:q}),nextTick().then(()=>{K=!0}),W=!0,triggerSubscriptions(Q,h,d.state.value[f])}const B=noop;function O(){S.stop(),Q=[],F=[],d._s.delete(f)}function k(_,h){return function(){setActivePinia(d);const y=Array.from(arguments),I=[],J=[];function Z(pe){I.push(pe)}function ae(pe){J.push(pe)}triggerSubscriptions(F,{args:y,name:_,store:N,after:Z,onError:ae});let se;try{se=h.apply(this&&this.$id===f?this:N,y)}catch(pe){throw triggerSubscriptions(J,pe),pe}return se instanceof Promise?se.then(pe=>(triggerSubscriptions(I,pe),pe)).catch(pe=>(triggerSubscriptions(J,pe),Promise.reject(pe))):(triggerSubscriptions(I,se),se)}}const w={_p:d,$id:f,$onAction:addSubscription.bind(null,F),$patch:te,$reset:B,$subscribe(_,h={}){const y=addSubscription(Q,_,h.detached,()=>I()),I=S.run(()=>watch(()=>d.state.value[f],J=>{(h.flush==="sync"?W:K)&&_({storeId:f,type:MutationType.direct,events:q},J)},assign({},P,h)));return y},$dispose:O},N=reactive(assign({},w));d._s.set(f,N);const R=d._e.run(()=>(S=effectScope(),S.run(()=>g())));for(const _ in R){const h=R[_];if(isRef(h)&&!isComputed(h)||isReactive(h))L||(H&&shouldHydrate(h)&&(isRef(h)?h.value=H[_]:mergeReactiveObjects(h,H[_])),d.state.value[f][_]=h);else if(typeof h=="function"){const y=k(_,h);R[_]=y,E.actions[_]=h}}return assign(N,R),assign(toRaw(N),R),Object.defineProperty(N,"$state",{get:()=>d.state.value[f],set:_=>{te(h=>{assign(h,_)})}}),d._p.forEach(_=>{assign(N,S.run(()=>_({store:N,app:d._a,pinia:d,options:E})))}),H&&L&&a.hydrate&&a.hydrate(N.$state,H),K=!0,W=!0,N}function defineStore(f,g,a){let d,v;const S=typeof g=="function";typeof f=="string"?(d=f,v=S?a:g):(v=f,d=f.id);function L(E,P){const K=getCurrentInstance();return E=E||K&&inject(piniaSymbol),E&&setActivePinia(E),E=activePinia,E._s.has(d)||(S?createSetupStore(d,g,v,E):createOptionsStore(d,v,E)),E._s.get(d)}return L.$id=d,L}const version$1="0.0.3",useHelpStore=defineStore("help",{state:()=>({version:version$1,visible:!1,bordered:!1,segmented:!1,size:"huge",preset:"card",transformOrigin:"center",bodyStyle:{width:"600px"}}),actions:{open(){this.visible=!0}}}),_hoisted_1$3={class:"font-bold"},_hoisted_2$2=createTextVNode(" Logseq VIM Editor "),_hoisted_3$2={class:"text-gray-500 text-xs mr-2"},_hoisted_4$1=createBaseVNode("a",{href:"https://github.com/vipzhicheng/logseq-plugin-vim-editor",target:"_blank"},[createBaseVNode("svg",{t:"1645855006893",class:"icon inline-block",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2750",width:"16",height:"16"},[createBaseVNode("path",{d:"M512 42.666667A464.64 464.64 0 0 0 42.666667 502.186667 460.373333 460.373333 0 0 0 363.52 938.666667c23.466667 4.266667 32-9.813333 32-22.186667v-78.08c-130.56 27.733333-158.293333-61.44-158.293333-61.44a122.026667 122.026667 0 0 0-52.053334-67.413333c-42.666667-28.16 3.413333-27.733333 3.413334-27.733334a98.56 98.56 0 0 1 71.68 47.36 101.12 101.12 0 0 0 136.533333 37.973334 99.413333 99.413333 0 0 1 29.866667-61.44c-104.106667-11.52-213.333333-50.773333-213.333334-226.986667a177.066667 177.066667 0 0 1 47.36-124.16 161.28 161.28 0 0 1 4.693334-121.173333s39.68-12.373333 128 46.933333a455.68 455.68 0 0 1 234.666666 0c89.6-59.306667 128-46.933333 128-46.933333a161.28 161.28 0 0 1 4.693334 121.173333A177.066667 177.066667 0 0 1 810.666667 477.866667c0 176.64-110.08 215.466667-213.333334 226.986666a106.666667 106.666667 0 0 1 32 85.333334v125.866666c0 14.933333 8.533333 26.88 32 22.186667A460.8 460.8 0 0 0 981.333333 502.186667 464.64 464.64 0 0 0 512 42.666667","p-id":"2751"})])],-1),_hoisted_5$1=createBaseVNode("div",{class:"flex flex-col gap-4"},[createBaseVNode("p",null," Logseq VIM Editor is a tool to help you editing Logseq blocks in a VIM Editor, you can edit one block or select more blocks to edit. "),createBaseVNode("p",null,[createBaseVNode("span",{class:"text-red-500 font-bold"},"Note"),createTextVNode(": If you use multiple blocks editing mode, do not change block ids on the above, and the order maybe different, and hierarchy of blocks will be flattened. You may not need to choose too many blocks to edit at a time. ")]),createBaseVNode("p",{class:"text-gray-400 text-sm"},[createTextVNode(" If you like this plugin and would like to support me to keep working on this plugin, you can "),createBaseVNode("a",{class:"font-bold text-gray-600",href:"https://www.buymeacoffee.com/vipzhicheng",target:"_blank"},"buy me a coffee"),createTextVNode(", that would be very kind and appreciated! ")])],-1),_sfc_main$3=defineComponent({setup(f){const g=useHelpStore();return(a,d)=>{const v=__unplugin_components_0;return openBlock(),createBlock(v,{show:unref(g).visible,"onUpdate:show":d[0]||(d[0]=S=>unref(g).visible=S),preset:unref(g).preset,style:normalizeStyle(unref(g).bodyStyle),size:unref(g).size,bordered:unref(g).bordered,segmented:unref(g).segmented,"transform-origin":unref(g).transformOrigin,"auto-focus":!1},{header:withCtx(()=>[createBaseVNode("div",_hoisted_1$3,[_hoisted_2$2,createBaseVNode("span",_hoisted_3$2,"v"+toDisplayString(unref(g).version),1),_hoisted_4$1])]),default:withCtx(()=>[_hoisted_5$1]),_:1},8,["show","preset","style","size","bordered","segmented","transform-origin"])}}}),useTitleBarStore=defineStore("titleBar",{state:()=>({title:"",mode:""}),actions:{setTitle(f){this.title=f},setMode(f){this.mode=f}}});var lib$1={},point={};Object.defineProperty(point,"__esModule",{value:!0});point.Point=void 0;class Point{constructor(g,a){this.row=g,this.column=a}equals(g){return this.row===g.row&&this.column===g.column}}point.Point=Point;var range$1={};Object.defineProperty(range$1,"__esModule",{value:!0});range$1.Range=void 0;class Range$1{constructor(g,a){this.start=g,this.end=a}}range$1.Range=Range$1;var focus={};Object.defineProperty(focus,"__esModule",{value:!0});focus.Focus=void 0;class Focus{constructor(g,a,d){this.row=g,this.column=a,this.offset=d}posEquals(g){return this.row===g.row&&this.column===g.column}setRow(g){return new Focus(g,this.column,this.offset)}setColumn(g){return new Focus(this.row,g,this.offset)}setOffset(g){return new Focus(this.row,this.column,g)}}focus.Focus=Focus;var alignment={};(function(f){Object.defineProperty(f,"__esModule",{value:!0}),f.HeaderAlignment=f.DefaultAlignment=f.Alignment=void 0,function(g){g.NONE="none",g.LEFT="left",g.RIGHT="right",g.CENTER="center"}(f.Alignment||(f.Alignment={})),function(g){g.LEFT="left",g.RIGHT="right",g.CENTER="center"}(f.DefaultAlignment||(f.DefaultAlignment={})),function(g){g.FOLLOW="follow",g.LEFT="left",g.RIGHT="right",g.CENTER="center"}(f.HeaderAlignment||(f.HeaderAlignment={}))})(alignment);var tableCell={};Object.defineProperty(tableCell,"__esModule",{value:!0});tableCell.TableCell=void 0;const alignment_1=alignment;class TableCell{constructor(g){this.rawContent=g,this.content=g.trim(),this.paddingLeft=this.content===""?this.rawContent===""?0:1:this.rawContent.length-this.rawContent.trimLeft().length,this.paddingRight=this.rawContent.length-this.content.length-this.paddingLeft}toText(){return this.rawContent}isDelimiter(){return/^\s*:?-+:?\s*$/.test(this.rawContent)}getAlignment(){if(!!this.isDelimiter())return this.content[0]===":"?this.content[this.content.length-1]===":"?alignment_1.Alignment.CENTER:alignment_1.Alignment.LEFT:this.content[this.content.length-1]===":"?alignment_1.Alignment.RIGHT:alignment_1.Alignment.NONE}computeContentOffset(g){return this.content===""||g<this.paddingLeft?0:g<this.paddingLeft+this.content.length?g-this.paddingLeft:this.content.length}computeRawOffset(g){return g+this.paddingLeft}}tableCell.TableCell=TableCell;var tableRow={};Object.defineProperty(tableRow,"__esModule",{value:!0});tableRow.TableRow=void 0;const table_cell_1=tableCell;class TableRow{constructor(g,a,d){this._cells=g.slice(),this.marginLeft=a,this.marginRight=d}getWidth(){return this._cells.length}getCells(){return this._cells.slice()}getCellAt(g){return this._cells[g]}setCellAt(g,a){const d=this.getCells();return d[g]=new table_cell_1.TableCell(a),new TableRow(d,this.marginLeft,this.marginRight)}toText(){if(this._cells.length===0)return this.marginLeft;const g=this._cells.map(a=>a.toText()).join("|");return`${this.marginLeft}|${g}|${this.marginRight}`}isDelimiter(){return this._cells.every(g=>g.isDelimiter())}}tableRow.TableRow=TableRow;var table={},calc={},neverthrow={};(function(f){Object.defineProperty(f,"__esModule",{value:!0}),f.Err=f.Ok=f.err=f.ok=void 0;const g=S=>new d(S);f.ok=g;const a=S=>new v(S);f.err=a;class d{constructor(L){this.value=L,this.match=(E,P)=>E(this.value)}isOk(){return!0}isErr(){return!this.isOk()}map(L){return f.ok(L(this.value))}mapErr(L){return f.ok(this.value)}andThen(L){return L(this.value)}unwrapOr(L){return this.value}_unsafeUnwrap(){return this.value}_unsafeUnwrapErr(){throw new Error("Called `_unsafeUnwrapErr` on an Ok")}}f.Ok=d;class v{constructor(L){this.error=L,this.match=(E,P)=>P(this.error)}isOk(){return!1}isErr(){return!this.isOk()}map(L){return f.err(this.error)}mapErr(L){return f.err(L(this.error))}andThen(L){return f.err(this.error)}unwrapOr(L){return L}_unsafeUnwrap(){throw new Error("Called `_unsafeUnwrap` on an Err")}_unsafeUnwrapErr(){return this.error}}f.Err=v})(neverthrow);var algebraic_operation={},ast_utils={};(function(f){Object.defineProperty(f,"__esModule",{value:!0}),f.prettyPrintAST=f.checkChildLength=f.checkType=f.errRelativeReferenceIndex=f.errIndex0=void 0,f.errIndex0=new Error("Index 0 used to create a reference"),f.errRelativeReferenceIndex=new Error("Can not use relative reference where absolute reference is required");const g=(v,...S)=>{if(!(S.indexOf(v.type)>=0))return new Error(`Formula element '${v.text}' is a ${v.type} but expected one of ${S} in this position.`)};f.checkType=g;const a=(v,S)=>{if(v.children.length!==S)return new Error(`Formula element '${v.text}' was expected to have ${S} elements, but had ${v.children.length}`)};f.checkChildLength=a;const d=(v,S=0)=>{console.log("  ".repeat(S)+`|-${v.type}${v.children.length===0?"="+v.text:""}`),v.children&&v.children.forEach(L=>{f.prettyPrintAST(L,S+1)})};f.prettyPrintAST=d})(ast_utils);var results={},lodash={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(f,g){(function(){var a,d="4.17.20",v=200,S="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",L="Expected a function",E="__lodash_hash_undefined__",P=500,K="__lodash_placeholder__",W=1,Q=2,F=4,q=1,H=2,te=1,B=2,O=4,k=8,w=16,N=32,R=64,_=128,h=256,y=512,I=30,J="...",Z=800,ae=16,se=1,pe=2,X=3,he=1/0,oe=9007199254740991,Ee=17976931348623157e292,le=0/0,be=4294967295,Fe=be-1,z=be>>>1,x=[["ary",_],["bind",te],["bindKey",B],["curry",k],["curryRight",w],["flip",y],["partial",N],["partialRight",R],["rearg",h]],Se="[object Arguments]",Me="[object Array]",De="[object AsyncFunction]",Ve="[object Boolean]",Ae="[object Date]",Bt="[object DOMException]",gt="[object Error]",Xe="[object Function]",Ue="[object GeneratorFunction]",Be="[object Map]",ht="[object Number]",Zt="[object Null]",ot="[object Object]",Ot="[object Promise]",Lt="[object Proxy]",Ne="[object RegExp]",Oe="[object Set]",ke="[object String]",et="[object Symbol]",yt="[object Undefined]",Kt="[object WeakMap]",jr="[object WeakSet]",At="[object ArrayBuffer]",nn="[object DataView]",St="[object Float32Array]",gn="[object Float64Array]",ar="[object Int8Array]",sr="[object Int16Array]",lr="[object Int32Array]",_t="[object Uint8Array]",Pt="[object Uint8ClampedArray]",dt="[object Uint16Array]",Wt="[object Uint32Array]",fn=/\b__p \+= '';/g,Cr=/\b(__p \+=) '' \+/g,Ct=/(__e\(.*?\)|\b__t\)) \+\n'';/g,An=/&(?:amp|lt|gt|quot|#39);/g,rn=/[&<>"']/g,Hr=RegExp(An.source),Zn=RegExp(rn.source),Qn=/<%-([\s\S]+?)%>/g,ri=/<%([\s\S]+?)%>/g,zr=/<%=([\s\S]+?)%>/g,mt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,qr=/^\w*$/,Yt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Mt=/[\\^$.*+?()[\]{}|]/g,ur=RegExp(Mt.source),zt=/^\s+|\s+$/g,Ar=/^\s+/,Er=/\s+$/,on=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Yn=/\{\n\/\* \[wrapped with (.+)\] \*/,Sr=/,? & /,Nt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,kr=/\\(\\)?/g,Dt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,cr=/\w*$/,Tr=/^[-+]0x[0-9a-f]+$/i,fr=/^0b[01]+$/i,Kr=/^\[object .+?Constructor\]$/,hr=/^0o[0-7]+$/i,dr=/^(?:0|[1-9]\d*)$/,En=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,It=/($^)/,pr=/['\n\r\u2028\u2029\\]/g,Sn="\\ud800-\\udfff",Bn="\\u0300-\\u036f",gr="\\ufe20-\\ufe2f",Vr="\\u20d0-\\u20ff",kn=Bn+gr+Vr,qt="\\u2700-\\u27bf",mr="a-z\\xdf-\\xf6\\xf8-\\xff",Tn="\\xac\\xb1\\xd7\\xf7",Rn="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",mn="\\u2000-\\u206f",vn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",vr="A-Z\\xc0-\\xd6\\xd8-\\xde",Rr="\\ufe0e\\ufe0f",Ln=Tn+Rn+mn+vn,yr="['\u2019]",Lr="["+Sn+"]",an="["+Ln+"]",Qe="["+kn+"]",Xn="\\d+",Nn="["+qt+"]",On="["+mr+"]",Wn="[^"+Sn+Ln+Xn+qt+mr+vr+"]",er="\\ud83c[\\udffb-\\udfff]",tr="(?:"+Qe+"|"+er+")",Xt="[^"+Sn+"]",sn="(?:\\ud83c[\\udde6-\\uddff]){2}",Un="[\\ud800-\\udbff][\\udc00-\\udfff]",en="["+vr+"]",ln="\\u200d",In="(?:"+On+"|"+Wn+")",Nr="(?:"+en+"|"+Wn+")",_r="(?:"+yr+"(?:d|ll|m|re|s|t|ve))?",Or="(?:"+yr+"(?:D|LL|M|RE|S|T|VE))?",yn=tr+"?",Rt="["+Rr+"]?",Gr="(?:"+ln+"(?:"+[Xt,sn,Un].join("|")+")"+Rt+yn+")*",jn="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Hn="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Jr=Rt+yn+Gr,ee="(?:"+[Nn,sn,Un].join("|")+")"+Jr,Ie="(?:"+[Xt+Qe+"?",Qe,sn,Un,Lr].join("|")+")",Te=RegExp(yr,"g"),st=RegExp(Qe,"g"),pt=RegExp(er+"(?="+er+")|"+Ie+Jr,"g"),M=RegExp([en+"?"+On+"+"+_r+"(?="+[an,en,"$"].join("|")+")",Nr+"+"+Or+"(?="+[an,en+In,"$"].join("|")+")",en+"?"+In+"+"+_r,en+"+"+Or,Hn,jn,Xn,ee].join("|"),"g"),b=RegExp("["+ln+Sn+kn+Rr+"]"),U=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ne=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ye=-1,ge={};ge[St]=ge[gn]=ge[ar]=ge[sr]=ge[lr]=ge[_t]=ge[Pt]=ge[dt]=ge[Wt]=!0,ge[Se]=ge[Me]=ge[At]=ge[Ve]=ge[nn]=ge[Ae]=ge[gt]=ge[Xe]=ge[Be]=ge[ht]=ge[ot]=ge[Ne]=ge[Oe]=ge[ke]=ge[Kt]=!1;var n={};n[Se]=n[Me]=n[At]=n[nn]=n[Ve]=n[Ae]=n[St]=n[gn]=n[ar]=n[sr]=n[lr]=n[Be]=n[ht]=n[ot]=n[Ne]=n[Oe]=n[ke]=n[et]=n[_t]=n[Pt]=n[dt]=n[Wt]=!0,n[gt]=n[Xe]=n[Kt]=!1;var i={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},s={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},u={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},c=parseFloat,C=parseInt,D=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,$=typeof self=="object"&&self&&self.Object===Object&&self,V=D||$||Function("return this")(),G=g&&!g.nodeType&&g,ce=G&&!0&&f&&!f.nodeType&&f,de=ce&&ce.exports===G,ue=de&&D.process,ve=function(){try{var ie=ce&&ce.require&&ce.require("util").types;return ie||ue&&ue.binding&&ue.binding("util")}catch{}}(),Re=ve&&ve.isArrayBuffer,Ce=ve&&ve.isDate,We=ve&&ve.isMap,qe=ve&&ve.isRegExp,je=ve&&ve.isSet,rt=ve&&ve.isTypedArray;function lt(ie,me,fe){switch(fe.length){case 0:return ie.call(me);case 1:return ie.call(me,fe[0]);case 2:return ie.call(me,fe[0],fe[1]);case 3:return ie.call(me,fe[0],fe[1],fe[2])}return ie.apply(me,fe)}function kt(ie,me,fe,Pe){for(var Je=-1,wt=ie==null?0:ie.length;++Je<wt;){var Gt=ie[Je];me(Pe,Gt,fe(Gt),ie)}return Pe}function ut(ie,me){for(var fe=-1,Pe=ie==null?0:ie.length;++fe<Pe&&me(ie[fe],fe,ie)!==!1;);return ie}function ct(ie,me){for(var fe=ie==null?0:ie.length;fe--&&me(ie[fe],fe,ie)!==!1;);return ie}function Ge(ie,me){for(var fe=-1,Pe=ie==null?0:ie.length;++fe<Pe;)if(!me(ie[fe],fe,ie))return!1;return!0}function Tt(ie,me){for(var fe=-1,Pe=ie==null?0:ie.length,Je=0,wt=[];++fe<Pe;){var Gt=ie[fe];me(Gt,fe,ie)&&(wt[Je++]=Gt)}return wt}function Vt(ie,me){var fe=ie==null?0:ie.length;return!!fe&&di(ie,me,0)>-1}function Ut(ie,me,fe){for(var Pe=-1,Je=ie==null?0:ie.length;++Pe<Je;)if(fe(me,ie[Pe]))return!0;return!1}function vt(ie,me){for(var fe=-1,Pe=ie==null?0:ie.length,Je=Array(Pe);++fe<Pe;)Je[fe]=me(ie[fe],fe,ie);return Je}function _n(ie,me){for(var fe=-1,Pe=me.length,Je=ie.length;++fe<Pe;)ie[Je+fe]=me[fe];return ie}function ii(ie,me,fe,Pe){var Je=-1,wt=ie==null?0:ie.length;for(Pe&&wt&&(fe=ie[++Je]);++Je<wt;)fe=me(fe,ie[Je],Je,ie);return fe}function Cl(ie,me,fe,Pe){var Je=ie==null?0:ie.length;for(Pe&&Je&&(fe=ie[--Je]);Je--;)fe=me(fe,ie[Je],Je,ie);return fe}function So(ie,me){for(var fe=-1,Pe=ie==null?0:ie.length;++fe<Pe;)if(me(ie[fe],fe,ie))return!0;return!1}var Al=ko("length");function El(ie){return ie.split("")}function Sl(ie){return ie.match(Nt)||[]}function ka(ie,me,fe){var Pe;return fe(ie,function(Je,wt,Gt){if(me(Je,wt,Gt))return Pe=wt,!1}),Pe}function Ui(ie,me,fe,Pe){for(var Je=ie.length,wt=fe+(Pe?1:-1);Pe?wt--:++wt<Je;)if(me(ie[wt],wt,ie))return wt;return-1}function di(ie,me,fe){return me===me?$l(ie,me,fe):Ui(ie,Ta,fe)}function kl(ie,me,fe,Pe){for(var Je=fe-1,wt=ie.length;++Je<wt;)if(Pe(ie[Je],me))return Je;return-1}function Ta(ie){return ie!==ie}function Ra(ie,me){var fe=ie==null?0:ie.length;return fe?Ro(ie,me)/fe:le}function ko(ie){return function(me){return me==null?a:me[ie]}}function To(ie){return function(me){return ie==null?a:ie[me]}}function La(ie,me,fe,Pe,Je){return Je(ie,function(wt,Gt,Et){fe=Pe?(Pe=!1,wt):me(fe,wt,Gt,Et)}),fe}function Tl(ie,me){var fe=ie.length;for(ie.sort(me);fe--;)ie[fe]=ie[fe].value;return ie}function Ro(ie,me){for(var fe,Pe=-1,Je=ie.length;++Pe<Je;){var wt=me(ie[Pe]);wt!==a&&(fe=fe===a?wt:fe+wt)}return fe}function Lo(ie,me){for(var fe=-1,Pe=Array(ie);++fe<ie;)Pe[fe]=me(fe);return Pe}function Rl(ie,me){return vt(me,function(fe){return[fe,ie[fe]]})}function Fn(ie){return function(me){return ie(me)}}function No(ie,me){return vt(me,function(fe){return ie[fe]})}function Si(ie,me){return ie.has(me)}function Na(ie,me){for(var fe=-1,Pe=ie.length;++fe<Pe&&di(me,ie[fe],0)>-1;);return fe}function Oa(ie,me){for(var fe=ie.length;fe--&&di(me,ie[fe],0)>-1;);return fe}function Ll(ie,me){for(var fe=ie.length,Pe=0;fe--;)ie[fe]===me&&++Pe;return Pe}var Nl=To(i),Ol=To(o);function Il(ie){return"\\"+u[ie]}function Fl(ie,me){return ie==null?a:ie[me]}function pi(ie){return b.test(ie)}function Pl(ie){return U.test(ie)}function Ml(ie){for(var me,fe=[];!(me=ie.next()).done;)fe.push(me.value);return fe}function Oo(ie){var me=-1,fe=Array(ie.size);return ie.forEach(function(Pe,Je){fe[++me]=[Je,Pe]}),fe}function Ia(ie,me){return function(fe){return ie(me(fe))}}function Zr(ie,me){for(var fe=-1,Pe=ie.length,Je=0,wt=[];++fe<Pe;){var Gt=ie[fe];(Gt===me||Gt===K)&&(ie[fe]=K,wt[Je++]=fe)}return wt}function ji(ie){var me=-1,fe=Array(ie.size);return ie.forEach(function(Pe){fe[++me]=Pe}),fe}function Dl(ie){var me=-1,fe=Array(ie.size);return ie.forEach(function(Pe){fe[++me]=[Pe,Pe]}),fe}function $l(ie,me,fe){for(var Pe=fe-1,Je=ie.length;++Pe<Je;)if(ie[Pe]===me)return Pe;return-1}function Bl(ie,me,fe){for(var Pe=fe+1;Pe--;)if(ie[Pe]===me)return Pe;return Pe}function gi(ie){return pi(ie)?Ul(ie):Al(ie)}function nr(ie){return pi(ie)?jl(ie):El(ie)}var Wl=To(s);function Ul(ie){for(var me=pt.lastIndex=0;pt.test(ie);)++me;return me}function jl(ie){return ie.match(pt)||[]}function Hl(ie){return ie.match(M)||[]}var zl=function ie(me){me=me==null?V:mi.defaults(V.Object(),me,mi.pick(V,ne));var fe=me.Array,Pe=me.Date,Je=me.Error,wt=me.Function,Gt=me.Math,Et=me.Object,Io=me.RegExp,ql=me.String,zn=me.TypeError,Hi=fe.prototype,Kl=wt.prototype,vi=Et.prototype,zi=me["__core-js_shared__"],qi=Kl.toString,xt=vi.hasOwnProperty,Vl=0,Fa=function(){var e=/[^.]+$/.exec(zi&&zi.keys&&zi.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Ki=vi.toString,Gl=qi.call(Et),Jl=V._,Zl=Io("^"+qi.call(xt).replace(Mt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Vi=de?me.Buffer:a,Qr=me.Symbol,Gi=me.Uint8Array,Pa=Vi?Vi.allocUnsafe:a,Ji=Ia(Et.getPrototypeOf,Et),Ma=Et.create,Da=vi.propertyIsEnumerable,Zi=Hi.splice,$a=Qr?Qr.isConcatSpreadable:a,ki=Qr?Qr.iterator:a,oi=Qr?Qr.toStringTag:a,Qi=function(){try{var e=ci(Et,"defineProperty");return e({},"",{}),e}catch{}}(),Ql=me.clearTimeout!==V.clearTimeout&&me.clearTimeout,Yl=Pe&&Pe.now!==V.Date.now&&Pe.now,Xl=me.setTimeout!==V.setTimeout&&me.setTimeout,Yi=Gt.ceil,Xi=Gt.floor,Fo=Et.getOwnPropertySymbols,eu=Vi?Vi.isBuffer:a,Ba=me.isFinite,tu=Hi.join,nu=Ia(Et.keys,Et),Jt=Gt.max,un=Gt.min,ru=Pe.now,iu=me.parseInt,Wa=Gt.random,ou=Hi.reverse,Po=ci(me,"DataView"),Ti=ci(me,"Map"),Mo=ci(me,"Promise"),yi=ci(me,"Set"),Ri=ci(me,"WeakMap"),Li=ci(Et,"create"),eo=Ri&&new Ri,_i={},au=fi(Po),su=fi(Ti),lu=fi(Mo),uu=fi(yi),cu=fi(Ri),to=Qr?Qr.prototype:a,Ni=to?to.valueOf:a,Ua=to?to.toString:a;function A(e){if($t(e)&&!Ze(e)&&!(e instanceof at)){if(e instanceof qn)return e;if(xt.call(e,"__wrapped__"))return js(e)}return new qn(e)}var wi=function(){function e(){}return function(t){if(!Ft(t))return{};if(Ma)return Ma(t);e.prototype=t;var r=new e;return e.prototype=a,r}}();function no(){}function qn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=a}A.templateSettings={escape:Qn,evaluate:ri,interpolate:zr,variable:"",imports:{_:A}},A.prototype=no.prototype,A.prototype.constructor=A,qn.prototype=wi(no.prototype),qn.prototype.constructor=qn;function at(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=be,this.__views__=[]}function fu(){var e=new at(this.__wrapped__);return e.__actions__=wn(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=wn(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=wn(this.__views__),e}function hu(){if(this.__filtered__){var e=new at(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function du(){var e=this.__wrapped__.value(),t=this.__dir__,r=Ze(e),l=t<0,m=r?e.length:0,T=Ec(0,m,this.__views__),j=T.start,Y=T.end,re=Y-j,_e=l?Y:j-1,we=this.__iteratees__,xe=we.length,Le=0,$e=un(re,this.__takeCount__);if(!r||!l&&m==re&&$e==re)return fs(e,this.__actions__);var Ke=[];e:for(;re--&&Le<$e;){_e+=t;for(var tt=-1,ze=e[_e];++tt<xe;){var it=we[tt],ft=it.iteratee,Dn=it.type,pn=ft(ze);if(Dn==pe)ze=pn;else if(!pn){if(Dn==se)continue e;break e}}Ke[Le++]=ze}return Ke}at.prototype=wi(no.prototype),at.prototype.constructor=at;function ai(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var l=e[t];this.set(l[0],l[1])}}function pu(){this.__data__=Li?Li(null):{},this.size=0}function gu(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function mu(e){var t=this.__data__;if(Li){var r=t[e];return r===E?a:r}return xt.call(t,e)?t[e]:a}function vu(e){var t=this.__data__;return Li?t[e]!==a:xt.call(t,e)}function yu(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Li&&t===a?E:t,this}ai.prototype.clear=pu,ai.prototype.delete=gu,ai.prototype.get=mu,ai.prototype.has=vu,ai.prototype.set=yu;function Ir(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var l=e[t];this.set(l[0],l[1])}}function _u(){this.__data__=[],this.size=0}function wu(e){var t=this.__data__,r=ro(t,e);if(r<0)return!1;var l=t.length-1;return r==l?t.pop():Zi.call(t,r,1),--this.size,!0}function bu(e){var t=this.__data__,r=ro(t,e);return r<0?a:t[r][1]}function xu(e){return ro(this.__data__,e)>-1}function Cu(e,t){var r=this.__data__,l=ro(r,e);return l<0?(++this.size,r.push([e,t])):r[l][1]=t,this}Ir.prototype.clear=_u,Ir.prototype.delete=wu,Ir.prototype.get=bu,Ir.prototype.has=xu,Ir.prototype.set=Cu;function Fr(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var l=e[t];this.set(l[0],l[1])}}function Au(){this.size=0,this.__data__={hash:new ai,map:new(Ti||Ir),string:new ai}}function Eu(e){var t=mo(this,e).delete(e);return this.size-=t?1:0,t}function Su(e){return mo(this,e).get(e)}function ku(e){return mo(this,e).has(e)}function Tu(e,t){var r=mo(this,e),l=r.size;return r.set(e,t),this.size+=r.size==l?0:1,this}Fr.prototype.clear=Au,Fr.prototype.delete=Eu,Fr.prototype.get=Su,Fr.prototype.has=ku,Fr.prototype.set=Tu;function si(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new Fr;++t<r;)this.add(e[t])}function Ru(e){return this.__data__.set(e,E),this}function Lu(e){return this.__data__.has(e)}si.prototype.add=si.prototype.push=Ru,si.prototype.has=Lu;function rr(e){var t=this.__data__=new Ir(e);this.size=t.size}function Nu(){this.__data__=new Ir,this.size=0}function Ou(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function Iu(e){return this.__data__.get(e)}function Fu(e){return this.__data__.has(e)}function Pu(e,t){var r=this.__data__;if(r instanceof Ir){var l=r.__data__;if(!Ti||l.length<v-1)return l.push([e,t]),this.size=++r.size,this;r=this.__data__=new Fr(l)}return r.set(e,t),this.size=r.size,this}rr.prototype.clear=Nu,rr.prototype.delete=Ou,rr.prototype.get=Iu,rr.prototype.has=Fu,rr.prototype.set=Pu;function ja(e,t){var r=Ze(e),l=!r&&hi(e),m=!r&&!l&&ni(e),T=!r&&!l&&!m&&Ai(e),j=r||l||m||T,Y=j?Lo(e.length,ql):[],re=Y.length;for(var _e in e)(t||xt.call(e,_e))&&!(j&&(_e=="length"||m&&(_e=="offset"||_e=="parent")||T&&(_e=="buffer"||_e=="byteLength"||_e=="byteOffset")||$r(_e,re)))&&Y.push(_e);return Y}function Ha(e){var t=e.length;return t?e[Vo(0,t-1)]:a}function Mu(e,t){return vo(wn(e),li(t,0,e.length))}function Du(e){return vo(wn(e))}function Do(e,t,r){(r!==a&&!ir(e[t],r)||r===a&&!(t in e))&&Pr(e,t,r)}function Oi(e,t,r){var l=e[t];(!(xt.call(e,t)&&ir(l,r))||r===a&&!(t in e))&&Pr(e,t,r)}function ro(e,t){for(var r=e.length;r--;)if(ir(e[r][0],t))return r;return-1}function $u(e,t,r,l){return Yr(e,function(m,T,j){t(l,m,r(m),j)}),l}function za(e,t){return e&&br(t,Qt(t),e)}function Bu(e,t){return e&&br(t,xn(t),e)}function Pr(e,t,r){t=="__proto__"&&Qi?Qi(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function $o(e,t){for(var r=-1,l=t.length,m=fe(l),T=e==null;++r<l;)m[r]=T?a:ya(e,t[r]);return m}function li(e,t,r){return e===e&&(r!==a&&(e=e<=r?e:r),t!==a&&(e=e>=t?e:t)),e}function Kn(e,t,r,l,m,T){var j,Y=t&W,re=t&Q,_e=t&F;if(r&&(j=m?r(e,l,m,T):r(e)),j!==a)return j;if(!Ft(e))return e;var we=Ze(e);if(we){if(j=kc(e),!Y)return wn(e,j)}else{var xe=cn(e),Le=xe==Xe||xe==Ue;if(ni(e))return ps(e,Y);if(xe==ot||xe==Se||Le&&!m){if(j=re||Le?{}:Is(e),!Y)return re?mc(e,Bu(j,e)):gc(e,za(j,e))}else{if(!n[xe])return m?e:{};j=Tc(e,xe,Y)}}T||(T=new rr);var $e=T.get(e);if($e)return $e;T.set(e,j),ll(e)?e.forEach(function(ze){j.add(Kn(ze,t,r,ze,e,T))}):al(e)&&e.forEach(function(ze,it){j.set(it,Kn(ze,t,r,it,e,T))});var Ke=_e?re?ia:ra:re?xn:Qt,tt=we?a:Ke(e);return ut(tt||e,function(ze,it){tt&&(it=ze,ze=e[it]),Oi(j,it,Kn(ze,t,r,it,e,T))}),j}function Wu(e){var t=Qt(e);return function(r){return qa(r,e,t)}}function qa(e,t,r){var l=r.length;if(e==null)return!l;for(e=Et(e);l--;){var m=r[l],T=t[m],j=e[m];if(j===a&&!(m in e)||!T(j))return!1}return!0}function Ka(e,t,r){if(typeof e!="function")throw new zn(L);return Bi(function(){e.apply(a,r)},t)}function Ii(e,t,r,l){var m=-1,T=Vt,j=!0,Y=e.length,re=[],_e=t.length;if(!Y)return re;r&&(t=vt(t,Fn(r))),l?(T=Ut,j=!1):t.length>=v&&(T=Si,j=!1,t=new si(t));e:for(;++m<Y;){var we=e[m],xe=r==null?we:r(we);if(we=l||we!==0?we:0,j&&xe===xe){for(var Le=_e;Le--;)if(t[Le]===xe)continue e;re.push(we)}else T(t,xe,l)||re.push(we)}return re}var Yr=_s(wr),Va=_s(Wo,!0);function Uu(e,t){var r=!0;return Yr(e,function(l,m,T){return r=!!t(l,m,T),r}),r}function io(e,t,r){for(var l=-1,m=e.length;++l<m;){var T=e[l],j=t(T);if(j!=null&&(Y===a?j===j&&!Mn(j):r(j,Y)))var Y=j,re=T}return re}function ju(e,t,r,l){var m=e.length;for(r=Ye(r),r<0&&(r=-r>m?0:m+r),l=l===a||l>m?m:Ye(l),l<0&&(l+=m),l=r>l?0:cl(l);r<l;)e[r++]=t;return e}function Ga(e,t){var r=[];return Yr(e,function(l,m,T){t(l,m,T)&&r.push(l)}),r}function tn(e,t,r,l,m){var T=-1,j=e.length;for(r||(r=Lc),m||(m=[]);++T<j;){var Y=e[T];t>0&&r(Y)?t>1?tn(Y,t-1,r,l,m):_n(m,Y):l||(m[m.length]=Y)}return m}var Bo=ws(),Ja=ws(!0);function wr(e,t){return e&&Bo(e,t,Qt)}function Wo(e,t){return e&&Ja(e,t,Qt)}function oo(e,t){return Tt(t,function(r){return Br(e[r])})}function ui(e,t){t=ei(t,e);for(var r=0,l=t.length;e!=null&&r<l;)e=e[xr(t[r++])];return r&&r==l?e:a}function Za(e,t,r){var l=t(e);return Ze(e)?l:_n(l,r(e))}function hn(e){return e==null?e===a?yt:Zt:oi&&oi in Et(e)?Ac(e):Dc(e)}function Uo(e,t){return e>t}function Hu(e,t){return e!=null&&xt.call(e,t)}function zu(e,t){return e!=null&&t in Et(e)}function qu(e,t,r){return e>=un(t,r)&&e<Jt(t,r)}function jo(e,t,r){for(var l=r?Ut:Vt,m=e[0].length,T=e.length,j=T,Y=fe(T),re=1/0,_e=[];j--;){var we=e[j];j&&t&&(we=vt(we,Fn(t))),re=un(we.length,re),Y[j]=!r&&(t||m>=120&&we.length>=120)?new si(j&&we):a}we=e[0];var xe=-1,Le=Y[0];e:for(;++xe<m&&_e.length<re;){var $e=we[xe],Ke=t?t($e):$e;if($e=r||$e!==0?$e:0,!(Le?Si(Le,Ke):l(_e,Ke,r))){for(j=T;--j;){var tt=Y[j];if(!(tt?Si(tt,Ke):l(e[j],Ke,r)))continue e}Le&&Le.push(Ke),_e.push($e)}}return _e}function Ku(e,t,r,l){return wr(e,function(m,T,j){t(l,r(m),T,j)}),l}function Fi(e,t,r){t=ei(t,e),e=Ds(e,t);var l=e==null?e:e[xr(Gn(t))];return l==null?a:lt(l,e,r)}function Qa(e){return $t(e)&&hn(e)==Se}function Vu(e){return $t(e)&&hn(e)==At}function Gu(e){return $t(e)&&hn(e)==Ae}function Pi(e,t,r,l,m){return e===t?!0:e==null||t==null||!$t(e)&&!$t(t)?e!==e&&t!==t:Ju(e,t,r,l,Pi,m)}function Ju(e,t,r,l,m,T){var j=Ze(e),Y=Ze(t),re=j?Me:cn(e),_e=Y?Me:cn(t);re=re==Se?ot:re,_e=_e==Se?ot:_e;var we=re==ot,xe=_e==ot,Le=re==_e;if(Le&&ni(e)){if(!ni(t))return!1;j=!0,we=!1}if(Le&&!we)return T||(T=new rr),j||Ai(e)?Ls(e,t,r,l,m,T):xc(e,t,re,r,l,m,T);if(!(r&q)){var $e=we&&xt.call(e,"__wrapped__"),Ke=xe&&xt.call(t,"__wrapped__");if($e||Ke){var tt=$e?e.value():e,ze=Ke?t.value():t;return T||(T=new rr),m(tt,ze,r,l,T)}}return Le?(T||(T=new rr),Cc(e,t,r,l,m,T)):!1}function Zu(e){return $t(e)&&cn(e)==Be}function Ho(e,t,r,l){var m=r.length,T=m,j=!l;if(e==null)return!T;for(e=Et(e);m--;){var Y=r[m];if(j&&Y[2]?Y[1]!==e[Y[0]]:!(Y[0]in e))return!1}for(;++m<T;){Y=r[m];var re=Y[0],_e=e[re],we=Y[1];if(j&&Y[2]){if(_e===a&&!(re in e))return!1}else{var xe=new rr;if(l)var Le=l(_e,we,re,e,t,xe);if(!(Le===a?Pi(we,_e,q|H,l,xe):Le))return!1}}return!0}function Ya(e){if(!Ft(e)||Oc(e))return!1;var t=Br(e)?Zl:Kr;return t.test(fi(e))}function Qu(e){return $t(e)&&hn(e)==Ne}function Yu(e){return $t(e)&&cn(e)==Oe}function Xu(e){return $t(e)&&Co(e.length)&&!!ge[hn(e)]}function Xa(e){return typeof e=="function"?e:e==null?Cn:typeof e=="object"?Ze(e)?ns(e[0],e[1]):ts(e):bl(e)}function zo(e){if(!$i(e))return nu(e);var t=[];for(var r in Et(e))xt.call(e,r)&&r!="constructor"&&t.push(r);return t}function ec(e){if(!Ft(e))return Mc(e);var t=$i(e),r=[];for(var l in e)l=="constructor"&&(t||!xt.call(e,l))||r.push(l);return r}function qo(e,t){return e<t}function es(e,t){var r=-1,l=bn(e)?fe(e.length):[];return Yr(e,function(m,T,j){l[++r]=t(m,T,j)}),l}function ts(e){var t=aa(e);return t.length==1&&t[0][2]?Ps(t[0][0],t[0][1]):function(r){return r===e||Ho(r,e,t)}}function ns(e,t){return la(e)&&Fs(t)?Ps(xr(e),t):function(r){var l=ya(r,e);return l===a&&l===t?_a(r,e):Pi(t,l,q|H)}}function ao(e,t,r,l,m){e!==t&&Bo(t,function(T,j){if(m||(m=new rr),Ft(T))tc(e,t,j,r,ao,l,m);else{var Y=l?l(ca(e,j),T,j+"",e,t,m):a;Y===a&&(Y=T),Do(e,j,Y)}},xn)}function tc(e,t,r,l,m,T,j){var Y=ca(e,r),re=ca(t,r),_e=j.get(re);if(_e){Do(e,r,_e);return}var we=T?T(Y,re,r+"",e,t,j):a,xe=we===a;if(xe){var Le=Ze(re),$e=!Le&&ni(re),Ke=!Le&&!$e&&Ai(re);we=re,Le||$e||Ke?Ze(Y)?we=Y:jt(Y)?we=wn(Y):$e?(xe=!1,we=ps(re,!0)):Ke?(xe=!1,we=gs(re,!0)):we=[]:Wi(re)||hi(re)?(we=Y,hi(Y)?we=fl(Y):(!Ft(Y)||Br(Y))&&(we=Is(re))):xe=!1}xe&&(j.set(re,we),m(we,re,l,T,j),j.delete(re)),Do(e,r,we)}function rs(e,t){var r=e.length;if(!!r)return t+=t<0?r:0,$r(t,r)?e[t]:a}function is(e,t,r){t.length?t=vt(t,function(T){return Ze(T)?function(j){return ui(j,T.length===1?T[0]:T)}:T}):t=[Cn];var l=-1;t=vt(t,Fn(He()));var m=es(e,function(T,j,Y){var re=vt(t,function(_e){return _e(T)});return{criteria:re,index:++l,value:T}});return Tl(m,function(T,j){return pc(T,j,r)})}function nc(e,t){return os(e,t,function(r,l){return _a(e,l)})}function os(e,t,r){for(var l=-1,m=t.length,T={};++l<m;){var j=t[l],Y=ui(e,j);r(Y,j)&&Mi(T,ei(j,e),Y)}return T}function rc(e){return function(t){return ui(t,e)}}function Ko(e,t,r,l){var m=l?kl:di,T=-1,j=t.length,Y=e;for(e===t&&(t=wn(t)),r&&(Y=vt(e,Fn(r)));++T<j;)for(var re=0,_e=t[T],we=r?r(_e):_e;(re=m(Y,we,re,l))>-1;)Y!==e&&Zi.call(Y,re,1),Zi.call(e,re,1);return e}function as(e,t){for(var r=e?t.length:0,l=r-1;r--;){var m=t[r];if(r==l||m!==T){var T=m;$r(m)?Zi.call(e,m,1):Zo(e,m)}}return e}function Vo(e,t){return e+Xi(Wa()*(t-e+1))}function ic(e,t,r,l){for(var m=-1,T=Jt(Yi((t-e)/(r||1)),0),j=fe(T);T--;)j[l?T:++m]=e,e+=r;return j}function Go(e,t){var r="";if(!e||t<1||t>oe)return r;do t%2&&(r+=e),t=Xi(t/2),t&&(e+=e);while(t);return r}function nt(e,t){return fa(Ms(e,t,Cn),e+"")}function oc(e){return Ha(Ei(e))}function ac(e,t){var r=Ei(e);return vo(r,li(t,0,r.length))}function Mi(e,t,r,l){if(!Ft(e))return e;t=ei(t,e);for(var m=-1,T=t.length,j=T-1,Y=e;Y!=null&&++m<T;){var re=xr(t[m]),_e=r;if(re==="__proto__"||re==="constructor"||re==="prototype")return e;if(m!=j){var we=Y[re];_e=l?l(we,re,Y):a,_e===a&&(_e=Ft(we)?we:$r(t[m+1])?[]:{})}Oi(Y,re,_e),Y=Y[re]}return e}var ss=eo?function(e,t){return eo.set(e,t),e}:Cn,sc=Qi?function(e,t){return Qi(e,"toString",{configurable:!0,enumerable:!1,value:ba(t),writable:!0})}:Cn;function lc(e){return vo(Ei(e))}function Vn(e,t,r){var l=-1,m=e.length;t<0&&(t=-t>m?0:m+t),r=r>m?m:r,r<0&&(r+=m),m=t>r?0:r-t>>>0,t>>>=0;for(var T=fe(m);++l<m;)T[l]=e[l+t];return T}function uc(e,t){var r;return Yr(e,function(l,m,T){return r=t(l,m,T),!r}),!!r}function so(e,t,r){var l=0,m=e==null?l:e.length;if(typeof t=="number"&&t===t&&m<=z){for(;l<m;){var T=l+m>>>1,j=e[T];j!==null&&!Mn(j)&&(r?j<=t:j<t)?l=T+1:m=T}return m}return Jo(e,t,Cn,r)}function Jo(e,t,r,l){var m=0,T=e==null?0:e.length;if(T===0)return 0;t=r(t);for(var j=t!==t,Y=t===null,re=Mn(t),_e=t===a;m<T;){var we=Xi((m+T)/2),xe=r(e[we]),Le=xe!==a,$e=xe===null,Ke=xe===xe,tt=Mn(xe);if(j)var ze=l||Ke;else _e?ze=Ke&&(l||Le):Y?ze=Ke&&Le&&(l||!$e):re?ze=Ke&&Le&&!$e&&(l||!tt):$e||tt?ze=!1:ze=l?xe<=t:xe<t;ze?m=we+1:T=we}return un(T,Fe)}function ls(e,t){for(var r=-1,l=e.length,m=0,T=[];++r<l;){var j=e[r],Y=t?t(j):j;if(!r||!ir(Y,re)){var re=Y;T[m++]=j===0?0:j}}return T}function us(e){return typeof e=="number"?e:Mn(e)?le:+e}function Pn(e){if(typeof e=="string")return e;if(Ze(e))return vt(e,Pn)+"";if(Mn(e))return Ua?Ua.call(e):"";var t=e+"";return t=="0"&&1/e==-he?"-0":t}function Xr(e,t,r){var l=-1,m=Vt,T=e.length,j=!0,Y=[],re=Y;if(r)j=!1,m=Ut;else if(T>=v){var _e=t?null:wc(e);if(_e)return ji(_e);j=!1,m=Si,re=new si}else re=t?[]:Y;e:for(;++l<T;){var we=e[l],xe=t?t(we):we;if(we=r||we!==0?we:0,j&&xe===xe){for(var Le=re.length;Le--;)if(re[Le]===xe)continue e;t&&re.push(xe),Y.push(we)}else m(re,xe,r)||(re!==Y&&re.push(xe),Y.push(we))}return Y}function Zo(e,t){return t=ei(t,e),e=Ds(e,t),e==null||delete e[xr(Gn(t))]}function cs(e,t,r,l){return Mi(e,t,r(ui(e,t)),l)}function lo(e,t,r,l){for(var m=e.length,T=l?m:-1;(l?T--:++T<m)&&t(e[T],T,e););return r?Vn(e,l?0:T,l?T+1:m):Vn(e,l?T+1:0,l?m:T)}function fs(e,t){var r=e;return r instanceof at&&(r=r.value()),ii(t,function(l,m){return m.func.apply(m.thisArg,_n([l],m.args))},r)}function Qo(e,t,r){var l=e.length;if(l<2)return l?Xr(e[0]):[];for(var m=-1,T=fe(l);++m<l;)for(var j=e[m],Y=-1;++Y<l;)Y!=m&&(T[m]=Ii(T[m]||j,e[Y],t,r));return Xr(tn(T,1),t,r)}function hs(e,t,r){for(var l=-1,m=e.length,T=t.length,j={};++l<m;){var Y=l<T?t[l]:a;r(j,e[l],Y)}return j}function Yo(e){return jt(e)?e:[]}function Xo(e){return typeof e=="function"?e:Cn}function ei(e,t){return Ze(e)?e:la(e,t)?[e]:Us(bt(e))}var cc=nt;function ti(e,t,r){var l=e.length;return r=r===a?l:r,!t&&r>=l?e:Vn(e,t,r)}var ds=Ql||function(e){return V.clearTimeout(e)};function ps(e,t){if(t)return e.slice();var r=e.length,l=Pa?Pa(r):new e.constructor(r);return e.copy(l),l}function ea(e){var t=new e.constructor(e.byteLength);return new Gi(t).set(new Gi(e)),t}function fc(e,t){var r=t?ea(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}function hc(e){var t=new e.constructor(e.source,cr.exec(e));return t.lastIndex=e.lastIndex,t}function dc(e){return Ni?Et(Ni.call(e)):{}}function gs(e,t){var r=t?ea(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function ms(e,t){if(e!==t){var r=e!==a,l=e===null,m=e===e,T=Mn(e),j=t!==a,Y=t===null,re=t===t,_e=Mn(t);if(!Y&&!_e&&!T&&e>t||T&&j&&re&&!Y&&!_e||l&&j&&re||!r&&re||!m)return 1;if(!l&&!T&&!_e&&e<t||_e&&r&&m&&!l&&!T||Y&&r&&m||!j&&m||!re)return-1}return 0}function pc(e,t,r){for(var l=-1,m=e.criteria,T=t.criteria,j=m.length,Y=r.length;++l<j;){var re=ms(m[l],T[l]);if(re){if(l>=Y)return re;var _e=r[l];return re*(_e=="desc"?-1:1)}}return e.index-t.index}function vs(e,t,r,l){for(var m=-1,T=e.length,j=r.length,Y=-1,re=t.length,_e=Jt(T-j,0),we=fe(re+_e),xe=!l;++Y<re;)we[Y]=t[Y];for(;++m<j;)(xe||m<T)&&(we[r[m]]=e[m]);for(;_e--;)we[Y++]=e[m++];return we}function ys(e,t,r,l){for(var m=-1,T=e.length,j=-1,Y=r.length,re=-1,_e=t.length,we=Jt(T-Y,0),xe=fe(we+_e),Le=!l;++m<we;)xe[m]=e[m];for(var $e=m;++re<_e;)xe[$e+re]=t[re];for(;++j<Y;)(Le||m<T)&&(xe[$e+r[j]]=e[m++]);return xe}function wn(e,t){var r=-1,l=e.length;for(t||(t=fe(l));++r<l;)t[r]=e[r];return t}function br(e,t,r,l){var m=!r;r||(r={});for(var T=-1,j=t.length;++T<j;){var Y=t[T],re=l?l(r[Y],e[Y],Y,r,e):a;re===a&&(re=e[Y]),m?Pr(r,Y,re):Oi(r,Y,re)}return r}function gc(e,t){return br(e,sa(e),t)}function mc(e,t){return br(e,Ns(e),t)}function uo(e,t){return function(r,l){var m=Ze(r)?kt:$u,T=t?t():{};return m(r,e,He(l,2),T)}}function bi(e){return nt(function(t,r){var l=-1,m=r.length,T=m>1?r[m-1]:a,j=m>2?r[2]:a;for(T=e.length>3&&typeof T=="function"?(m--,T):a,j&&dn(r[0],r[1],j)&&(T=m<3?a:T,m=1),t=Et(t);++l<m;){var Y=r[l];Y&&e(t,Y,l,T)}return t})}function _s(e,t){return function(r,l){if(r==null)return r;if(!bn(r))return e(r,l);for(var m=r.length,T=t?m:-1,j=Et(r);(t?T--:++T<m)&&l(j[T],T,j)!==!1;);return r}}function ws(e){return function(t,r,l){for(var m=-1,T=Et(t),j=l(t),Y=j.length;Y--;){var re=j[e?Y:++m];if(r(T[re],re,T)===!1)break}return t}}function vc(e,t,r){var l=t&te,m=Di(e);function T(){var j=this&&this!==V&&this instanceof T?m:e;return j.apply(l?r:this,arguments)}return T}function bs(e){return function(t){t=bt(t);var r=pi(t)?nr(t):a,l=r?r[0]:t.charAt(0),m=r?ti(r,1).join(""):t.slice(1);return l[e]()+m}}function xi(e){return function(t){return ii(_l(yl(t).replace(Te,"")),e,"")}}function Di(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=wi(e.prototype),l=e.apply(r,t);return Ft(l)?l:r}}function yc(e,t,r){var l=Di(e);function m(){for(var T=arguments.length,j=fe(T),Y=T,re=Ci(m);Y--;)j[Y]=arguments[Y];var _e=T<3&&j[0]!==re&&j[T-1]!==re?[]:Zr(j,re);if(T-=_e.length,T<r)return Ss(e,t,co,m.placeholder,a,j,_e,a,a,r-T);var we=this&&this!==V&&this instanceof m?l:e;return lt(we,this,j)}return m}function xs(e){return function(t,r,l){var m=Et(t);if(!bn(t)){var T=He(r,3);t=Qt(t),r=function(Y){return T(m[Y],Y,m)}}var j=e(t,r,l);return j>-1?m[T?t[j]:j]:a}}function Cs(e){return Dr(function(t){var r=t.length,l=r,m=qn.prototype.thru;for(e&&t.reverse();l--;){var T=t[l];if(typeof T!="function")throw new zn(L);if(m&&!j&&go(T)=="wrapper")var j=new qn([],!0)}for(l=j?l:r;++l<r;){T=t[l];var Y=go(T),re=Y=="wrapper"?oa(T):a;re&&ua(re[0])&&re[1]==(_|k|N|h)&&!re[4].length&&re[9]==1?j=j[go(re[0])].apply(j,re[3]):j=T.length==1&&ua(T)?j[Y]():j.thru(T)}return function(){var _e=arguments,we=_e[0];if(j&&_e.length==1&&Ze(we))return j.plant(we).value();for(var xe=0,Le=r?t[xe].apply(this,_e):we;++xe<r;)Le=t[xe].call(this,Le);return Le}})}function co(e,t,r,l,m,T,j,Y,re,_e){var we=t&_,xe=t&te,Le=t&B,$e=t&(k|w),Ke=t&y,tt=Le?a:Di(e);function ze(){for(var it=arguments.length,ft=fe(it),Dn=it;Dn--;)ft[Dn]=arguments[Dn];if($e)var pn=Ci(ze),$n=Ll(ft,pn);if(l&&(ft=vs(ft,l,m,$e)),T&&(ft=ys(ft,T,j,$e)),it-=$n,$e&&it<_e){var Ht=Zr(ft,pn);return Ss(e,t,co,ze.placeholder,r,ft,Ht,Y,re,_e-it)}var or=xe?r:this,Ur=Le?or[e]:e;return it=ft.length,Y?ft=$c(ft,Y):Ke&&it>1&&ft.reverse(),we&&re<it&&(ft.length=re),this&&this!==V&&this instanceof ze&&(Ur=tt||Di(Ur)),Ur.apply(or,ft)}return ze}function As(e,t){return function(r,l){return Ku(r,e,t(l),{})}}function fo(e,t){return function(r,l){var m;if(r===a&&l===a)return t;if(r!==a&&(m=r),l!==a){if(m===a)return l;typeof r=="string"||typeof l=="string"?(r=Pn(r),l=Pn(l)):(r=us(r),l=us(l)),m=e(r,l)}return m}}function ta(e){return Dr(function(t){return t=vt(t,Fn(He())),nt(function(r){var l=this;return e(t,function(m){return lt(m,l,r)})})})}function ho(e,t){t=t===a?" ":Pn(t);var r=t.length;if(r<2)return r?Go(t,e):t;var l=Go(t,Yi(e/gi(t)));return pi(t)?ti(nr(l),0,e).join(""):l.slice(0,e)}function _c(e,t,r,l){var m=t&te,T=Di(e);function j(){for(var Y=-1,re=arguments.length,_e=-1,we=l.length,xe=fe(we+re),Le=this&&this!==V&&this instanceof j?T:e;++_e<we;)xe[_e]=l[_e];for(;re--;)xe[_e++]=arguments[++Y];return lt(Le,m?r:this,xe)}return j}function Es(e){return function(t,r,l){return l&&typeof l!="number"&&dn(t,r,l)&&(r=l=a),t=Wr(t),r===a?(r=t,t=0):r=Wr(r),l=l===a?t<r?1:-1:Wr(l),ic(t,r,l,e)}}function po(e){return function(t,r){return typeof t=="string"&&typeof r=="string"||(t=Jn(t),r=Jn(r)),e(t,r)}}function Ss(e,t,r,l,m,T,j,Y,re,_e){var we=t&k,xe=we?j:a,Le=we?a:j,$e=we?T:a,Ke=we?a:T;t|=we?N:R,t&=~(we?R:N),t&O||(t&=~(te|B));var tt=[e,t,m,$e,xe,Ke,Le,Y,re,_e],ze=r.apply(a,tt);return ua(e)&&$s(ze,tt),ze.placeholder=l,Bs(ze,e,t)}function na(e){var t=Gt[e];return function(r,l){if(r=Jn(r),l=l==null?0:un(Ye(l),292),l&&Ba(r)){var m=(bt(r)+"e").split("e"),T=t(m[0]+"e"+(+m[1]+l));return m=(bt(T)+"e").split("e"),+(m[0]+"e"+(+m[1]-l))}return t(r)}}var wc=yi&&1/ji(new yi([,-0]))[1]==he?function(e){return new yi(e)}:Aa;function ks(e){return function(t){var r=cn(t);return r==Be?Oo(t):r==Oe?Dl(t):Rl(t,e(t))}}function Mr(e,t,r,l,m,T,j,Y){var re=t&B;if(!re&&typeof e!="function")throw new zn(L);var _e=l?l.length:0;if(_e||(t&=~(N|R),l=m=a),j=j===a?j:Jt(Ye(j),0),Y=Y===a?Y:Ye(Y),_e-=m?m.length:0,t&R){var we=l,xe=m;l=m=a}var Le=re?a:oa(e),$e=[e,t,r,l,m,we,xe,T,j,Y];if(Le&&Pc($e,Le),e=$e[0],t=$e[1],r=$e[2],l=$e[3],m=$e[4],Y=$e[9]=$e[9]===a?re?0:e.length:Jt($e[9]-_e,0),!Y&&t&(k|w)&&(t&=~(k|w)),!t||t==te)var Ke=vc(e,t,r);else t==k||t==w?Ke=yc(e,t,Y):(t==N||t==(te|N))&&!m.length?Ke=_c(e,t,r,l):Ke=co.apply(a,$e);var tt=Le?ss:$s;return Bs(tt(Ke,$e),e,t)}function Ts(e,t,r,l){return e===a||ir(e,vi[r])&&!xt.call(l,r)?t:e}function Rs(e,t,r,l,m,T){return Ft(e)&&Ft(t)&&(T.set(t,e),ao(e,t,a,Rs,T),T.delete(t)),e}function bc(e){return Wi(e)?a:e}function Ls(e,t,r,l,m,T){var j=r&q,Y=e.length,re=t.length;if(Y!=re&&!(j&&re>Y))return!1;var _e=T.get(e),we=T.get(t);if(_e&&we)return _e==t&&we==e;var xe=-1,Le=!0,$e=r&H?new si:a;for(T.set(e,t),T.set(t,e);++xe<Y;){var Ke=e[xe],tt=t[xe];if(l)var ze=j?l(tt,Ke,xe,t,e,T):l(Ke,tt,xe,e,t,T);if(ze!==a){if(ze)continue;Le=!1;break}if($e){if(!So(t,function(it,ft){if(!Si($e,ft)&&(Ke===it||m(Ke,it,r,l,T)))return $e.push(ft)})){Le=!1;break}}else if(!(Ke===tt||m(Ke,tt,r,l,T))){Le=!1;break}}return T.delete(e),T.delete(t),Le}function xc(e,t,r,l,m,T,j){switch(r){case nn:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case At:return!(e.byteLength!=t.byteLength||!T(new Gi(e),new Gi(t)));case Ve:case Ae:case ht:return ir(+e,+t);case gt:return e.name==t.name&&e.message==t.message;case Ne:case ke:return e==t+"";case Be:var Y=Oo;case Oe:var re=l&q;if(Y||(Y=ji),e.size!=t.size&&!re)return!1;var _e=j.get(e);if(_e)return _e==t;l|=H,j.set(e,t);var we=Ls(Y(e),Y(t),l,m,T,j);return j.delete(e),we;case et:if(Ni)return Ni.call(e)==Ni.call(t)}return!1}function Cc(e,t,r,l,m,T){var j=r&q,Y=ra(e),re=Y.length,_e=ra(t),we=_e.length;if(re!=we&&!j)return!1;for(var xe=re;xe--;){var Le=Y[xe];if(!(j?Le in t:xt.call(t,Le)))return!1}var $e=T.get(e),Ke=T.get(t);if($e&&Ke)return $e==t&&Ke==e;var tt=!0;T.set(e,t),T.set(t,e);for(var ze=j;++xe<re;){Le=Y[xe];var it=e[Le],ft=t[Le];if(l)var Dn=j?l(ft,it,Le,t,e,T):l(it,ft,Le,e,t,T);if(!(Dn===a?it===ft||m(it,ft,r,l,T):Dn)){tt=!1;break}ze||(ze=Le=="constructor")}if(tt&&!ze){var pn=e.constructor,$n=t.constructor;pn!=$n&&"constructor"in e&&"constructor"in t&&!(typeof pn=="function"&&pn instanceof pn&&typeof $n=="function"&&$n instanceof $n)&&(tt=!1)}return T.delete(e),T.delete(t),tt}function Dr(e){return fa(Ms(e,a,qs),e+"")}function ra(e){return Za(e,Qt,sa)}function ia(e){return Za(e,xn,Ns)}var oa=eo?function(e){return eo.get(e)}:Aa;function go(e){for(var t=e.name+"",r=_i[t],l=xt.call(_i,t)?r.length:0;l--;){var m=r[l],T=m.func;if(T==null||T==e)return m.name}return t}function Ci(e){var t=xt.call(A,"placeholder")?A:e;return t.placeholder}function He(){var e=A.iteratee||xa;return e=e===xa?Xa:e,arguments.length?e(arguments[0],arguments[1]):e}function mo(e,t){var r=e.__data__;return Nc(t)?r[typeof t=="string"?"string":"hash"]:r.map}function aa(e){for(var t=Qt(e),r=t.length;r--;){var l=t[r],m=e[l];t[r]=[l,m,Fs(m)]}return t}function ci(e,t){var r=Fl(e,t);return Ya(r)?r:a}function Ac(e){var t=xt.call(e,oi),r=e[oi];try{e[oi]=a;var l=!0}catch{}var m=Ki.call(e);return l&&(t?e[oi]=r:delete e[oi]),m}var sa=Fo?function(e){return e==null?[]:(e=Et(e),Tt(Fo(e),function(t){return Da.call(e,t)}))}:Ea,Ns=Fo?function(e){for(var t=[];e;)_n(t,sa(e)),e=Ji(e);return t}:Ea,cn=hn;(Po&&cn(new Po(new ArrayBuffer(1)))!=nn||Ti&&cn(new Ti)!=Be||Mo&&cn(Mo.resolve())!=Ot||yi&&cn(new yi)!=Oe||Ri&&cn(new Ri)!=Kt)&&(cn=function(e){var t=hn(e),r=t==ot?e.constructor:a,l=r?fi(r):"";if(l)switch(l){case au:return nn;case su:return Be;case lu:return Ot;case uu:return Oe;case cu:return Kt}return t});function Ec(e,t,r){for(var l=-1,m=r.length;++l<m;){var T=r[l],j=T.size;switch(T.type){case"drop":e+=j;break;case"dropRight":t-=j;break;case"take":t=un(t,e+j);break;case"takeRight":e=Jt(e,t-j);break}}return{start:e,end:t}}function Sc(e){var t=e.match(Yn);return t?t[1].split(Sr):[]}function Os(e,t,r){t=ei(t,e);for(var l=-1,m=t.length,T=!1;++l<m;){var j=xr(t[l]);if(!(T=e!=null&&r(e,j)))break;e=e[j]}return T||++l!=m?T:(m=e==null?0:e.length,!!m&&Co(m)&&$r(j,m)&&(Ze(e)||hi(e)))}function kc(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&xt.call(e,"index")&&(r.index=e.index,r.input=e.input),r}function Is(e){return typeof e.constructor=="function"&&!$i(e)?wi(Ji(e)):{}}function Tc(e,t,r){var l=e.constructor;switch(t){case At:return ea(e);case Ve:case Ae:return new l(+e);case nn:return fc(e,r);case St:case gn:case ar:case sr:case lr:case _t:case Pt:case dt:case Wt:return gs(e,r);case Be:return new l;case ht:case ke:return new l(e);case Ne:return hc(e);case Oe:return new l;case et:return dc(e)}}function Rc(e,t){var r=t.length;if(!r)return e;var l=r-1;return t[l]=(r>1?"& ":"")+t[l],t=t.join(r>2?", ":" "),e.replace(on,`{
/* [wrapped with `+t+`] */
`)}function Lc(e){return Ze(e)||hi(e)||!!($a&&e&&e[$a])}function $r(e,t){var r=typeof e;return t=t??oe,!!t&&(r=="number"||r!="symbol"&&dr.test(e))&&e>-1&&e%1==0&&e<t}function dn(e,t,r){if(!Ft(r))return!1;var l=typeof t;return(l=="number"?bn(r)&&$r(t,r.length):l=="string"&&t in r)?ir(r[t],e):!1}function la(e,t){if(Ze(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||Mn(e)?!0:qr.test(e)||!mt.test(e)||t!=null&&e in Et(t)}function Nc(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function ua(e){var t=go(e),r=A[t];if(typeof r!="function"||!(t in at.prototype))return!1;if(e===r)return!0;var l=oa(r);return!!l&&e===l[0]}function Oc(e){return!!Fa&&Fa in e}var Ic=zi?Br:Sa;function $i(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||vi;return e===r}function Fs(e){return e===e&&!Ft(e)}function Ps(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==a||e in Et(r))}}function Fc(e){var t=bo(e,function(l){return r.size===P&&r.clear(),l}),r=t.cache;return t}function Pc(e,t){var r=e[1],l=t[1],m=r|l,T=m<(te|B|_),j=l==_&&r==k||l==_&&r==h&&e[7].length<=t[8]||l==(_|h)&&t[7].length<=t[8]&&r==k;if(!(T||j))return e;l&te&&(e[2]=t[2],m|=r&te?0:O);var Y=t[3];if(Y){var re=e[3];e[3]=re?vs(re,Y,t[4]):Y,e[4]=re?Zr(e[3],K):t[4]}return Y=t[5],Y&&(re=e[5],e[5]=re?ys(re,Y,t[6]):Y,e[6]=re?Zr(e[5],K):t[6]),Y=t[7],Y&&(e[7]=Y),l&_&&(e[8]=e[8]==null?t[8]:un(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=m,e}function Mc(e){var t=[];if(e!=null)for(var r in Et(e))t.push(r);return t}function Dc(e){return Ki.call(e)}function Ms(e,t,r){return t=Jt(t===a?e.length-1:t,0),function(){for(var l=arguments,m=-1,T=Jt(l.length-t,0),j=fe(T);++m<T;)j[m]=l[t+m];m=-1;for(var Y=fe(t+1);++m<t;)Y[m]=l[m];return Y[t]=r(j),lt(e,this,Y)}}function Ds(e,t){return t.length<2?e:ui(e,Vn(t,0,-1))}function $c(e,t){for(var r=e.length,l=un(t.length,r),m=wn(e);l--;){var T=t[l];e[l]=$r(T,r)?m[T]:a}return e}function ca(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var $s=Ws(ss),Bi=Xl||function(e,t){return V.setTimeout(e,t)},fa=Ws(sc);function Bs(e,t,r){var l=t+"";return fa(e,Rc(l,Bc(Sc(l),r)))}function Ws(e){var t=0,r=0;return function(){var l=ru(),m=ae-(l-r);if(r=l,m>0){if(++t>=Z)return arguments[0]}else t=0;return e.apply(a,arguments)}}function vo(e,t){var r=-1,l=e.length,m=l-1;for(t=t===a?l:t;++r<t;){var T=Vo(r,m),j=e[T];e[T]=e[r],e[r]=j}return e.length=t,e}var Us=Fc(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Yt,function(r,l,m,T){t.push(m?T.replace(kr,"$1"):l||r)}),t});function xr(e){if(typeof e=="string"||Mn(e))return e;var t=e+"";return t=="0"&&1/e==-he?"-0":t}function fi(e){if(e!=null){try{return qi.call(e)}catch{}try{return e+""}catch{}}return""}function Bc(e,t){return ut(x,function(r){var l="_."+r[0];t&r[1]&&!Vt(e,l)&&e.push(l)}),e.sort()}function js(e){if(e instanceof at)return e.clone();var t=new qn(e.__wrapped__,e.__chain__);return t.__actions__=wn(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Wc(e,t,r){(r?dn(e,t,r):t===a)?t=1:t=Jt(Ye(t),0);var l=e==null?0:e.length;if(!l||t<1)return[];for(var m=0,T=0,j=fe(Yi(l/t));m<l;)j[T++]=Vn(e,m,m+=t);return j}function Uc(e){for(var t=-1,r=e==null?0:e.length,l=0,m=[];++t<r;){var T=e[t];T&&(m[l++]=T)}return m}function jc(){var e=arguments.length;if(!e)return[];for(var t=fe(e-1),r=arguments[0],l=e;l--;)t[l-1]=arguments[l];return _n(Ze(r)?wn(r):[r],tn(t,1))}var Hc=nt(function(e,t){return jt(e)?Ii(e,tn(t,1,jt,!0)):[]}),zc=nt(function(e,t){var r=Gn(t);return jt(r)&&(r=a),jt(e)?Ii(e,tn(t,1,jt,!0),He(r,2)):[]}),qc=nt(function(e,t){var r=Gn(t);return jt(r)&&(r=a),jt(e)?Ii(e,tn(t,1,jt,!0),a,r):[]});function Kc(e,t,r){var l=e==null?0:e.length;return l?(t=r||t===a?1:Ye(t),Vn(e,t<0?0:t,l)):[]}function Vc(e,t,r){var l=e==null?0:e.length;return l?(t=r||t===a?1:Ye(t),t=l-t,Vn(e,0,t<0?0:t)):[]}function Gc(e,t){return e&&e.length?lo(e,He(t,3),!0,!0):[]}function Jc(e,t){return e&&e.length?lo(e,He(t,3),!0):[]}function Zc(e,t,r,l){var m=e==null?0:e.length;return m?(r&&typeof r!="number"&&dn(e,t,r)&&(r=0,l=m),ju(e,t,r,l)):[]}function Hs(e,t,r){var l=e==null?0:e.length;if(!l)return-1;var m=r==null?0:Ye(r);return m<0&&(m=Jt(l+m,0)),Ui(e,He(t,3),m)}function zs(e,t,r){var l=e==null?0:e.length;if(!l)return-1;var m=l-1;return r!==a&&(m=Ye(r),m=r<0?Jt(l+m,0):un(m,l-1)),Ui(e,He(t,3),m,!0)}function qs(e){var t=e==null?0:e.length;return t?tn(e,1):[]}function Qc(e){var t=e==null?0:e.length;return t?tn(e,he):[]}function Yc(e,t){var r=e==null?0:e.length;return r?(t=t===a?1:Ye(t),tn(e,t)):[]}function Xc(e){for(var t=-1,r=e==null?0:e.length,l={};++t<r;){var m=e[t];l[m[0]]=m[1]}return l}function Ks(e){return e&&e.length?e[0]:a}function ef(e,t,r){var l=e==null?0:e.length;if(!l)return-1;var m=r==null?0:Ye(r);return m<0&&(m=Jt(l+m,0)),di(e,t,m)}function tf(e){var t=e==null?0:e.length;return t?Vn(e,0,-1):[]}var nf=nt(function(e){var t=vt(e,Yo);return t.length&&t[0]===e[0]?jo(t):[]}),rf=nt(function(e){var t=Gn(e),r=vt(e,Yo);return t===Gn(r)?t=a:r.pop(),r.length&&r[0]===e[0]?jo(r,He(t,2)):[]}),of=nt(function(e){var t=Gn(e),r=vt(e,Yo);return t=typeof t=="function"?t:a,t&&r.pop(),r.length&&r[0]===e[0]?jo(r,a,t):[]});function af(e,t){return e==null?"":tu.call(e,t)}function Gn(e){var t=e==null?0:e.length;return t?e[t-1]:a}function sf(e,t,r){var l=e==null?0:e.length;if(!l)return-1;var m=l;return r!==a&&(m=Ye(r),m=m<0?Jt(l+m,0):un(m,l-1)),t===t?Bl(e,t,m):Ui(e,Ta,m,!0)}function lf(e,t){return e&&e.length?rs(e,Ye(t)):a}var uf=nt(Vs);function Vs(e,t){return e&&e.length&&t&&t.length?Ko(e,t):e}function cf(e,t,r){return e&&e.length&&t&&t.length?Ko(e,t,He(r,2)):e}function ff(e,t,r){return e&&e.length&&t&&t.length?Ko(e,t,a,r):e}var hf=Dr(function(e,t){var r=e==null?0:e.length,l=$o(e,t);return as(e,vt(t,function(m){return $r(m,r)?+m:m}).sort(ms)),l});function df(e,t){var r=[];if(!(e&&e.length))return r;var l=-1,m=[],T=e.length;for(t=He(t,3);++l<T;){var j=e[l];t(j,l,e)&&(r.push(j),m.push(l))}return as(e,m),r}function ha(e){return e==null?e:ou.call(e)}function pf(e,t,r){var l=e==null?0:e.length;return l?(r&&typeof r!="number"&&dn(e,t,r)?(t=0,r=l):(t=t==null?0:Ye(t),r=r===a?l:Ye(r)),Vn(e,t,r)):[]}function gf(e,t){return so(e,t)}function mf(e,t,r){return Jo(e,t,He(r,2))}function vf(e,t){var r=e==null?0:e.length;if(r){var l=so(e,t);if(l<r&&ir(e[l],t))return l}return-1}function yf(e,t){return so(e,t,!0)}function _f(e,t,r){return Jo(e,t,He(r,2),!0)}function wf(e,t){var r=e==null?0:e.length;if(r){var l=so(e,t,!0)-1;if(ir(e[l],t))return l}return-1}function bf(e){return e&&e.length?ls(e):[]}function xf(e,t){return e&&e.length?ls(e,He(t,2)):[]}function Cf(e){var t=e==null?0:e.length;return t?Vn(e,1,t):[]}function Af(e,t,r){return e&&e.length?(t=r||t===a?1:Ye(t),Vn(e,0,t<0?0:t)):[]}function Ef(e,t,r){var l=e==null?0:e.length;return l?(t=r||t===a?1:Ye(t),t=l-t,Vn(e,t<0?0:t,l)):[]}function Sf(e,t){return e&&e.length?lo(e,He(t,3),!1,!0):[]}function kf(e,t){return e&&e.length?lo(e,He(t,3)):[]}var Tf=nt(function(e){return Xr(tn(e,1,jt,!0))}),Rf=nt(function(e){var t=Gn(e);return jt(t)&&(t=a),Xr(tn(e,1,jt,!0),He(t,2))}),Lf=nt(function(e){var t=Gn(e);return t=typeof t=="function"?t:a,Xr(tn(e,1,jt,!0),a,t)});function Nf(e){return e&&e.length?Xr(e):[]}function Of(e,t){return e&&e.length?Xr(e,He(t,2)):[]}function If(e,t){return t=typeof t=="function"?t:a,e&&e.length?Xr(e,a,t):[]}function da(e){if(!(e&&e.length))return[];var t=0;return e=Tt(e,function(r){if(jt(r))return t=Jt(r.length,t),!0}),Lo(t,function(r){return vt(e,ko(r))})}function Gs(e,t){if(!(e&&e.length))return[];var r=da(e);return t==null?r:vt(r,function(l){return lt(t,a,l)})}var Ff=nt(function(e,t){return jt(e)?Ii(e,t):[]}),Pf=nt(function(e){return Qo(Tt(e,jt))}),Mf=nt(function(e){var t=Gn(e);return jt(t)&&(t=a),Qo(Tt(e,jt),He(t,2))}),Df=nt(function(e){var t=Gn(e);return t=typeof t=="function"?t:a,Qo(Tt(e,jt),a,t)}),$f=nt(da);function Bf(e,t){return hs(e||[],t||[],Oi)}function Wf(e,t){return hs(e||[],t||[],Mi)}var Uf=nt(function(e){var t=e.length,r=t>1?e[t-1]:a;return r=typeof r=="function"?(e.pop(),r):a,Gs(e,r)});function Js(e){var t=A(e);return t.__chain__=!0,t}function jf(e,t){return t(e),e}function yo(e,t){return t(e)}var Hf=Dr(function(e){var t=e.length,r=t?e[0]:0,l=this.__wrapped__,m=function(T){return $o(T,e)};return t>1||this.__actions__.length||!(l instanceof at)||!$r(r)?this.thru(m):(l=l.slice(r,+r+(t?1:0)),l.__actions__.push({func:yo,args:[m],thisArg:a}),new qn(l,this.__chain__).thru(function(T){return t&&!T.length&&T.push(a),T}))});function zf(){return Js(this)}function qf(){return new qn(this.value(),this.__chain__)}function Kf(){this.__values__===a&&(this.__values__=ul(this.value()));var e=this.__index__>=this.__values__.length,t=e?a:this.__values__[this.__index__++];return{done:e,value:t}}function Vf(){return this}function Gf(e){for(var t,r=this;r instanceof no;){var l=js(r);l.__index__=0,l.__values__=a,t?m.__wrapped__=l:t=l;var m=l;r=r.__wrapped__}return m.__wrapped__=e,t}function Jf(){var e=this.__wrapped__;if(e instanceof at){var t=e;return this.__actions__.length&&(t=new at(this)),t=t.reverse(),t.__actions__.push({func:yo,args:[ha],thisArg:a}),new qn(t,this.__chain__)}return this.thru(ha)}function Zf(){return fs(this.__wrapped__,this.__actions__)}var Qf=uo(function(e,t,r){xt.call(e,r)?++e[r]:Pr(e,r,1)});function Yf(e,t,r){var l=Ze(e)?Ge:Uu;return r&&dn(e,t,r)&&(t=a),l(e,He(t,3))}function Xf(e,t){var r=Ze(e)?Tt:Ga;return r(e,He(t,3))}var eh=xs(Hs),th=xs(zs);function nh(e,t){return tn(_o(e,t),1)}function rh(e,t){return tn(_o(e,t),he)}function ih(e,t,r){return r=r===a?1:Ye(r),tn(_o(e,t),r)}function Zs(e,t){var r=Ze(e)?ut:Yr;return r(e,He(t,3))}function Qs(e,t){var r=Ze(e)?ct:Va;return r(e,He(t,3))}var oh=uo(function(e,t,r){xt.call(e,r)?e[r].push(t):Pr(e,r,[t])});function ah(e,t,r,l){e=bn(e)?e:Ei(e),r=r&&!l?Ye(r):0;var m=e.length;return r<0&&(r=Jt(m+r,0)),Ao(e)?r<=m&&e.indexOf(t,r)>-1:!!m&&di(e,t,r)>-1}var sh=nt(function(e,t,r){var l=-1,m=typeof t=="function",T=bn(e)?fe(e.length):[];return Yr(e,function(j){T[++l]=m?lt(t,j,r):Fi(j,t,r)}),T}),lh=uo(function(e,t,r){Pr(e,r,t)});function _o(e,t){var r=Ze(e)?vt:es;return r(e,He(t,3))}function uh(e,t,r,l){return e==null?[]:(Ze(t)||(t=t==null?[]:[t]),r=l?a:r,Ze(r)||(r=r==null?[]:[r]),is(e,t,r))}var ch=uo(function(e,t,r){e[r?0:1].push(t)},function(){return[[],[]]});function fh(e,t,r){var l=Ze(e)?ii:La,m=arguments.length<3;return l(e,He(t,4),r,m,Yr)}function hh(e,t,r){var l=Ze(e)?Cl:La,m=arguments.length<3;return l(e,He(t,4),r,m,Va)}function dh(e,t){var r=Ze(e)?Tt:Ga;return r(e,xo(He(t,3)))}function ph(e){var t=Ze(e)?Ha:oc;return t(e)}function gh(e,t,r){(r?dn(e,t,r):t===a)?t=1:t=Ye(t);var l=Ze(e)?Mu:ac;return l(e,t)}function mh(e){var t=Ze(e)?Du:lc;return t(e)}function vh(e){if(e==null)return 0;if(bn(e))return Ao(e)?gi(e):e.length;var t=cn(e);return t==Be||t==Oe?e.size:zo(e).length}function yh(e,t,r){var l=Ze(e)?So:uc;return r&&dn(e,t,r)&&(t=a),l(e,He(t,3))}var _h=nt(function(e,t){if(e==null)return[];var r=t.length;return r>1&&dn(e,t[0],t[1])?t=[]:r>2&&dn(t[0],t[1],t[2])&&(t=[t[0]]),is(e,tn(t,1),[])}),wo=Yl||function(){return V.Date.now()};function wh(e,t){if(typeof t!="function")throw new zn(L);return e=Ye(e),function(){if(--e<1)return t.apply(this,arguments)}}function Ys(e,t,r){return t=r?a:t,t=e&&t==null?e.length:t,Mr(e,_,a,a,a,a,t)}function Xs(e,t){var r;if(typeof t!="function")throw new zn(L);return e=Ye(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=a),r}}var pa=nt(function(e,t,r){var l=te;if(r.length){var m=Zr(r,Ci(pa));l|=N}return Mr(e,l,t,r,m)}),el=nt(function(e,t,r){var l=te|B;if(r.length){var m=Zr(r,Ci(el));l|=N}return Mr(t,l,e,r,m)});function tl(e,t,r){t=r?a:t;var l=Mr(e,k,a,a,a,a,a,t);return l.placeholder=tl.placeholder,l}function nl(e,t,r){t=r?a:t;var l=Mr(e,w,a,a,a,a,a,t);return l.placeholder=nl.placeholder,l}function rl(e,t,r){var l,m,T,j,Y,re,_e=0,we=!1,xe=!1,Le=!0;if(typeof e!="function")throw new zn(L);t=Jn(t)||0,Ft(r)&&(we=!!r.leading,xe="maxWait"in r,T=xe?Jt(Jn(r.maxWait)||0,t):T,Le="trailing"in r?!!r.trailing:Le);function $e(Ht){var or=l,Ur=m;return l=m=a,_e=Ht,j=e.apply(Ur,or),j}function Ke(Ht){return _e=Ht,Y=Bi(it,t),we?$e(Ht):j}function tt(Ht){var or=Ht-re,Ur=Ht-_e,xl=t-or;return xe?un(xl,T-Ur):xl}function ze(Ht){var or=Ht-re,Ur=Ht-_e;return re===a||or>=t||or<0||xe&&Ur>=T}function it(){var Ht=wo();if(ze(Ht))return ft(Ht);Y=Bi(it,tt(Ht))}function ft(Ht){return Y=a,Le&&l?$e(Ht):(l=m=a,j)}function Dn(){Y!==a&&ds(Y),_e=0,l=re=m=Y=a}function pn(){return Y===a?j:ft(wo())}function $n(){var Ht=wo(),or=ze(Ht);if(l=arguments,m=this,re=Ht,or){if(Y===a)return Ke(re);if(xe)return ds(Y),Y=Bi(it,t),$e(re)}return Y===a&&(Y=Bi(it,t)),j}return $n.cancel=Dn,$n.flush=pn,$n}var bh=nt(function(e,t){return Ka(e,1,t)}),xh=nt(function(e,t,r){return Ka(e,Jn(t)||0,r)});function Ch(e){return Mr(e,y)}function bo(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new zn(L);var r=function(){var l=arguments,m=t?t.apply(this,l):l[0],T=r.cache;if(T.has(m))return T.get(m);var j=e.apply(this,l);return r.cache=T.set(m,j)||T,j};return r.cache=new(bo.Cache||Fr),r}bo.Cache=Fr;function xo(e){if(typeof e!="function")throw new zn(L);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Ah(e){return Xs(2,e)}var Eh=cc(function(e,t){t=t.length==1&&Ze(t[0])?vt(t[0],Fn(He())):vt(tn(t,1),Fn(He()));var r=t.length;return nt(function(l){for(var m=-1,T=un(l.length,r);++m<T;)l[m]=t[m].call(this,l[m]);return lt(e,this,l)})}),ga=nt(function(e,t){var r=Zr(t,Ci(ga));return Mr(e,N,a,t,r)}),il=nt(function(e,t){var r=Zr(t,Ci(il));return Mr(e,R,a,t,r)}),Sh=Dr(function(e,t){return Mr(e,h,a,a,a,t)});function kh(e,t){if(typeof e!="function")throw new zn(L);return t=t===a?t:Ye(t),nt(e,t)}function Th(e,t){if(typeof e!="function")throw new zn(L);return t=t==null?0:Jt(Ye(t),0),nt(function(r){var l=r[t],m=ti(r,0,t);return l&&_n(m,l),lt(e,this,m)})}function Rh(e,t,r){var l=!0,m=!0;if(typeof e!="function")throw new zn(L);return Ft(r)&&(l="leading"in r?!!r.leading:l,m="trailing"in r?!!r.trailing:m),rl(e,t,{leading:l,maxWait:t,trailing:m})}function Lh(e){return Ys(e,1)}function Nh(e,t){return ga(Xo(t),e)}function Oh(){if(!arguments.length)return[];var e=arguments[0];return Ze(e)?e:[e]}function Ih(e){return Kn(e,F)}function Fh(e,t){return t=typeof t=="function"?t:a,Kn(e,F,t)}function Ph(e){return Kn(e,W|F)}function Mh(e,t){return t=typeof t=="function"?t:a,Kn(e,W|F,t)}function Dh(e,t){return t==null||qa(e,t,Qt(t))}function ir(e,t){return e===t||e!==e&&t!==t}var $h=po(Uo),Bh=po(function(e,t){return e>=t}),hi=Qa(function(){return arguments}())?Qa:function(e){return $t(e)&&xt.call(e,"callee")&&!Da.call(e,"callee")},Ze=fe.isArray,Wh=Re?Fn(Re):Vu;function bn(e){return e!=null&&Co(e.length)&&!Br(e)}function jt(e){return $t(e)&&bn(e)}function Uh(e){return e===!0||e===!1||$t(e)&&hn(e)==Ve}var ni=eu||Sa,jh=Ce?Fn(Ce):Gu;function Hh(e){return $t(e)&&e.nodeType===1&&!Wi(e)}function zh(e){if(e==null)return!0;if(bn(e)&&(Ze(e)||typeof e=="string"||typeof e.splice=="function"||ni(e)||Ai(e)||hi(e)))return!e.length;var t=cn(e);if(t==Be||t==Oe)return!e.size;if($i(e))return!zo(e).length;for(var r in e)if(xt.call(e,r))return!1;return!0}function qh(e,t){return Pi(e,t)}function Kh(e,t,r){r=typeof r=="function"?r:a;var l=r?r(e,t):a;return l===a?Pi(e,t,a,r):!!l}function ma(e){if(!$t(e))return!1;var t=hn(e);return t==gt||t==Bt||typeof e.message=="string"&&typeof e.name=="string"&&!Wi(e)}function Vh(e){return typeof e=="number"&&Ba(e)}function Br(e){if(!Ft(e))return!1;var t=hn(e);return t==Xe||t==Ue||t==De||t==Lt}function ol(e){return typeof e=="number"&&e==Ye(e)}function Co(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=oe}function Ft(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function $t(e){return e!=null&&typeof e=="object"}var al=We?Fn(We):Zu;function Gh(e,t){return e===t||Ho(e,t,aa(t))}function Jh(e,t,r){return r=typeof r=="function"?r:a,Ho(e,t,aa(t),r)}function Zh(e){return sl(e)&&e!=+e}function Qh(e){if(Ic(e))throw new Je(S);return Ya(e)}function Yh(e){return e===null}function Xh(e){return e==null}function sl(e){return typeof e=="number"||$t(e)&&hn(e)==ht}function Wi(e){if(!$t(e)||hn(e)!=ot)return!1;var t=Ji(e);if(t===null)return!0;var r=xt.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&qi.call(r)==Gl}var va=qe?Fn(qe):Qu;function ed(e){return ol(e)&&e>=-oe&&e<=oe}var ll=je?Fn(je):Yu;function Ao(e){return typeof e=="string"||!Ze(e)&&$t(e)&&hn(e)==ke}function Mn(e){return typeof e=="symbol"||$t(e)&&hn(e)==et}var Ai=rt?Fn(rt):Xu;function td(e){return e===a}function nd(e){return $t(e)&&cn(e)==Kt}function rd(e){return $t(e)&&hn(e)==jr}var id=po(qo),od=po(function(e,t){return e<=t});function ul(e){if(!e)return[];if(bn(e))return Ao(e)?nr(e):wn(e);if(ki&&e[ki])return Ml(e[ki]());var t=cn(e),r=t==Be?Oo:t==Oe?ji:Ei;return r(e)}function Wr(e){if(!e)return e===0?e:0;if(e=Jn(e),e===he||e===-he){var t=e<0?-1:1;return t*Ee}return e===e?e:0}function Ye(e){var t=Wr(e),r=t%1;return t===t?r?t-r:t:0}function cl(e){return e?li(Ye(e),0,be):0}function Jn(e){if(typeof e=="number")return e;if(Mn(e))return le;if(Ft(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Ft(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(zt,"");var r=fr.test(e);return r||hr.test(e)?C(e.slice(2),r?2:8):Tr.test(e)?le:+e}function fl(e){return br(e,xn(e))}function ad(e){return e?li(Ye(e),-oe,oe):e===0?e:0}function bt(e){return e==null?"":Pn(e)}var sd=bi(function(e,t){if($i(t)||bn(t)){br(t,Qt(t),e);return}for(var r in t)xt.call(t,r)&&Oi(e,r,t[r])}),hl=bi(function(e,t){br(t,xn(t),e)}),Eo=bi(function(e,t,r,l){br(t,xn(t),e,l)}),ld=bi(function(e,t,r,l){br(t,Qt(t),e,l)}),ud=Dr($o);function cd(e,t){var r=wi(e);return t==null?r:za(r,t)}var fd=nt(function(e,t){e=Et(e);var r=-1,l=t.length,m=l>2?t[2]:a;for(m&&dn(t[0],t[1],m)&&(l=1);++r<l;)for(var T=t[r],j=xn(T),Y=-1,re=j.length;++Y<re;){var _e=j[Y],we=e[_e];(we===a||ir(we,vi[_e])&&!xt.call(e,_e))&&(e[_e]=T[_e])}return e}),hd=nt(function(e){return e.push(a,Rs),lt(dl,a,e)});function dd(e,t){return ka(e,He(t,3),wr)}function pd(e,t){return ka(e,He(t,3),Wo)}function gd(e,t){return e==null?e:Bo(e,He(t,3),xn)}function md(e,t){return e==null?e:Ja(e,He(t,3),xn)}function vd(e,t){return e&&wr(e,He(t,3))}function yd(e,t){return e&&Wo(e,He(t,3))}function _d(e){return e==null?[]:oo(e,Qt(e))}function wd(e){return e==null?[]:oo(e,xn(e))}function ya(e,t,r){var l=e==null?a:ui(e,t);return l===a?r:l}function bd(e,t){return e!=null&&Os(e,t,Hu)}function _a(e,t){return e!=null&&Os(e,t,zu)}var xd=As(function(e,t,r){t!=null&&typeof t.toString!="function"&&(t=Ki.call(t)),e[t]=r},ba(Cn)),Cd=As(function(e,t,r){t!=null&&typeof t.toString!="function"&&(t=Ki.call(t)),xt.call(e,t)?e[t].push(r):e[t]=[r]},He),Ad=nt(Fi);function Qt(e){return bn(e)?ja(e):zo(e)}function xn(e){return bn(e)?ja(e,!0):ec(e)}function Ed(e,t){var r={};return t=He(t,3),wr(e,function(l,m,T){Pr(r,t(l,m,T),l)}),r}function Sd(e,t){var r={};return t=He(t,3),wr(e,function(l,m,T){Pr(r,m,t(l,m,T))}),r}var kd=bi(function(e,t,r){ao(e,t,r)}),dl=bi(function(e,t,r,l){ao(e,t,r,l)}),Td=Dr(function(e,t){var r={};if(e==null)return r;var l=!1;t=vt(t,function(T){return T=ei(T,e),l||(l=T.length>1),T}),br(e,ia(e),r),l&&(r=Kn(r,W|Q|F,bc));for(var m=t.length;m--;)Zo(r,t[m]);return r});function Rd(e,t){return pl(e,xo(He(t)))}var Ld=Dr(function(e,t){return e==null?{}:nc(e,t)});function pl(e,t){if(e==null)return{};var r=vt(ia(e),function(l){return[l]});return t=He(t),os(e,r,function(l,m){return t(l,m[0])})}function Nd(e,t,r){t=ei(t,e);var l=-1,m=t.length;for(m||(m=1,e=a);++l<m;){var T=e==null?a:e[xr(t[l])];T===a&&(l=m,T=r),e=Br(T)?T.call(e):T}return e}function Od(e,t,r){return e==null?e:Mi(e,t,r)}function Id(e,t,r,l){return l=typeof l=="function"?l:a,e==null?e:Mi(e,t,r,l)}var gl=ks(Qt),ml=ks(xn);function Fd(e,t,r){var l=Ze(e),m=l||ni(e)||Ai(e);if(t=He(t,4),r==null){var T=e&&e.constructor;m?r=l?new T:[]:Ft(e)?r=Br(T)?wi(Ji(e)):{}:r={}}return(m?ut:wr)(e,function(j,Y,re){return t(r,j,Y,re)}),r}function Pd(e,t){return e==null?!0:Zo(e,t)}function Md(e,t,r){return e==null?e:cs(e,t,Xo(r))}function Dd(e,t,r,l){return l=typeof l=="function"?l:a,e==null?e:cs(e,t,Xo(r),l)}function Ei(e){return e==null?[]:No(e,Qt(e))}function $d(e){return e==null?[]:No(e,xn(e))}function Bd(e,t,r){return r===a&&(r=t,t=a),r!==a&&(r=Jn(r),r=r===r?r:0),t!==a&&(t=Jn(t),t=t===t?t:0),li(Jn(e),t,r)}function Wd(e,t,r){return t=Wr(t),r===a?(r=t,t=0):r=Wr(r),e=Jn(e),qu(e,t,r)}function Ud(e,t,r){if(r&&typeof r!="boolean"&&dn(e,t,r)&&(t=r=a),r===a&&(typeof t=="boolean"?(r=t,t=a):typeof e=="boolean"&&(r=e,e=a)),e===a&&t===a?(e=0,t=1):(e=Wr(e),t===a?(t=e,e=0):t=Wr(t)),e>t){var l=e;e=t,t=l}if(r||e%1||t%1){var m=Wa();return un(e+m*(t-e+c("1e-"+((m+"").length-1))),t)}return Vo(e,t)}var jd=xi(function(e,t,r){return t=t.toLowerCase(),e+(r?vl(t):t)});function vl(e){return wa(bt(e).toLowerCase())}function yl(e){return e=bt(e),e&&e.replace(En,Nl).replace(st,"")}function Hd(e,t,r){e=bt(e),t=Pn(t);var l=e.length;r=r===a?l:li(Ye(r),0,l);var m=r;return r-=t.length,r>=0&&e.slice(r,m)==t}function zd(e){return e=bt(e),e&&Zn.test(e)?e.replace(rn,Ol):e}function qd(e){return e=bt(e),e&&ur.test(e)?e.replace(Mt,"\\$&"):e}var Kd=xi(function(e,t,r){return e+(r?"-":"")+t.toLowerCase()}),Vd=xi(function(e,t,r){return e+(r?" ":"")+t.toLowerCase()}),Gd=bs("toLowerCase");function Jd(e,t,r){e=bt(e),t=Ye(t);var l=t?gi(e):0;if(!t||l>=t)return e;var m=(t-l)/2;return ho(Xi(m),r)+e+ho(Yi(m),r)}function Zd(e,t,r){e=bt(e),t=Ye(t);var l=t?gi(e):0;return t&&l<t?e+ho(t-l,r):e}function Qd(e,t,r){e=bt(e),t=Ye(t);var l=t?gi(e):0;return t&&l<t?ho(t-l,r)+e:e}function Yd(e,t,r){return r||t==null?t=0:t&&(t=+t),iu(bt(e).replace(Ar,""),t||0)}function Xd(e,t,r){return(r?dn(e,t,r):t===a)?t=1:t=Ye(t),Go(bt(e),t)}function ep(){var e=arguments,t=bt(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var tp=xi(function(e,t,r){return e+(r?"_":"")+t.toLowerCase()});function np(e,t,r){return r&&typeof r!="number"&&dn(e,t,r)&&(t=r=a),r=r===a?be:r>>>0,r?(e=bt(e),e&&(typeof t=="string"||t!=null&&!va(t))&&(t=Pn(t),!t&&pi(e))?ti(nr(e),0,r):e.split(t,r)):[]}var rp=xi(function(e,t,r){return e+(r?" ":"")+wa(t)});function ip(e,t,r){return e=bt(e),r=r==null?0:li(Ye(r),0,e.length),t=Pn(t),e.slice(r,r+t.length)==t}function op(e,t,r){var l=A.templateSettings;r&&dn(e,t,r)&&(t=a),e=bt(e),t=Eo({},t,l,Ts);var m=Eo({},t.imports,l.imports,Ts),T=Qt(m),j=No(m,T),Y,re,_e=0,we=t.interpolate||It,xe="__p += '",Le=Io((t.escape||It).source+"|"+we.source+"|"+(we===zr?Dt:It).source+"|"+(t.evaluate||It).source+"|$","g"),$e="//# sourceURL="+(xt.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ye+"]")+`
`;e.replace(Le,function(ze,it,ft,Dn,pn,$n){return ft||(ft=Dn),xe+=e.slice(_e,$n).replace(pr,Il),it&&(Y=!0,xe+=`' +
__e(`+it+`) +
'`),pn&&(re=!0,xe+=`';
`+pn+`;
__p += '`),ft&&(xe+=`' +
((__t = (`+ft+`)) == null ? '' : __t) +
'`),_e=$n+ze.length,ze}),xe+=`';
`;var Ke=xt.call(t,"variable")&&t.variable;Ke||(xe=`with (obj) {
`+xe+`
}
`),xe=(re?xe.replace(fn,""):xe).replace(Cr,"$1").replace(Ct,"$1;"),xe="function("+(Ke||"obj")+`) {
`+(Ke?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Y?", __e = _.escape":"")+(re?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+xe+`return __p
}`;var tt=wl(function(){return wt(T,$e+"return "+xe).apply(a,j)});if(tt.source=xe,ma(tt))throw tt;return tt}function ap(e){return bt(e).toLowerCase()}function sp(e){return bt(e).toUpperCase()}function lp(e,t,r){if(e=bt(e),e&&(r||t===a))return e.replace(zt,"");if(!e||!(t=Pn(t)))return e;var l=nr(e),m=nr(t),T=Na(l,m),j=Oa(l,m)+1;return ti(l,T,j).join("")}function up(e,t,r){if(e=bt(e),e&&(r||t===a))return e.replace(Er,"");if(!e||!(t=Pn(t)))return e;var l=nr(e),m=Oa(l,nr(t))+1;return ti(l,0,m).join("")}function cp(e,t,r){if(e=bt(e),e&&(r||t===a))return e.replace(Ar,"");if(!e||!(t=Pn(t)))return e;var l=nr(e),m=Na(l,nr(t));return ti(l,m).join("")}function fp(e,t){var r=I,l=J;if(Ft(t)){var m="separator"in t?t.separator:m;r="length"in t?Ye(t.length):r,l="omission"in t?Pn(t.omission):l}e=bt(e);var T=e.length;if(pi(e)){var j=nr(e);T=j.length}if(r>=T)return e;var Y=r-gi(l);if(Y<1)return l;var re=j?ti(j,0,Y).join(""):e.slice(0,Y);if(m===a)return re+l;if(j&&(Y+=re.length-Y),va(m)){if(e.slice(Y).search(m)){var _e,we=re;for(m.global||(m=Io(m.source,bt(cr.exec(m))+"g")),m.lastIndex=0;_e=m.exec(we);)var xe=_e.index;re=re.slice(0,xe===a?Y:xe)}}else if(e.indexOf(Pn(m),Y)!=Y){var Le=re.lastIndexOf(m);Le>-1&&(re=re.slice(0,Le))}return re+l}function hp(e){return e=bt(e),e&&Hr.test(e)?e.replace(An,Wl):e}var dp=xi(function(e,t,r){return e+(r?" ":"")+t.toUpperCase()}),wa=bs("toUpperCase");function _l(e,t,r){return e=bt(e),t=r?a:t,t===a?Pl(e)?Hl(e):Sl(e):e.match(t)||[]}var wl=nt(function(e,t){try{return lt(e,a,t)}catch(r){return ma(r)?r:new Je(r)}}),pp=Dr(function(e,t){return ut(t,function(r){r=xr(r),Pr(e,r,pa(e[r],e))}),e});function gp(e){var t=e==null?0:e.length,r=He();return e=t?vt(e,function(l){if(typeof l[1]!="function")throw new zn(L);return[r(l[0]),l[1]]}):[],nt(function(l){for(var m=-1;++m<t;){var T=e[m];if(lt(T[0],this,l))return lt(T[1],this,l)}})}function mp(e){return Wu(Kn(e,W))}function ba(e){return function(){return e}}function vp(e,t){return e==null||e!==e?t:e}var yp=Cs(),_p=Cs(!0);function Cn(e){return e}function xa(e){return Xa(typeof e=="function"?e:Kn(e,W))}function wp(e){return ts(Kn(e,W))}function bp(e,t){return ns(e,Kn(t,W))}var xp=nt(function(e,t){return function(r){return Fi(r,e,t)}}),Cp=nt(function(e,t){return function(r){return Fi(e,r,t)}});function Ca(e,t,r){var l=Qt(t),m=oo(t,l);r==null&&!(Ft(t)&&(m.length||!l.length))&&(r=t,t=e,e=this,m=oo(t,Qt(t)));var T=!(Ft(r)&&"chain"in r)||!!r.chain,j=Br(e);return ut(m,function(Y){var re=t[Y];e[Y]=re,j&&(e.prototype[Y]=function(){var _e=this.__chain__;if(T||_e){var we=e(this.__wrapped__),xe=we.__actions__=wn(this.__actions__);return xe.push({func:re,args:arguments,thisArg:e}),we.__chain__=_e,we}return re.apply(e,_n([this.value()],arguments))})}),e}function Ap(){return V._===this&&(V._=Jl),this}function Aa(){}function Ep(e){return e=Ye(e),nt(function(t){return rs(t,e)})}var Sp=ta(vt),kp=ta(Ge),Tp=ta(So);function bl(e){return la(e)?ko(xr(e)):rc(e)}function Rp(e){return function(t){return e==null?a:ui(e,t)}}var Lp=Es(),Np=Es(!0);function Ea(){return[]}function Sa(){return!1}function Op(){return{}}function Ip(){return""}function Fp(){return!0}function Pp(e,t){if(e=Ye(e),e<1||e>oe)return[];var r=be,l=un(e,be);t=He(t),e-=be;for(var m=Lo(l,t);++r<e;)t(r);return m}function Mp(e){return Ze(e)?vt(e,xr):Mn(e)?[e]:wn(Us(bt(e)))}function Dp(e){var t=++Vl;return bt(e)+t}var $p=fo(function(e,t){return e+t},0),Bp=na("ceil"),Wp=fo(function(e,t){return e/t},1),Up=na("floor");function jp(e){return e&&e.length?io(e,Cn,Uo):a}function Hp(e,t){return e&&e.length?io(e,He(t,2),Uo):a}function zp(e){return Ra(e,Cn)}function qp(e,t){return Ra(e,He(t,2))}function Kp(e){return e&&e.length?io(e,Cn,qo):a}function Vp(e,t){return e&&e.length?io(e,He(t,2),qo):a}var Gp=fo(function(e,t){return e*t},1),Jp=na("round"),Zp=fo(function(e,t){return e-t},0);function Qp(e){return e&&e.length?Ro(e,Cn):0}function Yp(e,t){return e&&e.length?Ro(e,He(t,2)):0}return A.after=wh,A.ary=Ys,A.assign=sd,A.assignIn=hl,A.assignInWith=Eo,A.assignWith=ld,A.at=ud,A.before=Xs,A.bind=pa,A.bindAll=pp,A.bindKey=el,A.castArray=Oh,A.chain=Js,A.chunk=Wc,A.compact=Uc,A.concat=jc,A.cond=gp,A.conforms=mp,A.constant=ba,A.countBy=Qf,A.create=cd,A.curry=tl,A.curryRight=nl,A.debounce=rl,A.defaults=fd,A.defaultsDeep=hd,A.defer=bh,A.delay=xh,A.difference=Hc,A.differenceBy=zc,A.differenceWith=qc,A.drop=Kc,A.dropRight=Vc,A.dropRightWhile=Gc,A.dropWhile=Jc,A.fill=Zc,A.filter=Xf,A.flatMap=nh,A.flatMapDeep=rh,A.flatMapDepth=ih,A.flatten=qs,A.flattenDeep=Qc,A.flattenDepth=Yc,A.flip=Ch,A.flow=yp,A.flowRight=_p,A.fromPairs=Xc,A.functions=_d,A.functionsIn=wd,A.groupBy=oh,A.initial=tf,A.intersection=nf,A.intersectionBy=rf,A.intersectionWith=of,A.invert=xd,A.invertBy=Cd,A.invokeMap=sh,A.iteratee=xa,A.keyBy=lh,A.keys=Qt,A.keysIn=xn,A.map=_o,A.mapKeys=Ed,A.mapValues=Sd,A.matches=wp,A.matchesProperty=bp,A.memoize=bo,A.merge=kd,A.mergeWith=dl,A.method=xp,A.methodOf=Cp,A.mixin=Ca,A.negate=xo,A.nthArg=Ep,A.omit=Td,A.omitBy=Rd,A.once=Ah,A.orderBy=uh,A.over=Sp,A.overArgs=Eh,A.overEvery=kp,A.overSome=Tp,A.partial=ga,A.partialRight=il,A.partition=ch,A.pick=Ld,A.pickBy=pl,A.property=bl,A.propertyOf=Rp,A.pull=uf,A.pullAll=Vs,A.pullAllBy=cf,A.pullAllWith=ff,A.pullAt=hf,A.range=Lp,A.rangeRight=Np,A.rearg=Sh,A.reject=dh,A.remove=df,A.rest=kh,A.reverse=ha,A.sampleSize=gh,A.set=Od,A.setWith=Id,A.shuffle=mh,A.slice=pf,A.sortBy=_h,A.sortedUniq=bf,A.sortedUniqBy=xf,A.split=np,A.spread=Th,A.tail=Cf,A.take=Af,A.takeRight=Ef,A.takeRightWhile=Sf,A.takeWhile=kf,A.tap=jf,A.throttle=Rh,A.thru=yo,A.toArray=ul,A.toPairs=gl,A.toPairsIn=ml,A.toPath=Mp,A.toPlainObject=fl,A.transform=Fd,A.unary=Lh,A.union=Tf,A.unionBy=Rf,A.unionWith=Lf,A.uniq=Nf,A.uniqBy=Of,A.uniqWith=If,A.unset=Pd,A.unzip=da,A.unzipWith=Gs,A.update=Md,A.updateWith=Dd,A.values=Ei,A.valuesIn=$d,A.without=Ff,A.words=_l,A.wrap=Nh,A.xor=Pf,A.xorBy=Mf,A.xorWith=Df,A.zip=$f,A.zipObject=Bf,A.zipObjectDeep=Wf,A.zipWith=Uf,A.entries=gl,A.entriesIn=ml,A.extend=hl,A.extendWith=Eo,Ca(A,A),A.add=$p,A.attempt=wl,A.camelCase=jd,A.capitalize=vl,A.ceil=Bp,A.clamp=Bd,A.clone=Ih,A.cloneDeep=Ph,A.cloneDeepWith=Mh,A.cloneWith=Fh,A.conformsTo=Dh,A.deburr=yl,A.defaultTo=vp,A.divide=Wp,A.endsWith=Hd,A.eq=ir,A.escape=zd,A.escapeRegExp=qd,A.every=Yf,A.find=eh,A.findIndex=Hs,A.findKey=dd,A.findLast=th,A.findLastIndex=zs,A.findLastKey=pd,A.floor=Up,A.forEach=Zs,A.forEachRight=Qs,A.forIn=gd,A.forInRight=md,A.forOwn=vd,A.forOwnRight=yd,A.get=ya,A.gt=$h,A.gte=Bh,A.has=bd,A.hasIn=_a,A.head=Ks,A.identity=Cn,A.includes=ah,A.indexOf=ef,A.inRange=Wd,A.invoke=Ad,A.isArguments=hi,A.isArray=Ze,A.isArrayBuffer=Wh,A.isArrayLike=bn,A.isArrayLikeObject=jt,A.isBoolean=Uh,A.isBuffer=ni,A.isDate=jh,A.isElement=Hh,A.isEmpty=zh,A.isEqual=qh,A.isEqualWith=Kh,A.isError=ma,A.isFinite=Vh,A.isFunction=Br,A.isInteger=ol,A.isLength=Co,A.isMap=al,A.isMatch=Gh,A.isMatchWith=Jh,A.isNaN=Zh,A.isNative=Qh,A.isNil=Xh,A.isNull=Yh,A.isNumber=sl,A.isObject=Ft,A.isObjectLike=$t,A.isPlainObject=Wi,A.isRegExp=va,A.isSafeInteger=ed,A.isSet=ll,A.isString=Ao,A.isSymbol=Mn,A.isTypedArray=Ai,A.isUndefined=td,A.isWeakMap=nd,A.isWeakSet=rd,A.join=af,A.kebabCase=Kd,A.last=Gn,A.lastIndexOf=sf,A.lowerCase=Vd,A.lowerFirst=Gd,A.lt=id,A.lte=od,A.max=jp,A.maxBy=Hp,A.mean=zp,A.meanBy=qp,A.min=Kp,A.minBy=Vp,A.stubArray=Ea,A.stubFalse=Sa,A.stubObject=Op,A.stubString=Ip,A.stubTrue=Fp,A.multiply=Gp,A.nth=lf,A.noConflict=Ap,A.noop=Aa,A.now=wo,A.pad=Jd,A.padEnd=Zd,A.padStart=Qd,A.parseInt=Yd,A.random=Ud,A.reduce=fh,A.reduceRight=hh,A.repeat=Xd,A.replace=ep,A.result=Nd,A.round=Jp,A.runInContext=ie,A.sample=ph,A.size=vh,A.snakeCase=tp,A.some=yh,A.sortedIndex=gf,A.sortedIndexBy=mf,A.sortedIndexOf=vf,A.sortedLastIndex=yf,A.sortedLastIndexBy=_f,A.sortedLastIndexOf=wf,A.startCase=rp,A.startsWith=ip,A.subtract=Zp,A.sum=Qp,A.sumBy=Yp,A.template=op,A.times=Pp,A.toFinite=Wr,A.toInteger=Ye,A.toLength=cl,A.toLower=ap,A.toNumber=Jn,A.toSafeInteger=ad,A.toString=bt,A.toUpper=sp,A.trim=lp,A.trimEnd=up,A.trimStart=cp,A.truncate=fp,A.unescape=hp,A.uniqueId=Dp,A.upperCase=dp,A.upperFirst=wa,A.each=Zs,A.eachRight=Qs,A.first=Ks,Ca(A,function(){var e={};return wr(A,function(t,r){xt.call(A.prototype,r)||(e[r]=t)}),e}(),{chain:!1}),A.VERSION=d,ut(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){A[e].placeholder=A}),ut(["drop","take"],function(e,t){at.prototype[e]=function(r){r=r===a?1:Jt(Ye(r),0);var l=this.__filtered__&&!t?new at(this):this.clone();return l.__filtered__?l.__takeCount__=un(r,l.__takeCount__):l.__views__.push({size:un(r,be),type:e+(l.__dir__<0?"Right":"")}),l},at.prototype[e+"Right"]=function(r){return this.reverse()[e](r).reverse()}}),ut(["filter","map","takeWhile"],function(e,t){var r=t+1,l=r==se||r==X;at.prototype[e]=function(m){var T=this.clone();return T.__iteratees__.push({iteratee:He(m,3),type:r}),T.__filtered__=T.__filtered__||l,T}}),ut(["head","last"],function(e,t){var r="take"+(t?"Right":"");at.prototype[e]=function(){return this[r](1).value()[0]}}),ut(["initial","tail"],function(e,t){var r="drop"+(t?"":"Right");at.prototype[e]=function(){return this.__filtered__?new at(this):this[r](1)}}),at.prototype.compact=function(){return this.filter(Cn)},at.prototype.find=function(e){return this.filter(e).head()},at.prototype.findLast=function(e){return this.reverse().find(e)},at.prototype.invokeMap=nt(function(e,t){return typeof e=="function"?new at(this):this.map(function(r){return Fi(r,e,t)})}),at.prototype.reject=function(e){return this.filter(xo(He(e)))},at.prototype.slice=function(e,t){e=Ye(e);var r=this;return r.__filtered__&&(e>0||t<0)?new at(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),t!==a&&(t=Ye(t),r=t<0?r.dropRight(-t):r.take(t-e)),r)},at.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},at.prototype.toArray=function(){return this.take(be)},wr(at.prototype,function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),l=/^(?:head|last)$/.test(t),m=A[l?"take"+(t=="last"?"Right":""):t],T=l||/^find/.test(t);!m||(A.prototype[t]=function(){var j=this.__wrapped__,Y=l?[1]:arguments,re=j instanceof at,_e=Y[0],we=re||Ze(j),xe=function(it){var ft=m.apply(A,_n([it],Y));return l&&Le?ft[0]:ft};we&&r&&typeof _e=="function"&&_e.length!=1&&(re=we=!1);var Le=this.__chain__,$e=!!this.__actions__.length,Ke=T&&!Le,tt=re&&!$e;if(!T&&we){j=tt?j:new at(this);var ze=e.apply(j,Y);return ze.__actions__.push({func:yo,args:[xe],thisArg:a}),new qn(ze,Le)}return Ke&&tt?e.apply(this,Y):(ze=this.thru(xe),Ke?l?ze.value()[0]:ze.value():ze)})}),ut(["pop","push","shift","sort","splice","unshift"],function(e){var t=Hi[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",l=/^(?:pop|shift)$/.test(e);A.prototype[e]=function(){var m=arguments;if(l&&!this.__chain__){var T=this.value();return t.apply(Ze(T)?T:[],m)}return this[r](function(j){return t.apply(Ze(j)?j:[],m)})}}),wr(at.prototype,function(e,t){var r=A[t];if(r){var l=r.name+"";xt.call(_i,l)||(_i[l]=[]),_i[l].push({name:t,func:r})}}),_i[co(a,B).name]=[{name:"wrapper",func:a}],at.prototype.clone=fu,at.prototype.reverse=hu,at.prototype.value=du,A.prototype.at=Hf,A.prototype.chain=zf,A.prototype.commit=qf,A.prototype.next=Kf,A.prototype.plant=Gf,A.prototype.reverse=Jf,A.prototype.toJSON=A.prototype.valueOf=A.prototype.value=Zf,A.prototype.first=A.prototype.head,ki&&(A.prototype[ki]=Vf),A},mi=zl();ce?((ce.exports=mi)._=mi,G._=mi):V._=mi}).call(commonjsGlobal)})(lodash,lodash.exports);Object.defineProperty(results,"__esModule",{value:!0});results.Value=results.Arity=void 0;const lodash_1$3=lodash.exports;class Arity{constructor(g,a){this.isRow=()=>this.rows>1&&this.cols===1,this.isColumn=()=>this.rows===1&&this.cols>1,this.isCell=()=>this.rows===1&&this.cols===1,this.rows=g,this.cols=a}}results.Arity=Arity;class Value{constructor(g){this.get=(a,d)=>this.val[a][d],this.getAsFloat=(a,d)=>{const v=parseFloat(this.get(a,d));return isNaN(v)?0:v},this.getAsInt=(a,d)=>{const v=parseInt(this.get(a,d));return isNaN(v)?0:v},this.getArity=()=>{const a=this.val.reduce((d,v)=>Math.max(d,v.length),0);return new Arity(this.val.length,a)},this.toString=()=>this.getArity().isCell()?this.get(0,0):`[${lodash_1$3.flatten(this.val).map(a=>a.trim()).filter(a=>a!=="").join(", ")}]`,this.val=g}}results.Value=Value;Object.defineProperty(algebraic_operation,"__esModule",{value:!0});algebraic_operation.AlgebraicOperation=void 0;const neverthrow_1$8=neverthrow,ast_utils_1$9=ast_utils,calc_1$3=calc,results_1$6=results,lodash_1$2=lodash.exports;class AlgebraicOperation{constructor(g,a){this.getValue=(L,E)=>{switch(this.operator){case"+":return this.add(L,E);case"-":return this.subtract(L,E);case"*":return this.multiply(L,E);case"/":return this.divide(L,E);default:return neverthrow_1$8.err(Error("Invalid algbraic operator: "+this.operator))}},this.withCellAndRange=(L,E,P,K,W)=>{const Q=this.leftSource.getValue(L,E);if(Q.isErr())return neverthrow_1$8.err(Q.error);const F=this.rightSource.getValue(L,E);if(F.isErr())return neverthrow_1$8.err(F.error);const q=Q.value.getArity(),H=F.value.getArity();if(!H.isCell()&&!q.isCell())return neverthrow_1$8.err(Error(`At least one operand in algebraic "${P}" must be a single cell.`));if(!H.isCell()&&!K)return neverthrow_1$8.err(Error(`Right operand in algebraic "${P}" must be a single cell.`));if(H.isCell()){const O=F.value.getAsFloat(0,0),k=lodash_1$2.map(Q.value.val,w=>lodash_1$2.map(w,N=>{let R=parseFloat(N);return isNaN(R)&&(R=0),W(R,O).toString()}));return neverthrow_1$8.ok(new results_1$6.Value(k))}const te=Q.value.getAsFloat(0,0),B=lodash_1$2.map(F.value.val,O=>lodash_1$2.map(O,k=>{let w=parseFloat(k);return isNaN(te)&&(w=0),W(te,w).toString()}));return neverthrow_1$8.ok(new results_1$6.Value(B))},this.add=(L,E)=>this.withCellAndRange(L,E,"add",!0,(P,K)=>P+K),this.subtract=(L,E)=>this.withCellAndRange(L,E,"subtract",!0,(P,K)=>P-K),this.multiply=(L,E)=>this.withCellAndRange(L,E,"multiply",!0,(P,K)=>P*K),this.divide=(L,E)=>this.withCellAndRange(L,E,"divide",!1,(P,K)=>P/K);const d=ast_utils_1$9.checkType(g,"algebraic_operation");if(d)throw d;const v=ast_utils_1$9.checkChildLength(g,3);if(v)throw v;const S=ast_utils_1$9.checkType(g.children[1],"algebraic_operator");if(S)throw S;this.operator=g.children[1].text;try{this.leftSource=new calc_1$3.Source(g.children[0],a),this.rightSource=new calc_1$3.Source(g.children[2],a)}catch(L){throw L}}}algebraic_operation.AlgebraicOperation=AlgebraicOperation;var conditional_function={};Object.defineProperty(conditional_function,"__esModule",{value:!0});conditional_function.ConditionalFunctionCall=void 0;const neverthrow_1$7=neverthrow,ast_utils_1$8=ast_utils,calc_1$2=calc;class ConditionalFunctionCall{constructor(g,a){this.getValue=(S,L)=>this.predicate.eval(S,L).andThen(E=>E?this.leftSource.getValue(S,L):this.rightSource.getValue(S,L));const d=ast_utils_1$8.checkType(g,"conditional_function_call");if(d)throw d;const v=ast_utils_1$8.checkChildLength(g,3);if(v)throw v;try{this.predicate=new Predicate(g.children[0],a),this.leftSource=new calc_1$2.Source(g.children[1],a),this.rightSource=new calc_1$2.Source(g.children[2],a)}catch(S){throw S}}}conditional_function.ConditionalFunctionCall=ConditionalFunctionCall;class Predicate{constructor(g,a){this.eval=(L,E)=>{const P=this.leftSource.getValue(L,E);if(P.isErr())return neverthrow_1$7.err(P.error);const K=this.rightSource.getValue(L,E);if(K.isErr())return neverthrow_1$7.err(K.error);const W=P.value.getArity(),Q=K.value.getArity();if(!W.isCell())return neverthrow_1$7.err(Error("Can only use comparison operator on a single cell. Left side is not a cell."));if(!Q.isCell())return neverthrow_1$7.err(Error("Can only use comparison operator on a single cell. Right side is not a cell."));const F=P.value.getAsFloat(0,0),q=K.value.getAsFloat(0,0);switch(this.operator){case">":return neverthrow_1$7.ok(F>q);case">=":return neverthrow_1$7.ok(F>=q);case"<":return neverthrow_1$7.ok(F<q);case"<=":return neverthrow_1$7.ok(F<=q);case"==":return neverthrow_1$7.ok(F===q);case"!=":return neverthrow_1$7.ok(F!==q);default:return neverthrow_1$7.err(Error("Invalid conditional operator: "+this.operator))}};const d=ast_utils_1$8.checkType(g,"predicate");if(d)throw d;const v=ast_utils_1$8.checkChildLength(g,3);if(v)throw v;const S=ast_utils_1$8.checkType(g.children[1],"conditional_operator");if(S)throw S;this.operator=g.children[1].text;try{this.leftSource=new calc_1$2.Source(g.children[0],a),this.rightSource=new calc_1$2.Source(g.children[2],a)}catch(L){throw L}}}var constant={};Object.defineProperty(constant,"__esModule",{value:!0});constant.Constant=void 0;const neverthrow_1$6=neverthrow,ast_utils_1$7=ast_utils,results_1$5=results;class Constant{constructor(g,a){const d=ast_utils_1$7.checkType(g,"real","float");if(d)throw d;const v=g.text[0]==="-"?-1:1;g.type==="real"?this.value=v*parseInt(g.children[0].text):this.value=v*parseFloat(g.children[0].text+"."+g.children[1].text)}getValue(g,a){return neverthrow_1$6.ok(new results_1$5.Value([[this.value.toString()]]))}}constant.Constant=Constant;var destination={},column={};Object.defineProperty(column,"__esModule",{value:!0});column.AbsoluteColumn=column.Column=column.newColumn=void 0;const neverthrow_1$5=neverthrow,ast_utils_1$6=ast_utils,results_1$4=results,newColumn=(f,g)=>{try{switch(f.type){case"relative_column":return neverthrow_1$5.ok(new RelativeColumn(f,g));case"absolute_column":return neverthrow_1$5.ok(new AbsoluteColumn(f,g));default:return neverthrow_1$5.err(new Error(`Formula element '${f.text}' is a ${f.type} but expected an relatve_column or absolute_column in this position.`))}}catch(a){return neverthrow_1$5.err(a)}};column.newColumn=newColumn;class Column{constructor(){this.getValue=(g,a)=>{var d;const v=((d=g.getCellAt(a.row,this.getIndex(a)))===null||d===void 0?void 0:d.toText())||"";return neverthrow_1$5.ok(new results_1$4.Value([[v]]))}}}column.Column=Column;class RelativeColumn extends Column{constructor(g,a){super();this.getIndex=L=>L.column+this.offset,this.getAbsoluteIndex=()=>neverthrow_1$5.err(ast_utils_1$6.errRelativeReferenceIndex);const d=ast_utils_1$6.checkType(g,"relative_column");if(d)throw d;const v=ast_utils_1$6.checkChildLength(g,1);if(v)throw v;const S=g.text[1]==="-"?-1:1;this.offset=S*parseInt(g.children[0].text)}}class AbsoluteColumn extends Column{constructor(g,a){super();this.getIndex=S=>this.index,this.getAbsoluteIndex=()=>neverthrow_1$5.ok(this.index);let d=-1,v="";switch(g.children.length){case 0:v=g.text[1];break;case 1:const S=ast_utils_1$6.checkType(g.children[0],"int");if(S)throw neverthrow_1$5.err(S);d=parseInt(g.children[0].text);break;default:throw new Error(`Formula element '${g.text}' is a ${g.type} but expected a 'absolute_column' in this position.`)}switch(v){case"":break;case"<":d=1;break;case">":d=a.getWidth();break;default:throw new Error(`Invalid column symbol '${v}'`)}if(d===0)throw ast_utils_1$6.errIndex0;this.index=d-1}}column.AbsoluteColumn=AbsoluteColumn;var range={},reference={},row={};Object.defineProperty(row,"__esModule",{value:!0});row.AbsoluteRow=row.Row=row.newRow=void 0;const neverthrow_1$4=neverthrow,ast_utils_1$5=ast_utils,results_1$3=results,newRow=(f,g)=>{try{switch(f.type){case"relative_row":return neverthrow_1$4.ok(new RelativeRow(f,g));case"absolute_row":return neverthrow_1$4.ok(new AbsoluteRow(f,g));default:return neverthrow_1$4.err(new Error(`Formula element '${f.text}' is a ${f.type} but expected an relatve_row or absolute_row  in this position.`))}}catch(a){return neverthrow_1$4.err(a)}};row.newRow=newRow;class Row{constructor(){this.getValue=(g,a)=>{var d;const v=((d=g.getCellAt(this.getIndex(a),a.column))===null||d===void 0?void 0:d.toText())||"";return neverthrow_1$4.ok(new results_1$3.Value([[v]]))}}}row.Row=Row;class RelativeRow extends Row{constructor(g,a){super();this.getIndex=L=>L.row+this.offset,this.getAbsoluteIndex=()=>neverthrow_1$4.err(ast_utils_1$5.errRelativeReferenceIndex);const d=ast_utils_1$5.checkType(g,"relative_row");if(d)throw d;const v=ast_utils_1$5.checkChildLength(g,1);if(v)throw v;const S=g.text[1]==="-"?-1:1;this.offset=S*parseInt(g.children[0].text)}}class AbsoluteRow extends Row{constructor(g,a){super();this.getIndex=S=>this.index,this.getAbsoluteIndex=()=>neverthrow_1$4.ok(this.index);let d=-1,v="";switch(g.children.length){case 0:v=g.text[1];break;case 1:const S=ast_utils_1$5.checkType(g.children[0],"int");if(S)throw neverthrow_1$4.err(S);d=parseInt(g.children[0].text);break;default:throw new Error(`Formula element '${g.text}' is a ${g.type} but expected a 'absolute_row' in this position.`)}switch(v){case"":break;case"<":d=1;break;case">":d=a.getHeight()-1;break;case"I":d=2;break;default:throw new Error(`Invalid row symbol '${v}'`)}if(d===0)throw ast_utils_1$5.errIndex0;d===1?this.index=0:this.index=d}}row.AbsoluteRow=AbsoluteRow;Object.defineProperty(reference,"__esModule",{value:!0});reference.Reference=void 0;const neverthrow_1$3=neverthrow,ast_utils_1$4=ast_utils,column_1$1=column,results_1$2=results,row_1$1=row;class Reference{constructor(g,a){this.getValue=(v,S)=>{var L;const E={row:this.row?this.row.getIndex(S):S.row,column:this.column?this.column.getIndex(S):S.column},P=((L=v.getCellAt(E.row,E.column))===null||L===void 0?void 0:L.toText())||"";return neverthrow_1$3.ok(new results_1$2.Value([[P]]))};const d=ast_utils_1$4.checkType(g,"source_reference","absolute_reference","relative_reference");if(d)throw d;for(let v=0;v<g.children.length;v++){const S=g.children[v];switch(S.type){case"relative_row":case"absolute_row":if(this.row!==void 0)throw Error("Reference may only have at most 1 row, more than 1 provided");const L=row_1$1.newRow(S,a);if(L.isErr()){if(L.error===ast_utils_1$4.errIndex0)break;throw L.error}this.row=L.value;break;case"relative_column":case"absolute_column":if(this.column!==void 0)throw Error("Reference may only have at most 1 column, more than 1 provided");const E=column_1$1.newColumn(S,a);if(E.isErr()){if(E.error===ast_utils_1$4.errIndex0)break;throw E.error}this.column=E.value;break}}}}reference.Reference=Reference;Object.defineProperty(range,"__esModule",{value:!0});range.Range=void 0;const neverthrow_1$2=neverthrow,ast_utils_1$3=ast_utils,reference_1=reference,results_1$1=results,lodash_1$1=lodash.exports;class Range{constructor(g,a){this.getValue=(K,W)=>{const Q=this.startColumn?this.startColumn.getIndex(W):W.column,F=this.endColumn?this.endColumn.getIndex(W):Q,q=this.startRow?this.startRow.getIndex(W):W.row,H=this.endRow?this.endRow.getIndex(W):W.row;return neverthrow_1$2.ok(new results_1$1.Value(lodash_1$1.map(lodash_1$1.range(q,H+1),te=>lodash_1$1.map(lodash_1$1.range(Q,F+1),B=>{var O;return((O=K.getCellAt(te,B))===null||O===void 0?void 0:O.toText())||""}))))},this.asCells=()=>{if(!this.startColumn||!this.startRow||!this.endRow)return neverthrow_1$2.err(new Error("A range used as a desintation must define rows and cells"));let K=this.endColumn;K||(K=this.startColumn);const W=this.startRow.getAbsoluteIndex(),Q=this.endRow.getAbsoluteIndex(),F=this.startColumn.getAbsoluteIndex(),q=K.getAbsoluteIndex();if(W.isErr()||Q.isErr()||F.isErr()||q.isErr())return neverthrow_1$2.err(new Error("A relative range can not be used in a formula destination"));const H=Math.min(W.value,Q.value),te=Math.max(W.value,Q.value),B=Math.min(F.value,q.value),O=Math.max(F.value,q.value);return neverthrow_1$2.ok(lodash_1$1.flatMap(lodash_1$1.range(H,te+1),k=>lodash_1$1.range(B,O+1).map(w=>({row:k,column:w}))))};let d=ast_utils_1$3.checkType(g,"range");if(d)throw d;let v=ast_utils_1$3.checkChildLength(g,2);if(v)throw v;const S=g.children[0],L=g.children[1];if(d=ast_utils_1$3.checkType(S,"source_reference"),d||(d=ast_utils_1$3.checkType(L,"source_reference"),d))throw d;if(v=ast_utils_1$3.checkChildLength(S,1),v||(v=ast_utils_1$3.checkChildLength(L,1),v))throw v;const E=new reference_1.Reference(S.children[0],a),P=new reference_1.Reference(L.children[0],a);if(E.row&&!P.row||P.row&&!E.row)throw new Error("Range must use references of the same kind");if(!E.row&&!E.column)throw console.log(E),new Error("Range must have a row or a column defined");E.row&&(this.startRow=E.row),E.column&&(this.startColumn=E.column),P.row&&(this.endRow=P.row),P.column?this.endColumn=P.column:this.endColumn=E.column}}range.Range=Range;Object.defineProperty(destination,"__esModule",{value:!0});destination.RangeDestination=destination.CellDestination=destination.ColumnDestination=destination.RowDestination=destination.newDestination=void 0;const neverthrow_1$1=neverthrow,ast_utils_1$2=ast_utils,column_1=column,range_1$1=range,row_1=row,lodash_1=lodash.exports,newDestination=(f,g,a)=>{const d=ast_utils_1$2.checkType(f,"destination");if(d)return neverthrow_1$1.err(d);const v=ast_utils_1$2.checkChildLength(f,1);if(v)return neverthrow_1$1.err(v);const S=f.children[0];if(S.type==="range")return neverthrow_1$1.ok(new RangeDestination(S,g,a));try{switch(S.children.length){case 2:return neverthrow_1$1.ok(new CellDestination(S,g,a));case 1:const L=S.children[0];if(L.type==="absolute_row")return neverthrow_1$1.ok(new RowDestination(S,g,a));if(L.type==="absolute_column")return neverthrow_1$1.ok(new ColumnDestination(S,g,a));default:return neverthrow_1$1.err(new Error("Unexpected destination type "+S.type))}}catch(L){return L===ast_utils_1$2.errIndex0?neverthrow_1$1.err(new Error("Index 0 may not be used in a destination")):neverthrow_1$1.err(L)}};destination.newDestination=newDestination;class RowDestination{constructor(g,a,d){this.merge=(E,P)=>{const K=lodash_1.range(0,P.getWidth()).map(W=>({row:this.row.index,column:W}));return mergeForCells(E,P,K,this.formatter)},this.formatter=d;const v=ast_utils_1$2.checkType(g,"absolute_reference");if(v)throw v;const S=ast_utils_1$2.checkChildLength(g,1);if(S)throw S;const L=g.children[0];try{this.row=new row_1.AbsoluteRow(L,a)}catch(E){throw E}}}destination.RowDestination=RowDestination;class ColumnDestination{constructor(g,a,d){this.merge=(E,P)=>{const K=lodash_1.range(2,P.getHeight()).map(W=>({row:W,column:this.column.index}));return mergeForCells(E,P,K,this.formatter)},this.formatter=d;const v=ast_utils_1$2.checkType(g,"absolute_reference");if(v)throw v;const S=ast_utils_1$2.checkChildLength(g,1);if(S)throw S;const L=g.children[0];try{this.column=new column_1.AbsoluteColumn(L,a)}catch(E){throw E}}}destination.ColumnDestination=ColumnDestination;class CellDestination{constructor(g,a,d){this.merge=(P,K)=>{const W={row:this.row.index,column:this.column.index};return mergeForCells(P,K,[W],this.formatter)},this.formatter=d;const v=ast_utils_1$2.checkType(g,"absolute_reference");if(v)throw v;const S=ast_utils_1$2.checkChildLength(g,2);if(S)throw S;const L=g.children[0],E=g.children[1];try{this.row=new row_1.AbsoluteRow(L,a),this.column=new column_1.AbsoluteColumn(E,a)}catch(P){throw P}}}destination.CellDestination=CellDestination;class RangeDestination{constructor(g,a,d){this.merge=(L,E)=>this.range.asCells().andThen(P=>mergeForCells(L,E,P,this.formatter)),this.formatter=d;const v=ast_utils_1$2.checkType(g,"range");if(v)throw v;const S=ast_utils_1$2.checkChildLength(g,2);if(S)throw S;g.children.forEach(L=>{let E=ast_utils_1$2.checkType(L,"source_reference");if(E)throw E;const P=ast_utils_1$2.checkChildLength(L,1);if(P)throw P;if(E=ast_utils_1$2.checkType(L.children[0],"absolute_reference"),E)throw E}),this.range=new range_1$1.Range(g,a)}}destination.RangeDestination=RangeDestination;const mergeForCells=(f,g,a,d)=>a.reduce((v,S)=>v.andThen(L=>f.getValue(L,S).andThen(E=>neverthrow_1$1.ok(E.toString())).andThen(E=>neverthrow_1$1.ok(E.trim()===""?"0":E)).andThen(E=>neverthrow_1$1.ok(L.setCellAt(S.row,S.column,d.format(E))))),neverthrow_1$1.ok(g));var display_directive={};Object.defineProperty(display_directive,"__esModule",{value:!0});display_directive.DisplayDirective=display_directive.DefaultFormatter=void 0;const ast_utils_1$1=ast_utils;class DefaultFormatter{constructor(){this.format=g=>typeof g=="string"?g:g.toString()}}display_directive.DefaultFormatter=DefaultFormatter;class DisplayDirective{constructor(g){this.format=E=>typeof E=="string"?parseFloat(E).toFixed(this.decimalLength):E.toFixed(this.decimalLength);let a=ast_utils_1$1.checkType(g,"display_directive");if(a)throw a;let d=ast_utils_1$1.checkChildLength(g,1);if(d)throw d;const v=g.children[0];if(a=ast_utils_1$1.checkType(v,"display_directive_option"),a)throw a;if(d=ast_utils_1$1.checkChildLength(v,1),d)throw d;const S=v.children[0];if(a=ast_utils_1$1.checkType(S,"formatting_directive"),a)throw a;if(d=ast_utils_1$1.checkChildLength(S,1),d)throw d;const L=S.children[0];if(a=ast_utils_1$1.checkType(L,"int"),a)throw a;this.decimalLength=parseInt(L.text)}}display_directive.DisplayDirective=DisplayDirective;var single_param_function={};Object.defineProperty(single_param_function,"__esModule",{value:!0});single_param_function.SingleParamFunctionCall=void 0;const neverthrow_1=neverthrow,ast_utils_1=ast_utils,calc_1$1=calc,results_1=results;class SingleParamFunctionCall{constructor(g,a){this.getValue=(E,P)=>this.param.getValue(E,P).andThen(K=>neverthrow_1.ok(this.op(K)));const d=ast_utils_1.checkType(g,"single_param_function_call");if(d)throw d;const v=ast_utils_1.checkChildLength(g,2);if(v)throw v;const S=ast_utils_1.checkType(g.children[0],"single_param_function");if(S)throw S;const L=g.children[0].text;switch(L){case"sum":this.op=sum;break;case"mean":this.op=mean;break;default:throw Error("Unknown single param function call: "+L)}this.param=new calc_1$1.Source(g.children[1],a)}}single_param_function.SingleParamFunctionCall=SingleParamFunctionCall;const sum=f=>{const g=f.val.reduce((a,d)=>d.reduce((v,S)=>{let L=parseFloat(S);return isNaN(L)&&(L=0),v+L},a),0);return new results_1.Value([[g.toString()]])},mean=f=>{const{total:g,count:a}=f.val.reduce(({total:d,count:v},S)=>S.reduce(({total:L,count:E},P)=>({total:L+ +P,count:E+1}),{total:d,count:v}),{total:0,count:0});return new results_1.Value([[(g/a).toString()]])};var dist={},Parser$1={},TokenError$1={};Object.defineProperty(TokenError$1,"__esModule",{value:!0});TokenError$1.TokenError=void 0;class TokenError extends Error{constructor(g,a){super(g);if(this.message=g,this.token=a,a&&a.errors)a.errors.push(this);else throw this}inspect(){return"SyntaxError: "+this.message}}TokenError$1.TokenError=TokenError;Object.defineProperty(Parser$1,"__esModule",{value:!0});Parser$1.Parser=Parser$1.findRuleByName=Parser$1.parseRuleName=Parser$1.escapeRegExp=Parser$1.readToken=void 0;const UPPER_SNAKE_RE=/^[A-Z0-9_]+$/,decorationRE=/(\?|\+|\*)$/,preDecorationRE=/^(@|&|!)/,WS_RULE="WS",TokenError_1$1=TokenError$1;function readToken(f,g){let a=g.exec(f);return a&&a.index==0?a[0].length==0&&g.source.length>0?null:{type:null,text:a[0],rest:f.substr(a[0].length),start:0,end:a[0].length-1,fullText:a[0],errors:[],children:[],parent:null}:null}Parser$1.readToken=readToken;function escapeRegExp(f){return f.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}Parser$1.escapeRegExp=escapeRegExp;function fixRest(f){f.rest="",f.children&&f.children.forEach(g=>fixRest(g))}function fixPositions(f,g){f.start+=g,f.end+=g,f.children&&f.children.forEach(a=>fixPositions(a,f.start))}function agregateErrors(f,g){g.errors&&g.errors.length&&g.errors.forEach(a=>f.push(a)),g.children&&g.children.forEach(a=>agregateErrors(f,a))}function parseRuleName(f){let g=decorationRE.exec(f),a=preDecorationRE.exec(f),d=g&&g[0]||"",v=a&&a[0]||"",S={raw:f,name:f.replace(decorationRE,"").replace(preDecorationRE,""),isOptional:d=="?"||d=="*",allowRepetition:d=="+"||d=="*",atLeastOne:d=="+",lookupPositive:v=="&",lookupNegative:v=="!",pinned:v=="@",lookup:!1,isLiteral:!1};return S.isLiteral=S.name[0]=="'"||S.name[0]=='"',S.lookup=S.lookupNegative||S.lookupPositive,S}Parser$1.parseRuleName=parseRuleName;function findRuleByName(f,g){let a=parseRuleName(f);return g.cachedRules[a.name]||null}Parser$1.findRuleByName=findRuleByName;function stripRules(f,g){if(f.children){let a=f.children.filter(d=>d.type&&g.test(d.type));for(let d=0;d<a.length;d++){let v=f.children.indexOf(a[d]);v!=-1&&f.children.splice(v,1)}f.children.forEach(d=>stripRules(d,g))}}const ignoreMissingRules=["EOF"];class Parser{constructor(f,g){this.grammarRules=f,this.options=g,this.cachedRules={},this.debug=g?g.debug===!0:!1;let a=[],d=[];if(f.forEach(v=>{let S=parseRuleName(v.name);if(S.name in this.cachedRules){a.push("Duplicated rule "+S.name);return}else this.cachedRules[S.name]=v;if(!v.bnf||!v.bnf.length){let L="Missing rule content, rule: "+v.name;a.indexOf(L)==-1&&a.push(L)}else v.bnf.forEach(L=>{if(typeof L[0]=="string"&&parseRuleName(L[0]).name==v.name){let P="Left recursion is not allowed, rule: "+v.name;a.indexOf(P)==-1&&a.push(P)}L.forEach(E=>{if(typeof E=="string"){let P=parseRuleName(E);!P.isLiteral&&d.indexOf(P.name)==-1&&ignoreMissingRules.indexOf(P.name)==-1&&d.push(P.name)}})});WS_RULE==v.name&&(v.implicitWs=!1),v.implicitWs&&d.indexOf(WS_RULE)==-1&&d.push(WS_RULE),v.recover&&d.indexOf(v.recover)==-1&&d.push(v.recover)}),d.forEach(v=>{v in this.cachedRules||a.push("Missing rule "+v)}),a.length)throw new Error(a.join(`
`))}getAST(f,g){g||(g=this.grammarRules.filter(d=>!d.fragment&&d.name.indexOf("%")!=0)[0].name);let a=this.parse(f,g);if(a){agregateErrors(a.errors,a),fixPositions(a,0),stripRules(a,/^%/),(!this.options||!this.options.keepUpperRules)&&stripRules(a,UPPER_SNAKE_RE);let d=a.rest;d&&new TokenError_1$1.TokenError(`Unexpected end of input: 
`+d,a),fixRest(a),a.rest=d}return a}emitSource(){return"CANNOT EMIT SOURCE FROM BASE Parser"}parse(txt,target,recursion=0){let out=null,type=parseRuleName(target),expr,printable=this.debug&&!UPPER_SNAKE_RE.test(type.name);printable&&console.log(new Array(recursion).join("\u2502  ")+"Trying to get "+target+" from "+JSON.stringify(txt.split(`
`)[0]));let realType=type.name,targetLex=findRuleByName(type.name,this);if(type.name=="EOF"){if(txt.length)return null;if(txt.length==0)return{type:"EOF",text:"",rest:"",start:0,end:0,fullText:"",errors:[],children:[],parent:null}}try{if(!targetLex&&type.isLiteral){let src=eval(type.name);if(src==="")return{type:"%%EMPTY%%",text:"",rest:txt,start:0,end:0,fullText:"",errors:[],children:[],parent:null};expr=new RegExp(escapeRegExp(src)),realType=null}}catch(f){return f instanceof ReferenceError&&console.error(f),null}if(expr){let f=readToken(txt,expr);if(f)return f.type=realType,f}else{let f=targetLex.bnf;f instanceof Array&&f.forEach(g=>{if(out)return;let a=null,d={type:type.name,text:"",children:[],end:0,errors:[],fullText:"",parent:null,start:0,rest:txt};targetLex.fragment&&(d.fragment=!0);let v=txt,S=0,L=g.length>0,E=!1;for(let P=0;P<g.length;P++)if(typeof g[P]=="string"){let K=parseRuleName(g[P]);L=L&&K.isOptional;let W,Q=!1;do{if(W=null,targetLex.implicitWs&&(W=this.parse(v,K.name,recursion+1),!W)){let F;do if(F=this.parse(v,WS_RULE,recursion+1),F)d.text=d.text+F.text,d.end=d.text.length,F.parent=d,d.children.push(F),v=v.substr(F.text.length),S+=F.text.length;else break;while(F&&F.text.length)}if(W=W||this.parse(v,K.name,recursion+1),K.lookupNegative){if(W)return;break}if(K.lookupPositive&&!W)return;if(!W&&(K.isOptional||K.atLeastOne&&Q))break;if(W&&targetLex.pinned==P+1&&(a=W,printable&&console.log(new Array(recursion+1).join("\u2502  ")+"\u2514\u2500 "+W.type+" PINNED")),W||(W=this.parseRecovery(targetLex,v,recursion+1)),!W)if(a)out=d,W={type:"SyntaxError",text:v,children:[],end:v.length,errors:[],fullText:"",parent:null,start:0,rest:""},v.length?new TokenError_1$1.TokenError(`Unexpected end of input. Expecting ${K.name} Got: ${v}`,W):new TokenError_1$1.TokenError(`Unexpected end of input. Missing ${K.name}`,W),printable&&console.log(new Array(recursion+1).join("\u2502  ")+"\u2514\u2500 "+W.type+" "+JSON.stringify(W.text));else return;if(Q=!0,E=!0,W.type=="%%EMPTY%%")break;W.start+=S,W.end+=S,!K.lookupPositive&&W.type&&(W.fragment?W.children&&W.children.forEach(F=>{F.start+=S,F.end+=S,F.parent=d,d.children.push(F)}):(W.parent=d,d.children.push(W))),K.lookup&&(W.lookup=!0),printable&&console.log(new Array(recursion+1).join("\u2502  ")+"\u2514\u2500 "+W.type+" "+JSON.stringify(W.text)),!K.lookup&&!W.lookup&&(d.text=d.text+W.text,d.end=d.text.length,v=v.substr(W.text.length),S+=W.text.length),d.rest=v}while(W&&K.allowRepetition&&v.length&&!W.lookup)}else{let K=readToken(v,g[P]);if(!K)return;printable&&console.log(new Array(recursion+1).join("\u2502  ")+"\u2514> "+JSON.stringify(K.text)+g[P].source),E=!0,K.start+=S,K.end+=S,d.text=d.text+K.text,d.end=d.text.length,v=v.substr(K.text.length),S+=K.text.length,d.rest=v}E&&(out=d,printable&&console.log(new Array(recursion).join("\u2502  ")+"\u251C<\u2500\u2534< PUSHING "+out.type+" "+JSON.stringify(out.text)))}),out&&targetLex.simplifyWhenOneChildren&&out.children.length==1&&(out=out.children[0])}return out||printable&&console.log(target+" NOT RESOLVED FROM "+txt),out}parseRecovery(f,g,a){if(f.recover&&g.length){let d=this.debug;d&&console.log(new Array(a+1).join("\u2502  ")+"Trying to recover until token "+f.recover+" from "+JSON.stringify(g.split(`
`)[0]+g.split(`
`)[1]));let v={type:"SyntaxError",text:"",children:[],end:0,errors:[],fullText:"",parent:null,start:0,rest:""},S;do if(S=this.parse(g,f.recover,a+1),S){new TokenError_1$1.TokenError('Unexpected input: "'+v.text+`" Expecting: ${f.name}`,v);break}else v.text=v.text+g[0],v.end=v.text.length,g=g.substr(1);while(!S&&g.length>0);if(v.text.length>0&&S)return d&&console.log(new Array(a+1).join("\u2502  ")+"Recovered text: "+JSON.stringify(v.text)),v}return null}}Parser$1.Parser=Parser;Parser$1.default=Parser;var Grammars={},BNF$3={},SemanticHelpers={};Object.defineProperty(SemanticHelpers,"__esModule",{value:!0});SemanticHelpers.findChildrenByType=void 0;function findChildrenByType(f,g){return f.children?f.children.filter(a=>a.type==g):[]}SemanticHelpers.findChildrenByType=findChildrenByType;Object.defineProperty(BNF$3,"__esModule",{value:!0});const SemanticHelpers_1=SemanticHelpers,Parser_1$2=Parser$1;var BNF$2;(function(f){f.RULES=[{name:"syntax",bnf:[["RULE_EOL*","rule+"]]},{name:"rule",bnf:[['" "*','"<"',"rule-name",'">"','" "*','"::="',"firstExpression","otherExpression*",'" "*',"RULE_EOL+",'" "*']]},{name:"firstExpression",bnf:[['" "*',"list"]]},{name:"otherExpression",bnf:[['" "*','"|"','" "*',"list"]]},{name:"RULE_EOL",bnf:[['"\\r"'],['"\\n"']]},{name:"list",bnf:[["term",'" "*',"list"],["term"]]},{name:"term",bnf:[["literal"],['"<"',"rule-name",'">"']]},{name:"literal",bnf:[[`'"'`,"RULE_CHARACTER1*",`'"'`],[`"'"`,"RULE_CHARACTER2*",`"'"`]]},{name:"RULE_CHARACTER",bnf:[['" "'],["RULE_LETTER"],["RULE_DIGIT"],["RULE_SYMBOL"]]},{name:"RULE_LETTER",bnf:[['"A"'],['"B"'],['"C"'],['"D"'],['"E"'],['"F"'],['"G"'],['"H"'],['"I"'],['"J"'],['"K"'],['"L"'],['"M"'],['"N"'],['"O"'],['"P"'],['"Q"'],['"R"'],['"S"'],['"T"'],['"U"'],['"V"'],['"W"'],['"X"'],['"Y"'],['"Z"'],['"a"'],['"b"'],['"c"'],['"d"'],['"e"'],['"f"'],['"g"'],['"h"'],['"i"'],['"j"'],['"k"'],['"l"'],['"m"'],['"n"'],['"o"'],['"p"'],['"q"'],['"r"'],['"s"'],['"t"'],['"u"'],['"v"'],['"w"'],['"x"'],['"y"'],['"z"']]},{name:"RULE_DIGIT",bnf:[['"0"'],['"1"'],['"2"'],['"3"'],['"4"'],['"5"'],['"6"'],['"7"'],['"8"'],['"9"']]},{name:"RULE_SYMBOL",bnf:[['"-"'],['"_"'],['"!"'],['"#"'],['"$"'],['"%"'],['"&"'],['"("'],['")"'],['"*"'],['"+"'],['","'],['"-"'],['"."'],['"/"'],['":"'],['";"'],['"<"'],['"="'],['">"'],['"?"'],['"@"'],['"["'],['"\\"'],['"]"'],['"^"'],['"_"'],['"`"'],['"{"'],['"|"'],['"}"'],['"~"']]},{name:"RULE_CHARACTER1",bnf:[["RULE_CHARACTER"],[`"'"`]]},{name:"RULE_CHARACTER2",bnf:[["RULE_CHARACTER"],[`'"'`]]},{name:"rule-name",bnf:[["RULE_LETTER","RULE_CHAR*"]]},{name:"RULE_CHAR",bnf:[["RULE_LETTER"],["RULE_DIGIT"],['"_"'],['"-"']]}],f.defaultParser=new Parser_1$2.Parser(f.RULES,{debug:!1});function g(S){let L=SemanticHelpers_1.findChildrenByType(S,"term").map(E=>SemanticHelpers_1.findChildrenByType(E,"literal").concat(SemanticHelpers_1.findChildrenByType(E,"rule-name"))[0].text);return SemanticHelpers_1.findChildrenByType(S,"list").forEach(E=>{L=L.concat(g(E))}),L}function a(S,L=f.defaultParser){let E=L.getAST(S);if(!E)throw new Error("Could not parse "+S);if(E.errors&&E.errors.length)throw E.errors[0];let K=SemanticHelpers_1.findChildrenByType(E,"rule").map(W=>{let Q=SemanticHelpers_1.findChildrenByType(W,"rule-name")[0].text,F=SemanticHelpers_1.findChildrenByType(W,"firstExpression").concat(SemanticHelpers_1.findChildrenByType(W,"otherExpression")),q=[];return F.forEach(H=>{q.push(g(H))}),{name:Q,bnf:q}});return K.some(W=>W.name=="EOL")||K.push({name:"EOL",bnf:[['"\\r\\n"','"\\r"','"\\n"']]}),K}f.getRules=a;function d(S,L=f.defaultParser){return a(S.join(""),L)}f.Transform=d;class v extends Parser_1$2.Parser{constructor(L,E){const P=E&&E.debugRulesParser===!0?new Parser_1$2.Parser(f.RULES,{debug:!0}):f.defaultParser;super(a(L,P),E);this.source=L}emitSource(){return this.source}}f.Parser=v})(BNF$2||(BNF$2={}));BNF$3.default=BNF$2;var W3CEBNF={};Object.defineProperty(W3CEBNF,"__esModule",{value:!0});const Parser_1$1=Parser$1;var BNF$1;(function(f){f.RULES=[{name:"Grammar",bnf:[["RULE_S*","%Atomic*","EOF"]]},{name:"%Atomic",bnf:[["Production","RULE_S*"]],fragment:!0},{name:"Production",bnf:[["NCName","RULE_S*",'"::="',"RULE_WHITESPACE*","Choice","RULE_WHITESPACE*","RULE_EOL+","RULE_S*"]]},{name:"NCName",bnf:[[/[a-zA-Z][a-zA-Z_0-9]*/]]},{name:"Choice",bnf:[["SequenceOrDifference","%_Choice_1*"]],fragment:!0},{name:"%_Choice_1",bnf:[["RULE_WHITESPACE*",'"|"',"RULE_WHITESPACE*","SequenceOrDifference"]],fragment:!0},{name:"SequenceOrDifference",bnf:[["Item","RULE_WHITESPACE*","%_Item_1?"]]},{name:"%_Item_1",bnf:[["Minus","Item"],["Item*"]],fragment:!0},{name:"Minus",bnf:[['"-"']]},{name:"Item",bnf:[["RULE_WHITESPACE*","%Primary","PrimaryDecoration?"]],fragment:!0},{name:"PrimaryDecoration",bnf:[['"?"'],['"*"'],['"+"']]},{name:"DecorationName",bnf:[['"ebnf://"',/[^\x5D#]+/]]},{name:"%Primary",bnf:[["NCName"],["StringLiteral"],["CharCode"],["CharClass"],["SubItem"]],fragment:!0},{name:"SubItem",bnf:[['"("',"RULE_WHITESPACE*","Choice","RULE_WHITESPACE*",'")"']]},{name:"StringLiteral",bnf:[[`'"'`,/[^"]*/,`'"'`],[`"'"`,/[^']*/,`"'"`]],pinned:1},{name:"CharCode",bnf:[['"#x"',/[0-9a-zA-Z]+/]]},{name:"CharClass",bnf:[["'['","'^'?","%RULE_CharClass_1+",'"]"']]},{name:"%RULE_CharClass_1",bnf:[["CharCodeRange"],["CharRange"],["CharCode"],["RULE_Char"]],fragment:!0},{name:"RULE_Char",bnf:[[/\x09/],[/\x0A/],[/\x0D/],[/[\x20-\x5c]/],[/[\x5e-\uD7FF]/],[/[\uE000-\uFFFD]/]]},{name:"CharRange",bnf:[["RULE_Char",'"-"',"RULE_Char"]]},{name:"CharCodeRange",bnf:[["CharCode",'"-"',"CharCode"]]},{name:"RULE_WHITESPACE",bnf:[["%RULE_WHITESPACE_CHAR*"],["Comment","RULE_WHITESPACE*"]]},{name:"RULE_S",bnf:[["RULE_WHITESPACE","RULE_S*"],["RULE_EOL","RULE_S*"]]},{name:"%RULE_WHITESPACE_CHAR",bnf:[[/\x09/],[/\x20/]],fragment:!0},{name:"Comment",bnf:[['"/*"',"%RULE_Comment_Body*",'"*/"']]},{name:"%RULE_Comment_Body",bnf:[['!"*/"',/[^*]/]],fragment:!0},{name:"RULE_EOL",bnf:[[/\x0D/,/\x0A/],[/\x0A/],[/\x0D/]]},{name:"Link",bnf:[["'['","Url","']'"]]},{name:"Url",bnf:[[/[^\x5D:/?#]/,'"://"',/[^\x5D#]+/,"%Url1?"]]},{name:"%Url1",bnf:[['"#"',"NCName"]],fragment:!0}],f.defaultParser=new Parser_1$1.Parser(f.RULES,{debug:!1});const g=/^(!|&)/,a=/(\?|\+|\*)$/,d=/^%/;function v(O,k){if(typeof O=="string"){if(g.test(O))return"";if(d.test(O)){let N=a.exec(O),R=N?N[0]+" ":"";return S(O,k)?E(O,k)+R:"("+E(O,k)+")"+R}return O}else return O.source.replace(/\\(?:x|u)([a-zA-Z0-9]+)/g,"#x$1").replace(/\[\\(?:x|u)([a-zA-Z0-9]+)-\\(?:x|u)([a-zA-Z0-9]+)\]/g,"[#x$1-#x$2]")}function S(O,k){let w=Parser_1$1.findRuleByName(O,k);return w&&w.bnf.length==1&&w.bnf[0].length==1&&(w.bnf[0][0]instanceof RegExp||w.bnf[0][0][0]=='"'||w.bnf[0][0][0]=="'")}function L(O,k){return O.map(w=>v(w,k)).join(" ")}function E(O,k){let w=Parser_1$1.findRuleByName(O,k);return w?w.bnf.map(N=>L(N,k)).join(" | "):"RULE_NOT_FOUND {"+O+"}"}function P(O){let k=[];return O.grammarRules.forEach(w=>{if(!/^%/.test(w.name)){let N=w.recover?" /* { recoverUntil="+w.recover+" } */":"";k.push(w.name+" ::= "+E(w.name,O)+N)}}),k.join(`
`)}f.emit=P;let K=0;function W(O,k){throw console.log("reberia restar "+k+" a "+O),new Error("Difference not supported yet")}function Q(O){return new RegExp(O.replace(/#x([a-zA-Z0-9]{4})/g,"\\u$1").replace(/#x([a-zA-Z0-9]{3})/g,"\\u0$1").replace(/#x([a-zA-Z0-9]{2})/g,"\\x$1").replace(/#x([a-zA-Z0-9]{1})/g,"\\x0$1"))}function F(O,k,w){let N=null,R=[];return k.children.forEach((_,h)=>{_.type=="Minus"&&W(N,_);let y=k.children[h+1];y=y&&y.type=="PrimaryDecoration"&&y.text||"";let I="";switch(_.type){case"SubItem":let J="%"+(w+K++);q(O,_,J),R.push(I+J+y);break;case"NCName":case"StringLiteral":R.push(I+_.text+y);break;case"CharCode":case"CharClass":if(y||I){let Z={name:"%"+(w+K++),bnf:[[Q(_.text)]]};O.push(Z),R.push(I+Z.name+y)}else R.push(Q(_.text));break;case"PrimaryDecoration":break;default:throw new Error(" HOW SHOULD I PARSE THIS? "+_.type+" -> "+JSON.stringify(_.text))}N=_}),R}function q(O,k,w){let N=k.children.filter(h=>h.type=="SequenceOrDifference").map(h=>F(O,h,w)),R={name:w,bnf:N},_=null;N.forEach(h=>{_=_||h.recover,delete h.recover}),w.indexOf("%")==0&&(R.fragment=!0),_&&(R.recover=_),O.push(R)}function H(O,k=f.defaultParser){let w=k.getAST(O);if(!w)throw new Error("Could not parse "+O);if(w.errors&&w.errors.length)throw w.errors[0];let N=[];return w.children.filter(R=>R.type=="Production").map(R=>{let _=R.children.filter(h=>h.type=="NCName")[0].text;q(N,R,_)}),N}f.getRules=H;function te(O,k=f.defaultParser){return H(O.join(""),k)}f.Transform=te;class B extends Parser_1$1.Parser{constructor(k,w){const N=w&&w.debugRulesParser===!0?new Parser_1$1.Parser(f.RULES,{debug:!0}):f.defaultParser;super(H(k,N),w)}emitSource(){return P(this)}}f.Parser=B})(BNF$1||(BNF$1={}));W3CEBNF.default=BNF$1;var Custom={};Object.defineProperty(Custom,"__esModule",{value:!0});const TokenError_1=TokenError$1,Parser_1=Parser$1;var BNF;(function(f){f.RULES=[{name:"Grammar",bnf:[["RULE_S*","Attributes?","RULE_S*","%Atomic*","EOF"]]},{name:"%Atomic",bnf:[["Production","RULE_S*"]],fragment:!0},{name:"Production",bnf:[["NCName","RULE_S*",'"::="',"RULE_WHITESPACE*","%Choice","RULE_WHITESPACE*","Attributes?","RULE_EOL+","RULE_S*"]]},{name:"NCName",bnf:[[/[a-zA-Z][a-zA-Z_0-9]*/]]},{name:"Attributes",bnf:[['"{"',"Attribute","%Attributes*","RULE_S*",'"}"']]},{name:"%Attributes",bnf:[["RULE_S*",'","',"Attribute"]],fragment:!0},{name:"Attribute",bnf:[["RULE_S*","NCName","RULE_WHITESPACE*",'"="',"RULE_WHITESPACE*","AttributeValue"]]},{name:"AttributeValue",bnf:[["NCName"],[/[1-9][0-9]*/]]},{name:"%Choice",bnf:[["SequenceOrDifference","%_Choice_1*"]],fragment:!0},{name:"%_Choice_1",bnf:[["RULE_S*",'"|"',"RULE_S*","SequenceOrDifference"]],fragment:!0},{name:"SequenceOrDifference",bnf:[["%Item","RULE_WHITESPACE*","%_Item_1?"]]},{name:"%_Item_1",bnf:[["Minus","%Item"],["%Item*"]],fragment:!0},{name:"Minus",bnf:[['"-"']]},{name:"%Item",bnf:[["RULE_WHITESPACE*","PrimaryPreDecoration?","%Primary","PrimaryDecoration?"]],fragment:!0},{name:"PrimaryDecoration",bnf:[['"?"'],['"*"'],['"+"']]},{name:"PrimaryPreDecoration",bnf:[['"&"'],['"!"'],['"~"']]},{name:"%Primary",bnf:[["NCName"],["StringLiteral"],["CharCode"],["CharClass"],["SubItem"]],fragment:!0},{name:"SubItem",bnf:[['"("',"RULE_S*","%Choice","RULE_S*",'")"']]},{name:"StringLiteral",bnf:[[`'"'`,/[^"]*/,`'"'`],[`"'"`,/[^']*/,`"'"`]]},{name:"CharCode",bnf:[['"#x"',/[0-9a-zA-Z]+/]]},{name:"CharClass",bnf:[["'['","'^'?","%RULE_CharClass_1+",'"]"']]},{name:"%RULE_CharClass_1",bnf:[["CharCodeRange"],["CharRange"],["CharCode"],["RULE_Char"]],fragment:!0},{name:"RULE_Char",bnf:[[/\x09/],[/\x0A/],[/\x0D/],[/[\x20-\x5c]/],[/[\x5e-\uD7FF]/],[/[\uE000-\uFFFD]/]]},{name:"CharRange",bnf:[["RULE_Char",'"-"',"RULE_Char"]]},{name:"CharCodeRange",bnf:[["CharCode",'"-"',"CharCode"]]},{name:"RULE_WHITESPACE",bnf:[["%RULE_WHITESPACE_CHAR*"],["Comment","RULE_WHITESPACE*"]]},{name:"RULE_S",bnf:[["RULE_WHITESPACE","RULE_S*"],["RULE_EOL","RULE_S*"]]},{name:"%RULE_WHITESPACE_CHAR",bnf:[[/\x09/],[/\x20/]],fragment:!0},{name:"Comment",bnf:[['"/*"',"%RULE_Comment_Body*",'"*/"']]},{name:"%RULE_Comment_Body",bnf:[[/[^*]/],['"*"+',/[^/]*/]],fragment:!0},{name:"RULE_EOL",bnf:[[/\x0D/,/\x0A/],[/\x0A/],[/\x0D/]]},{name:"Link",bnf:[["'['","Url","']'"]]},{name:"Url",bnf:[[/[^\x5D:/?#]/,'"://"',/[^\x5D#]+/,"%Url1?"]]},{name:"%Url1",bnf:[['"#"',"NCName"]],fragment:!0}],f.defaultParser=new Parser_1.Parser(f.RULES,{debug:!1});const g=/^(!|&)/,a=/(\?|\+|\*)$/,d=/^%/;function v(O,k){if(typeof O=="string"){let w=a.exec(O),N=g.exec(O),R=N?N[0]:"",_=w?w[0]+" ":"";return d.test(O)?S(O,k)?R+E(O,k)+_:R+"("+E(O,k)+")"+_:O.replace(g,R)}else return O.source.replace(/\\(?:x|u)([a-zA-Z0-9]+)/g,"#x$1").replace(/\[\\(?:x|u)([a-zA-Z0-9]+)-\\(?:x|u)([a-zA-Z0-9]+)\]/g,"[#x$1-#x$2]")}function S(O,k){let w=Parser_1.findRuleByName(O,k);return w&&w.bnf.length==1&&w.bnf[0].length==1&&(w.bnf[0][0]instanceof RegExp||w.bnf[0][0][0]=='"'||w.bnf[0][0][0]=="'")}function L(O,k){return O.map(w=>v(w,k)).join(" ")}function E(O,k){let w=Parser_1.findRuleByName(O,k);return w?w.bnf.map(N=>L(N,k)).join(" | "):"RULE_NOT_FOUND {"+O+"}"}function P(O){let k=[];return O.grammarRules.forEach(w=>{if(!/^%/.test(w.name)){let N=w.recover?" { recoverUntil="+w.recover+" }":"";k.push(w.name+" ::= "+E(w.name,O)+N)}}),k.join(`
`)}f.emit=P;let K=0;function W(O,k){throw console.log("reberia restar "+k+" a "+O),new Error("Difference not supported yet")}function Q(O){return new RegExp(O.replace(/#x([a-zA-Z0-9]{4})/g,"\\u$1").replace(/#x([a-zA-Z0-9]{3})/g,"\\u0$1").replace(/#x([a-zA-Z0-9]{2})/g,"\\x$1").replace(/#x([a-zA-Z0-9]{1})/g,"\\x0$1"))}function F(O,k,w,N){let R=null,_=[];return k.children.forEach((h,y)=>{h.type=="Minus"&&W(R,h);let I=k.children[y+1];I=I&&I.type=="PrimaryDecoration"&&I.text||"";let J="";R&&R.type=="PrimaryPreDecoration"&&(J=R.text);let Z=J=="~"?1:void 0;switch(Z&&(J=""),h.type){case"SubItem":let ae="%"+(w+K++);q(O,h,ae,N),_.push(J+ae+I);break;case"NCName":_.push(J+h.text+I);break;case"StringLiteral":if(I||J||!/^['"/()a-zA-Z0-9&_.:=,+*\-\^\\]+$/.test(h.text))_.push(J+h.text+I);else for(const se of h.text.slice(1,-1))N&&N.ignoreCase=="true"&&/[a-zA-Z]/.test(se)?_.push(new RegExp("["+se.toUpperCase()+se.toLowerCase()+"]")):_.push(new RegExp(Parser_1.escapeRegExp(se)));break;case"CharCode":case"CharClass":if(I||J){let se={name:"%"+(w+K++),bnf:[[Q(h.text)]],pinned:Z};O.push(se),_.push(J+se.name+I)}else _.push(Q(h.text));break;case"PrimaryPreDecoration":case"PrimaryDecoration":break;default:throw new Error(" HOW SHOULD I PARSE THIS? "+h.type+" -> "+JSON.stringify(h.text))}R=h}),_}function q(O,k,w,N=void 0){let R=k.children.filter(I=>I.type=="Attributes")[0],_={};R&&R.children.forEach(I=>{let J=I.children.filter(Z=>Z.type=="NCName")[0].text;if(J in _)throw new TokenError_1.TokenError("Duplicated attribute "+J,I);_[J]=I.children.filter(Z=>Z.type=="AttributeValue")[0].text});let h=k.children.filter(I=>I.type=="SequenceOrDifference").map(I=>F(O,I,w,N||_)),y={name:w,bnf:h};if(w.indexOf("%")==0&&(y.fragment=!0),_.recoverUntil&&(y.recover=_.recoverUntil,y.bnf.length>1))throw new TokenError_1.TokenError("only one-option productions are suitable for error recovering",k);if("pin"in _){let I=parseInt(_.pin);if(isNaN(I)||(y.pinned=I),y.bnf.length>1)throw new TokenError_1.TokenError("only one-option productions are suitable for pinning",k)}"ws"in _?y.implicitWs=_.ws!="explicit":y.implicitWs=null,y.fragment=y.fragment||_.fragment=="true",y.simplifyWhenOneChildren=_.simplifyWhenOneChildren=="true",O.push(y)}function H(O,k=f.defaultParser){let w=k.getAST(O);if(!w)throw new Error("Could not parse "+O);if(w.errors&&w.errors.length)throw w.errors[0];let N=null,R=w.children.filter(y=>y.type=="Attributes")[0],_={};R&&R.children.forEach(y=>{let I=y.children.filter(J=>J.type=="NCName")[0].text;if(I in _)throw new TokenError_1.TokenError("Duplicated attribute "+I,y);_[I]=y.children.filter(J=>J.type=="AttributeValue")[0].text}),N=_.ws=="implicit";let h=[];return w.children.filter(y=>y.type=="Production").map(y=>{let I=y.children.filter(J=>J.type=="NCName")[0].text;q(h,y,I)}),h.forEach(y=>{y.implicitWs===null&&(y.implicitWs=N)}),h}f.getRules=H;function te(O,k=f.defaultParser){return H(O.join(""),k)}f.Transform=te;class B extends Parser_1.Parser{constructor(k,w){const N=w&&w.debugRulesParser===!0?new Parser_1.Parser(f.RULES,{debug:!0}):f.defaultParser;super(H(k,N),w)}emitSource(){return P(this)}}f.Parser=B})(BNF||(BNF={}));Custom.default=BNF;(function(f){Object.defineProperty(f,"__esModule",{value:!0});var g=BNF$3;Object.defineProperty(f,"BNF",{enumerable:!0,get:function(){return g.default}});var a=W3CEBNF;Object.defineProperty(f,"W3C",{enumerable:!0,get:function(){return a.default}});var d=Custom;Object.defineProperty(f,"Custom",{enumerable:!0,get:function(){return d.default}})})(Grammars);(function(f){Object.defineProperty(f,"__esModule",{value:!0});var g=Parser$1;Object.defineProperty(f,"Parser",{enumerable:!0,get:function(){return g.Parser}});var a=TokenError$1;Object.defineProperty(f,"TokenError",{enumerable:!0,get:function(){return a.TokenError}}),f.Grammars=Grammars})(dist);(function(f){Object.defineProperty(f,"__esModule",{value:!0}),f.parseFormula=f.parseAndApply=f.Source=f.Formula=void 0;const g=neverthrow,a=algebraic_operation,d=ast_utils,v=conditional_function,S=constant,L=destination,E=display_directive,P=range,K=reference,W=single_param_function,Q=dist,F=lodash.exports,q=`
tblfm_line   ::= "<!-- TBLFM: " formula_list " -->"
formula_list ::= formula ( "::" formula_list )?
formula      ::= destination "=" source display_directive?

source           ::= range | source_reference | single_param_function_call | conditional_function_call | algebraic_operation | float | real
range            ::= source_reference ".." source_reference
source_reference ::= absolute_reference | relative_reference
destination      ::= range | absolute_reference

relative_reference ::= (relative_row | absolute_row) (relative_column | absolute_column) | relative_row | relative_column
relative_row ::= "@" ( "-" | "+" ) int
relative_column ::= "$" ( "-" | "+" ) int

absolute_reference ::= absolute_row absolute_column | absolute_row | absolute_column
absolute_row ::= "@" ( "I" | "<" | ">" | int )
absolute_column ::= "$" ( "<" | ">" | int )

single_param_function_call ::= single_param_function "(" source ")" 
single_param_function      ::= "mean" | "sum"

conditional_function_call ::= "if(" predicate "," " "? source "," " "? source ")"
predicate                 ::= source_without_range conditional_operator source_without_range
source_without_range      ::= source_reference | single_param_function_call | conditional_function_call | algebraic_operation | float | real
conditional_operator      ::= ">" | "<" | ">=" | "<=" | "==" | "!="

algebraic_operation ::= "(" source " "? algebraic_operator " "? source ")"
algebraic_operator  ::= "+" | "-" | "*" | "/"

display_directive        ::= ";" display_directive_option
display_directive_option ::= formatting_directive
formatting_directive     ::= "%." int "f"

float ::= "-"? int "." int
real ::= "-"? int
int  ::= [0-9]+
`;class H{constructor(N,R){this.merge=y=>this.destination.merge(this.source,y);let _=new E.DefaultFormatter;N.children.length===3&&(_=new E.DisplayDirective(N.children[2]));const h=L.newDestination(N.children[0],R,_);if(h.isErr())throw h.error;this.destination=h.value,this.source=new te(N.children[1],R)}}f.Formula=H;class te{constructor(N,R){if(this.getValue=(y,I)=>this.locationDescriptor.getValue(y,I),N.type!=="source"&&N.type!=="source_without_range")throw Error("Invalid AST token type of "+N.type);if(N.children.length!==1)throw Error("Unexpected children length in Source");const _=N.children[0],h=B(_,R);if(h.isErr())throw h.error;this.locationDescriptor=h.value}}f.Source=te;const B=(w,N)=>{try{switch(w.type){case"range":return g.ok(new P.Range(w,N));case"source_reference":const R=d.checkChildLength(w,1);return R?g.err(R):g.ok(new K.Reference(w.children[0],N));case"single_param_function_call":return g.ok(new W.SingleParamFunctionCall(w,N));case"conditional_function_call":return g.ok(new v.ConditionalFunctionCall(w,N));case"algebraic_operation":return g.ok(new a.AlgebraicOperation(w,N));case"real":return g.ok(new S.Constant(w,N));case"float":return g.ok(new S.Constant(w,N));default:throw Error("Unrecognized valueProvider type "+w.type)}}catch(R){return g.err(R)}},O=(w,N)=>w.reduce((_,h)=>_.andThen(y=>{const I=f.parseFormula(h,N);return I.isErr()?I:g.ok(F.concat(I.value,y))}),g.ok([])).andThen(_=>_.reduceRight((h,y)=>h.andThen(I=>y.merge(I)),g.ok(N)));f.parseAndApply=O;const k=(w,N)=>{const _=new Q.Grammars.W3C.Parser(q).getAST(w);if(!_)return g.err(new Error(`Formula '${w}' could not be parsed`));const h=d.checkType(_,"tblfm_line");if(h)return g.err(h);const y=d.checkChildLength(_,1);if(y)return g.err(y);let I=_.children[0].children;const J=[];try{do J.push(new H(I[0],N)),I.length>1&&I[1].type==="formula_list"?I=I[1].children:I=[];while(I.length>0);return g.ok(J)}catch(Z){return g.err(Z)}};f.parseFormula=k})(calc);Object.defineProperty(table,"__esModule",{value:!0});table.Table=void 0;const calc_1=calc,focus_1=focus,point_1=point,range_1=range$1;class Table{constructor(g){this._rows=g.slice()}getHeight(){return this._rows.length}getWidth(){return this._rows.map(g=>g.getWidth()).reduce((g,a)=>Math.max(g,a),0)}getHeaderWidth(){return this._rows[0].getWidth()}getRows(){return this._rows.slice()}getDelimiterRow(){const g=this._rows[1];if(g!==void 0&&g.isDelimiter())return g}getCellAt(g,a){const d=this._rows[g];if(d!==void 0)return d.getCellAt(a)}getFocusedCell(g){return this.getCellAt(g.row,g.column)}toLines(){return this._rows.map(g=>g.toText())}setCellAt(g,a,d){const v=this.getRows();return v[g]=v[g].setCellAt(a,d),new Table(v)}focusOfPosition(g,a){const d=g.row-a,v=this._rows[d];if(v===void 0)return;if(g.column<v.marginLeft.length+1)return new focus_1.Focus(d,-1,g.column);const S=v.getCells().map(K=>K.rawContent.length);let L=v.marginLeft.length+1,E=0;for(;E<S.length&&!(L+S[E]+1>g.column);E++)L+=S[E]+1;const P=g.column-L;return new focus_1.Focus(d,E,P)}positionOfFocus(g,a){const d=this._rows[g.row];if(d===void 0)return;const v=g.row+a;if(g.column<0)return new point_1.Point(v,g.offset);const S=d.getCells().map(P=>P.rawContent.length),L=Math.min(g.column,S.length);let E=d.marginLeft.length+1;for(let P=0;P<L;P++)E+=S[P]+1;return new point_1.Point(v,E+g.offset)}selectionRangeOfFocus(g,a){const d=this._rows[g.row];if(d===void 0)return;const v=d.getCellAt(g.column);if(v===void 0||v.content==="")return;const S=g.row+a,L=d.getCells().map(P=>P.rawContent.length);let E=d.marginLeft.length+1;for(let P=0;P<g.column;P++)E+=L[P]+1;return E+=v.paddingLeft,new range_1.Range(new point_1.Point(S,E),new point_1.Point(S,E+v.content.length))}applyFormulas(g){return calc_1.parseAndApply(g,this)}}table.Table=Table;var parser={};(function(f){Object.defineProperty(f,"__esModule",{value:!0}),f.readTable=f._marginRegex=f.marginRegexSrc=f._readRow=f._splitCells=void 0;const g=table,a=tableCell,d=tableRow,v=K=>{const W=[];let Q="",F=K;for(;F!=="";)switch(F[0]){case"`":{const q=F.match(/^`*/);if(q===null)break;const H=q[0];let te=H,B=F.substr(H.length),O=!1;for(;B!=="";)if(B[0]==="`"){const k=B.match(/^`*/);if(k===null)break;const w=k[0];if(te+=w,B=B.substr(w.length),w.length===H.length){O=!0;break}}else te+=B[0],B=B.substr(1);O?(Q+=te,F=B):(Q+="`",F=F.substr(1))}break;case"\\":F.length>=2?(Q+=F.substr(0,2),F=F.substr(2)):(Q+="\\",F=F.substr(1));break;case"[":if(Q+="[",F=F.substr(1),/\[[^\\|\]]+\|[^|\]]+]]/.test(F)){const q=F.indexOf("|");Q+=F.slice(0,q),Q+="\\|",F=F.substr(q+1)}break;case"|":W.push(Q),Q="",F=F.substr(1);break;default:Q+=F[0],F=F.substr(1)}return W.push(Q),W};f._splitCells=v;const S=(K,W=/^\s*$/)=>{let Q=f._splitCells(K),F;Q.length>0&&W.test(Q[0])?(F=Q[0],Q=Q.slice(1)):F="";let q;return Q.length>1&&/^\s*$/.test(Q[Q.length-1])?(q=Q[Q.length-1],Q=Q.slice(0,Q.length-1)):q="",new d.TableRow(Q.map(H=>new a.TableCell(H)),F,q)};f._readRow=S;const L=K=>{let W="";return K.forEach(Q=>{Q!=="|"&&Q!=="\\"&&Q!=="`"&&(W+=`\\u{${Q.codePointAt(0).toString(16)}}`)}),`[\\s${W}]*`};f.marginRegexSrc=L;const E=K=>new RegExp(`^${f.marginRegexSrc(K)}$`,"u");f._marginRegex=E;const P=(K,W)=>{const Q=f._marginRegex(W.leftMarginChars);return new g.Table(K.map(F=>f._readRow(F,Q)))};f.readTable=P})(parser);var formatter={},defs=[[0,31,"N"],[32,126,"Na"],[127,160,"N"],[161,161,"A"],[162,163,"Na"],[164,164,"A"],[165,166,"Na"],[167,168,"A"],[169,169,"N"],[170,170,"A"],[171,171,"N"],[172,172,"Na"],[173,174,"A"],[175,175,"Na"],[176,180,"A"],[181,181,"N"],[182,186,"A"],[187,187,"N"],[188,191,"A"],[192,197,"N"],[198,198,"A"],[199,207,"N"],[208,208,"A"],[209,214,"N"],[215,216,"A"],[217,221,"N"],[222,225,"A"],[226,229,"N"],[230,230,"A"],[231,231,"N"],[232,234,"A"],[235,235,"N"],[236,237,"A"],[238,239,"N"],[240,240,"A"],[241,241,"N"],[242,243,"A"],[244,246,"N"],[247,250,"A"],[251,251,"N"],[252,252,"A"],[253,253,"N"],[254,254,"A"],[255,256,"N"],[257,257,"A"],[258,272,"N"],[273,273,"A"],[274,274,"N"],[275,275,"A"],[276,282,"N"],[283,283,"A"],[284,293,"N"],[294,295,"A"],[296,298,"N"],[299,299,"A"],[300,304,"N"],[305,307,"A"],[308,311,"N"],[312,312,"A"],[313,318,"N"],[319,322,"A"],[323,323,"N"],[324,324,"A"],[325,327,"N"],[328,331,"A"],[332,332,"N"],[333,333,"A"],[334,337,"N"],[338,339,"A"],[340,357,"N"],[358,359,"A"],[360,362,"N"],[363,363,"A"],[364,461,"N"],[462,462,"A"],[463,463,"N"],[464,464,"A"],[465,465,"N"],[466,466,"A"],[467,467,"N"],[468,468,"A"],[469,469,"N"],[470,470,"A"],[471,471,"N"],[472,472,"A"],[473,473,"N"],[474,474,"A"],[475,475,"N"],[476,476,"A"],[477,592,"N"],[593,593,"A"],[594,608,"N"],[609,609,"A"],[610,707,"N"],[708,708,"A"],[709,710,"N"],[711,711,"A"],[712,712,"N"],[713,715,"A"],[716,716,"N"],[717,717,"A"],[718,719,"N"],[720,720,"A"],[721,727,"N"],[728,731,"A"],[732,732,"N"],[733,733,"A"],[734,734,"N"],[735,735,"A"],[736,767,"N"],[768,879,"A"],[880,912,"N"],[913,929,"A"],[930,930,"N"],[931,937,"A"],[938,944,"N"],[945,961,"A"],[962,962,"N"],[963,969,"A"],[970,1024,"N"],[1025,1025,"A"],[1026,1039,"N"],[1040,1103,"A"],[1104,1104,"N"],[1105,1105,"A"],[1106,4351,"N"],[4352,4447,"W"],[4448,8207,"N"],[8208,8208,"A"],[8209,8210,"N"],[8211,8214,"A"],[8215,8215,"N"],[8216,8217,"A"],[8218,8219,"N"],[8220,8221,"A"],[8222,8223,"N"],[8224,8226,"A"],[8227,8227,"N"],[8228,8231,"A"],[8232,8239,"N"],[8240,8240,"A"],[8241,8241,"N"],[8242,8243,"A"],[8244,8244,"N"],[8245,8245,"A"],[8246,8250,"N"],[8251,8251,"A"],[8252,8253,"N"],[8254,8254,"A"],[8255,8307,"N"],[8308,8308,"A"],[8309,8318,"N"],[8319,8319,"A"],[8320,8320,"N"],[8321,8324,"A"],[8325,8360,"N"],[8361,8361,"H"],[8362,8363,"N"],[8364,8364,"A"],[8365,8450,"N"],[8451,8451,"A"],[8452,8452,"N"],[8453,8453,"A"],[8454,8456,"N"],[8457,8457,"A"],[8458,8466,"N"],[8467,8467,"A"],[8468,8469,"N"],[8470,8470,"A"],[8471,8480,"N"],[8481,8482,"A"],[8483,8485,"N"],[8486,8486,"A"],[8487,8490,"N"],[8491,8491,"A"],[8492,8530,"N"],[8531,8532,"A"],[8533,8538,"N"],[8539,8542,"A"],[8543,8543,"N"],[8544,8555,"A"],[8556,8559,"N"],[8560,8569,"A"],[8570,8584,"N"],[8585,8585,"A"],[8586,8591,"N"],[8592,8601,"A"],[8602,8631,"N"],[8632,8633,"A"],[8634,8657,"N"],[8658,8658,"A"],[8659,8659,"N"],[8660,8660,"A"],[8661,8678,"N"],[8679,8679,"A"],[8680,8703,"N"],[8704,8704,"A"],[8705,8705,"N"],[8706,8707,"A"],[8708,8710,"N"],[8711,8712,"A"],[8713,8714,"N"],[8715,8715,"A"],[8716,8718,"N"],[8719,8719,"A"],[8720,8720,"N"],[8721,8721,"A"],[8722,8724,"N"],[8725,8725,"A"],[8726,8729,"N"],[8730,8730,"A"],[8731,8732,"N"],[8733,8736,"A"],[8737,8738,"N"],[8739,8739,"A"],[8740,8740,"N"],[8741,8741,"A"],[8742,8742,"N"],[8743,8748,"A"],[8749,8749,"N"],[8750,8750,"A"],[8751,8755,"N"],[8756,8759,"A"],[8760,8763,"N"],[8764,8765,"A"],[8766,8775,"N"],[8776,8776,"A"],[8777,8779,"N"],[8780,8780,"A"],[8781,8785,"N"],[8786,8786,"A"],[8787,8799,"N"],[8800,8801,"A"],[8802,8803,"N"],[8804,8807,"A"],[8808,8809,"N"],[8810,8811,"A"],[8812,8813,"N"],[8814,8815,"A"],[8816,8833,"N"],[8834,8835,"A"],[8836,8837,"N"],[8838,8839,"A"],[8840,8852,"N"],[8853,8853,"A"],[8854,8856,"N"],[8857,8857,"A"],[8858,8868,"N"],[8869,8869,"A"],[8870,8894,"N"],[8895,8895,"A"],[8896,8977,"N"],[8978,8978,"A"],[8979,8985,"N"],[8986,8987,"W"],[8988,9e3,"N"],[9001,9002,"W"],[9003,9192,"N"],[9193,9196,"W"],[9197,9199,"N"],[9200,9200,"W"],[9201,9202,"N"],[9203,9203,"W"],[9204,9311,"N"],[9312,9449,"A"],[9450,9450,"N"],[9451,9547,"A"],[9548,9551,"N"],[9552,9587,"A"],[9588,9599,"N"],[9600,9615,"A"],[9616,9617,"N"],[9618,9621,"A"],[9622,9631,"N"],[9632,9633,"A"],[9634,9634,"N"],[9635,9641,"A"],[9642,9649,"N"],[9650,9651,"A"],[9652,9653,"N"],[9654,9655,"A"],[9656,9659,"N"],[9660,9661,"A"],[9662,9663,"N"],[9664,9665,"A"],[9666,9669,"N"],[9670,9672,"A"],[9673,9674,"N"],[9675,9675,"A"],[9676,9677,"N"],[9678,9681,"A"],[9682,9697,"N"],[9698,9701,"A"],[9702,9710,"N"],[9711,9711,"A"],[9712,9724,"N"],[9725,9726,"W"],[9727,9732,"N"],[9733,9734,"A"],[9735,9736,"N"],[9737,9737,"A"],[9738,9741,"N"],[9742,9743,"A"],[9744,9747,"N"],[9748,9749,"W"],[9750,9755,"N"],[9756,9756,"A"],[9757,9757,"N"],[9758,9758,"A"],[9759,9791,"N"],[9792,9792,"A"],[9793,9793,"N"],[9794,9794,"A"],[9795,9799,"N"],[9800,9811,"W"],[9812,9823,"N"],[9824,9825,"A"],[9826,9826,"N"],[9827,9829,"A"],[9830,9830,"N"],[9831,9834,"A"],[9835,9835,"N"],[9836,9837,"A"],[9838,9838,"N"],[9839,9839,"A"],[9840,9854,"N"],[9855,9855,"W"],[9856,9874,"N"],[9875,9875,"W"],[9876,9885,"N"],[9886,9887,"A"],[9888,9888,"N"],[9889,9889,"W"],[9890,9897,"N"],[9898,9899,"W"],[9900,9916,"N"],[9917,9918,"W"],[9919,9919,"A"],[9920,9923,"N"],[9924,9925,"W"],[9926,9933,"A"],[9934,9934,"W"],[9935,9939,"A"],[9940,9940,"W"],[9941,9953,"A"],[9954,9954,"N"],[9955,9955,"A"],[9956,9959,"N"],[9960,9961,"A"],[9962,9962,"W"],[9963,9969,"A"],[9970,9971,"W"],[9972,9972,"A"],[9973,9973,"W"],[9974,9977,"A"],[9978,9978,"W"],[9979,9980,"A"],[9981,9981,"W"],[9982,9983,"A"],[9984,9988,"N"],[9989,9989,"W"],[9990,9993,"N"],[9994,9995,"W"],[9996,10023,"N"],[10024,10024,"W"],[10025,10044,"N"],[10045,10045,"A"],[10046,10059,"N"],[10060,10060,"W"],[10061,10061,"N"],[10062,10062,"W"],[10063,10066,"N"],[10067,10069,"W"],[10070,10070,"N"],[10071,10071,"W"],[10072,10101,"N"],[10102,10111,"A"],[10112,10132,"N"],[10133,10135,"W"],[10136,10159,"N"],[10160,10160,"W"],[10161,10174,"N"],[10175,10175,"W"],[10176,10213,"N"],[10214,10221,"Na"],[10222,10628,"N"],[10629,10630,"Na"],[10631,11034,"N"],[11035,11036,"W"],[11037,11087,"N"],[11088,11088,"W"],[11089,11092,"N"],[11093,11093,"W"],[11094,11097,"A"],[11098,11903,"N"],[11904,11929,"W"],[11930,11930,"N"],[11931,12019,"W"],[12020,12031,"N"],[12032,12245,"W"],[12246,12271,"N"],[12272,12283,"W"],[12284,12287,"N"],[12288,12288,"F"],[12289,12350,"W"],[12351,12352,"N"],[12353,12438,"W"],[12439,12440,"N"],[12441,12543,"W"],[12544,12548,"N"],[12549,12591,"W"],[12592,12592,"N"],[12593,12686,"W"],[12687,12687,"N"],[12688,12771,"W"],[12772,12783,"N"],[12784,12830,"W"],[12831,12831,"N"],[12832,12871,"W"],[12872,12879,"A"],[12880,19903,"W"],[19904,19967,"N"],[19968,42124,"W"],[42125,42127,"N"],[42128,42182,"W"],[42183,43359,"N"],[43360,43388,"W"],[43389,44031,"N"],[44032,55203,"W"],[55204,57343,"N"],[57344,63743,"A"],[63744,64255,"W"],[64256,65023,"N"],[65024,65039,"A"],[65040,65049,"W"],[65050,65071,"N"],[65072,65106,"W"],[65107,65107,"N"],[65108,65126,"W"],[65127,65127,"N"],[65128,65131,"W"],[65132,65280,"N"],[65281,65376,"F"],[65377,65470,"H"],[65471,65473,"N"],[65474,65479,"H"],[65480,65481,"N"],[65482,65487,"H"],[65488,65489,"N"],[65490,65495,"H"],[65496,65497,"N"],[65498,65500,"H"],[65501,65503,"N"],[65504,65510,"F"],[65511,65511,"N"],[65512,65518,"H"],[65519,65532,"N"],[65533,65533,"A"],[65534,94175,"N"],[94176,94180,"W"],[94181,94191,"N"],[94192,94193,"W"],[94194,94207,"N"],[94208,100343,"W"],[100344,100351,"N"],[100352,101589,"W"],[101590,101631,"N"],[101632,101640,"W"],[101641,110591,"N"],[110592,110878,"W"],[110879,110927,"N"],[110928,110930,"W"],[110931,110947,"N"],[110948,110951,"W"],[110952,110959,"N"],[110960,111355,"W"],[111356,126979,"N"],[126980,126980,"W"],[126981,127182,"N"],[127183,127183,"W"],[127184,127231,"N"],[127232,127242,"A"],[127243,127247,"N"],[127248,127277,"A"],[127278,127279,"N"],[127280,127337,"A"],[127338,127343,"N"],[127344,127373,"A"],[127374,127374,"W"],[127375,127376,"A"],[127377,127386,"W"],[127387,127404,"A"],[127405,127487,"N"],[127488,127490,"W"],[127491,127503,"N"],[127504,127547,"W"],[127548,127551,"N"],[127552,127560,"W"],[127561,127567,"N"],[127568,127569,"W"],[127570,127583,"N"],[127584,127589,"W"],[127590,127743,"N"],[127744,127776,"W"],[127777,127788,"N"],[127789,127797,"W"],[127798,127798,"N"],[127799,127868,"W"],[127869,127869,"N"],[127870,127891,"W"],[127892,127903,"N"],[127904,127946,"W"],[127947,127950,"N"],[127951,127955,"W"],[127956,127967,"N"],[127968,127984,"W"],[127985,127987,"N"],[127988,127988,"W"],[127989,127991,"N"],[127992,128062,"W"],[128063,128063,"N"],[128064,128064,"W"],[128065,128065,"N"],[128066,128252,"W"],[128253,128254,"N"],[128255,128317,"W"],[128318,128330,"N"],[128331,128334,"W"],[128335,128335,"N"],[128336,128359,"W"],[128360,128377,"N"],[128378,128378,"W"],[128379,128404,"N"],[128405,128406,"W"],[128407,128419,"N"],[128420,128420,"W"],[128421,128506,"N"],[128507,128591,"W"],[128592,128639,"N"],[128640,128709,"W"],[128710,128715,"N"],[128716,128716,"W"],[128717,128719,"N"],[128720,128722,"W"],[128723,128724,"N"],[128725,128727,"W"],[128728,128746,"N"],[128747,128748,"W"],[128749,128755,"N"],[128756,128764,"W"],[128765,128991,"N"],[128992,129003,"W"],[129004,129291,"N"],[129292,129338,"W"],[129339,129339,"N"],[129340,129349,"W"],[129350,129350,"N"],[129351,129400,"W"],[129401,129401,"N"],[129402,129483,"W"],[129484,129484,"N"],[129485,129535,"W"],[129536,129647,"N"],[129648,129652,"W"],[129653,129655,"N"],[129656,129658,"W"],[129659,129663,"N"],[129664,129670,"W"],[129671,129679,"N"],[129680,129704,"W"],[129705,129711,"N"],[129712,129718,"W"],[129719,129727,"N"],[129728,129730,"W"],[129731,129743,"N"],[129744,129750,"W"],[129751,131071,"N"],[131072,196605,"W"],[196606,196607,"N"],[196608,262141,"W"],[262142,917759,"N"],[917760,917999,"A"],[918e3,983039,"N"],[983040,1048573,"A"],[1048574,1048575,"N"],[1048576,1114109,"A"],[1114110,1114111,"N"]],version="13.0.0";function getEAWOfCodePoint(f){for(var g=0,a=defs.length-1;g!==a;){var d=g+(a-g>>1),v=defs[d],S=v[0],L=v[1],E=v[2];if(f<S)a=d-1;else if(f>L)g=d+1;else return E}return defs[g][2]}function getEAW(f,g){g===void 0&&(g=0);var a=f.codePointAt(g);if(a!==void 0)return getEAWOfCodePoint(a)}var defaultWidths={N:1,Na:1,W:2,F:2,H:1,A:1};function computeWidth(f,g){for(var a=0,d=0,v=f;d<v.length;d++){var S=v[d],L=getEAW(S);a+=g&&g[L]||defaultWidths[L]}return a}var lib=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",computeWidth,eawVersion:version,getEAW}),require$$4=getAugmentedNamespace(lib);(function(f){Object.defineProperty(f,"__esModule",{value:!0}),f.moveColumn=f.deleteColumn=f.insertColumn=f.moveRow=f.deleteRow=f.insertRow=f.alterAlignment=f.formatTable=f.FormatType=f._weakFormatTable=f._formatTable=f._padText=f._alignText=f._computeTextWidth=f.completeTable=f._extendArray=f._delimiterText=void 0;const g=alignment,a=table,d=tableCell,v=tableRow,S=require$$4,L=(h,y)=>{const I="-".repeat(y);switch(h){case g.Alignment.NONE:return` ${I} `;case g.Alignment.LEFT:return`:${I} `;case g.Alignment.RIGHT:return` ${I}:`;case g.Alignment.CENTER:return`:${I}:`;default:throw new Error("Unknown alignment: "+h)}};f._delimiterText=L;const E=(h,y,I)=>{const J=h.slice();for(let Z=h.length;Z<y;Z++)J.push(I(Z,h));return J};f._extendArray=E;const P=(h,y)=>{const I=h.getHeight(),J=h.getWidth();if(I===0)throw new Error("Empty table");const Z=h.getRows(),ae=[],se=Z[0],pe=se.getCells();ae.push(new v.TableRow(f._extendArray(pe,J,he=>new d.TableCell(he===pe.length?se.marginRight:"")),se.marginLeft,pe.length<J?"":se.marginRight));const X=h.getDelimiterRow();if(X!==void 0){const he=X.getCells();ae.push(new v.TableRow(f._extendArray(he,J,oe=>new d.TableCell(f._delimiterText(g.Alignment.NONE,oe===he.length?Math.max(y.minDelimiterWidth,X.marginRight.length-2):y.minDelimiterWidth))),X.marginLeft,he.length<J?"":X.marginRight))}else ae.push(new v.TableRow(f._extendArray([],J,()=>new d.TableCell(f._delimiterText(g.Alignment.NONE,y.minDelimiterWidth))),"",""));for(let he=X!==void 0?2:1;he<I;he++){const oe=Z[he],Ee=oe.getCells();ae.push(new v.TableRow(f._extendArray(Ee,J,le=>new d.TableCell(le===Ee.length?oe.marginRight:"")),oe.marginLeft,Ee.length<J?"":oe.marginRight))}return{table:new a.Table(ae),delimiterInserted:X===void 0}};f.completeTable=P;const K=(h,y)=>{const I=y.normalize?h.normalize("NFC"):h;let J=0;for(const Z of I){if(y.wideChars.has(Z)){J+=2;continue}if(y.narrowChars.has(Z)){J+=1;continue}switch(S.getEAW(Z)){case"F":case"W":J+=2;break;case"A":J+=y.ambiguousAsWide?2:1;break;default:J+=1}}return J};f._computeTextWidth=K;const W=(h,y,I,J)=>{const Z=y-f._computeTextWidth(h,J);if(Z<0)return h;switch(I){case g.Alignment.NONE:throw new Error("Unexpected default alignment");case g.Alignment.LEFT:return h+" ".repeat(Z);case g.Alignment.RIGHT:return" ".repeat(Z)+h;case g.Alignment.CENTER:return" ".repeat(Math.floor(Z/2))+h+" ".repeat(Math.ceil(Z/2));default:throw new Error("Unknown alignment: "+I)}};f._alignText=W;const Q=h=>` ${h} `;f._padText=Q;const F=(h,y)=>{const I=h.getHeight(),J=h.getWidth();if(I===0)return{table:h,marginLeft:""};const Z=h.getRows()[0].marginLeft;if(J===0){const oe=new Array(I).fill(new v.TableRow([],Z,""));return{table:new a.Table(oe),marginLeft:Z}}const ae=h.getDelimiterRow(),se=new Array(J).fill(0);if(ae!==void 0){const oe=ae.getWidth();for(let Ee=0;Ee<oe;Ee++)se[Ee]=y.minDelimiterWidth}for(let oe=0;oe<I;oe++){if(ae!==void 0&&oe===1)continue;const Ee=h.getRows()[oe],le=Ee.getWidth();for(let be=0;be<le;be++)se[be]=Math.max(se[be],f._computeTextWidth(Ee.getCellAt(be).content,y.textWidthOptions))}const pe=ae!==void 0?f._extendArray(ae.getCells().map(oe=>oe.getAlignment()),J,()=>y.defaultAlignment):new Array(J).fill(y.defaultAlignment),X=[],he=h.getRows()[0];X.push(new v.TableRow(he.getCells().map((oe,Ee)=>new d.TableCell(f._padText(f._alignText(oe.content,se[Ee],y.headerAlignment===g.HeaderAlignment.FOLLOW?pe[Ee]===g.Alignment.NONE?y.defaultAlignment:pe[Ee]:y.headerAlignment,y.textWidthOptions)))),Z,"")),ae!==void 0&&X.push(new v.TableRow(ae.getCells().map((oe,Ee)=>new d.TableCell(f._delimiterText(pe[Ee],se[Ee]))),Z,""));for(let oe=ae!==void 0?2:1;oe<I;oe++){const Ee=h.getRows()[oe];X.push(new v.TableRow(Ee.getCells().map((le,be)=>new d.TableCell(f._padText(f._alignText(le.content,se[be],pe[be]===g.Alignment.NONE?y.defaultAlignment:pe[be],y.textWidthOptions)))),Z,""))}return{table:new a.Table(X),marginLeft:Z}};f._formatTable=F;const q=(h,y)=>{const I=h.getHeight(),J=h.getWidth();if(I===0)return{table:h,marginLeft:""};const Z=h.getRows()[0].marginLeft;if(J===0){const X=new Array(I).fill(new v.TableRow([],Z,""));return{table:new a.Table(X),marginLeft:Z}}const ae=h.getDelimiterRow(),se=[],pe=h.getRows()[0];se.push(new v.TableRow(pe.getCells().map(X=>new d.TableCell(f._padText(X.content))),Z,"")),ae!==void 0&&se.push(new v.TableRow(ae.getCells().map(X=>new d.TableCell(f._delimiterText(X.getAlignment(),y.minDelimiterWidth))),Z,""));for(let X=ae!==void 0?2:1;X<I;X++){const he=h.getRows()[X];se.push(new v.TableRow(he.getCells().map(oe=>new d.TableCell(f._padText(oe.content))),Z,""))}return{table:new a.Table(se),marginLeft:Z}};f._weakFormatTable=q;var H;(function(h){h.NORMAL="normal",h.WEAK="weak"})(H=f.FormatType||(f.FormatType={}));const te=(h,y)=>{switch(y.formatType){case H.NORMAL:return f._formatTable(h,y);case H.WEAK:return f._weakFormatTable(h,y);default:throw new Error("Unknown format type: "+y.formatType)}};f.formatTable=te;const B=(h,y,I,J)=>{if(h.getHeight()<1)return h;const Z=h.getRows()[1];if(y<0||Z.getWidth()-1<y)return h;const ae=Z.getCells();ae[y]=new d.TableCell(f._delimiterText(I,J.minDelimiterWidth));const se=h.getRows();return se[1]=new v.TableRow(ae,Z.marginLeft,Z.marginRight),new a.Table(se)};f.alterAlignment=B;const O=(h,y,I)=>{const J=h.getRows();return J.splice(Math.max(y,2),0,I),new a.Table(J)};f.insertRow=O;const k=(h,y)=>{if(y===1)return h;const I=h.getRows();if(y===0){const J=I[0];I[0]=new v.TableRow(new Array(J.getWidth()).fill(new d.TableCell("")),J.marginLeft,J.marginRight)}else I.splice(y,1);return new a.Table(I)};f.deleteRow=k;const w=(h,y,I)=>{if(y<=1||I<=1||y===I)return h;const J=h.getRows(),Z=J[y];return J.splice(y,1),J.splice(I,0,Z),new a.Table(J)};f.moveRow=w;const N=(h,y,I,J)=>{const Z=h.getRows();for(let ae=0;ae<Z.length;ae++){const se=Z[ae],pe=Z[ae].getCells(),X=ae===1?new d.TableCell(f._delimiterText(g.Alignment.NONE,J.minDelimiterWidth)):I[ae>1?ae-1:ae];pe.splice(y,0,X),Z[ae]=new v.TableRow(pe,se.marginLeft,se.marginRight)}return new a.Table(Z)};f.insertColumn=N;const R=(h,y,I)=>{const J=h.getRows();for(let Z=0;Z<J.length;Z++){const ae=J[Z];let se=ae.getCells();se.length<=1?se=[new d.TableCell(Z===1?f._delimiterText(g.Alignment.NONE,I.minDelimiterWidth):"")]:se.splice(y,1),J[Z]=new v.TableRow(se,ae.marginLeft,ae.marginRight)}return new a.Table(J)};f.deleteColumn=R;const _=(h,y,I)=>{if(y===I)return h;const J=h.getRows();for(let Z=0;Z<J.length;Z++){const ae=J[Z],se=ae.getCells(),pe=se[y];se.splice(y,1),se.splice(I,0,pe),J[Z]=new v.TableRow(se,ae.marginLeft,ae.marginRight)}return new a.Table(J)};f.moveColumn=_})(formatter);var editScript={};(function(f){Object.defineProperty(f,"__esModule",{value:!0}),f.shortestEditScript=f.applyEditScript=f._applyCommand=f.Delete=f.Insert=void 0;class g{constructor(W,Q){this.row=W,this.line=Q}}f.Insert=g;class a{constructor(W){this.row=W}}f.Delete=a;const d=(K,W,Q)=>{if(W instanceof g)K.insertLine(Q+W.row,W.line);else if(W instanceof a)K.deleteLine(Q+W.row);else throw new Error("Unknown command")};f._applyCommand=d;const v=(K,W,Q)=>{for(const F of W)f._applyCommand(K,F,Q)};f.applyEditScript=v;class S{get car(){throw new Error("Not implemented")}get cdr(){throw new Error("Not implemented")}isEmpty(){throw new Error("Not implemented")}unshift(W){return new E(W,this)}toArray(){const W=[];let Q=this;for(;!Q.isEmpty();)W.push(Q.car),Q=Q.cdr;return W}}class L extends S{constructor(){super()}get car(){throw new Error("Empty list")}get cdr(){throw new Error("Empty list")}isEmpty(){return!0}}class E extends S{constructor(W,Q){super();this._car=W,this._cdr=Q}get car(){return this._car}get cdr(){return this._cdr}isEmpty(){return!1}}const P=(K,W,Q=-1)=>{const F=K.length,q=W.length,H=Q>=0?Math.min(Q,F+q):F+q,te=new Array(Math.min(H,F)+Math.min(H,q)+1),B=Math.min(H,F);for(let O=0;O<=H;O++){const k=O<=F?-O:O-2*F,w=O<=q?O:-O+2*q;for(let N=k;N<=w;N+=2){let R,_;if(O===0)R=0,_=new L;else if(N===-O)R=te[B+N+1].i+1,_=te[B+N+1].script.unshift(new a(R+N));else if(N===O)R=te[B+N-1].i,_=te[B+N-1].script.unshift(new g(R+N-1,W[R+N-1]));else{const h=te[B+N+1].i+1,y=te[B+N-1].i;h>y?(R=h,_=te[B+N+1].script.unshift(new a(R+N))):(R=y,_=te[B+N-1].script.unshift(new g(R+N-1,W[R+N-1])))}for(;R<F&&R+N<q&&K[R]===W[R+N];)R+=1;if(N===q-F&&R===F)return _.toArray().reverse();te[B+N]={i:R,script:_}}}};f.shortestEditScript=P})(editScript);var textEditor={};Object.defineProperty(textEditor,"__esModule",{value:!0});textEditor.ITextEditor=void 0;class ITextEditor{getCursorPosition(){throw new Error("Not implemented: getCursorPosition")}setCursorPosition(g){throw new Error("Not implemented: setCursorPosition")}setSelectionRange(g){throw new Error("Not implemented: setSelectionRange")}getLastRow(){throw new Error("Not implemented: getLastRow")}acceptsTableEdit(g){throw new Error("Not implemented: acceptsTableEdit")}getLine(g){throw new Error("Not implemented: getLine")}insertLine(g,a){throw new Error("Not implemented: insertLine")}deleteLine(g){throw new Error("Not implemented: deleteLine")}replaceLines(g,a,d){throw new Error("Not implemented: replaceLines")}transact(g){throw new Error("Not implemented: transact")}}textEditor.ITextEditor=ITextEditor;var options={};(function(f){Object.defineProperty(f,"__esModule",{value:!0}),f.defaultOptions=f.optionsWithDefaults=void 0;const g=alignment,a=formatter,d={normalize:!0,wideChars:new Set,narrowChars:new Set,ambiguousAsWide:!1},v={leftMarginChars:new Set,formatType:a.FormatType.NORMAL,minDelimiterWidth:3,defaultAlignment:g.DefaultAlignment.LEFT,headerAlignment:g.HeaderAlignment.FOLLOW,smartCursor:!1},S=L=>Object.assign(Object.assign(Object.assign({},v),L),{textWidthOptions:L.textWidthOptions?Object.assign(Object.assign({},d),L.textWidthOptions):d});f.optionsWithDefaults=S,f.defaultOptions=f.optionsWithDefaults({})})(options);var tableEditor={};(function(f){Object.defineProperty(f,"__esModule",{value:!0}),f.TableEditor=f._computeNewOffset=f._createIsTableFormulaRegex=f._createIsTableRowRegex=f.SortOrder=void 0;const g=editScript,a=focus,d=formatter,v=parser,S=point,L=range$1,E=table,P=tableCell,K=tableRow;var W;(function(te){te.Ascending="ascending",te.Descending="descending"})(W=f.SortOrder||(f.SortOrder={}));const Q=te=>new RegExp(`^${v.marginRegexSrc(te)}\\|`,"u");f._createIsTableRowRegex=Q;const F=te=>new RegExp(`^${v.marginRegexSrc(te)}<!-- ?.+-->$`,"u");f._createIsTableFormulaRegex=F;const q=(te,B,O,k)=>{if(k){const R=O.table.getFocusedCell(te);return R!==void 0?R.computeRawOffset(0):te.column<0?O.marginLeft.length:0}const w=B.getFocusedCell(te),N=O.table.getFocusedCell(te);if(w!==void 0&&N!==void 0){const R=Math.min(w.computeContentOffset(te.offset),N.content.length);return N.computeRawOffset(R)}return te.column<0?O.marginLeft.length:0};f._computeNewOffset=q;class H{constructor(B){this._textEditor=B,this._scActive=!1}resetSmartCursor(){this._scActive=!1}cursorIsInTable(B){const O=f._createIsTableRowRegex(B.leftMarginChars),k=this._textEditor.getCursorPosition();return this._textEditor.acceptsTableEdit(k.row)&&O.test(this._textEditor.getLine(k.row))}cursorIsInTableFormula(B){const O=f._createIsTableFormulaRegex(B.leftMarginChars),k=this._textEditor.getCursorPosition();return this._textEditor.acceptsTableEdit(k.row)&&O.test(this._textEditor.getLine(k.row))}_findTable(B){const O=f._createIsTableRowRegex(B.leftMarginChars),k=f._createIsTableFormulaRegex(B.leftMarginChars);let w=this._textEditor.getCursorPosition();const N=this._textEditor.getLastRow(),R=[],_=[];let h=w.row,y=w.row;{let ae=this._textEditor.getLine(w.row);for(;k.test(ae)&&w.row>=0;)w=new S.Point(w.row-1,w.column),y--,ae=this._textEditor.getLine(w.row)}{const ae=this._textEditor.getLine(w.row);if(!this._textEditor.acceptsTableEdit(w.row)||!O.test(ae))return;R.push(ae)}for(let ae=w.row-1;ae>=0;ae--){const se=this._textEditor.getLine(ae);if(!this._textEditor.acceptsTableEdit(ae)||!O.test(se))break;R.unshift(se),h=ae}for(let ae=w.row+1;ae<=N;ae++){const se=this._textEditor.getLine(ae);if(!this._textEditor.acceptsTableEdit(ae)||!O.test(se))break;R.push(se),y=ae}for(let ae=y+1;ae<=N;ae++){const se=this._textEditor.getLine(ae);if(!this._textEditor.acceptsTableEdit(ae)||!k.test(se))break;_.push(se)}const I=new L.Range(new S.Point(h,0),new S.Point(y,R[R.length-1].length)),J=v.readTable(R,B),Z=J.focusOfPosition(w,h);if(Z!==void 0)return{range:I,lines:R,formulaLines:_,table:J,focus:Z}}_withTable(B,O){const k=this._findTable(B);if(k!==void 0)return O(k)}_updateLines(B,O,k,w=void 0){if(w!==void 0){const N=g.shortestEditScript(w,k,3);if(N!==void 0){g.applyEditScript(this._textEditor,N,B);return}}this._textEditor.replaceLines(B,O,k)}_moveToFocus(B,O,k){const w=O.positionOfFocus(k,B);w!==void 0&&this._textEditor.setCursorPosition(w)}_selectFocus(B,O,k){const w=O.selectionRangeOfFocus(k,B);w!==void 0?this._textEditor.setSelectionRange(w):this._moveToFocus(B,O,k)}format(B){this.withCompletedTable(B,({range:O,lines:k,table:w,focus:N})=>{const R=N;this._textEditor.transact(()=>{this._updateLines(O.start.row,O.end.row+1,w.toLines(),k),this._moveToFocus(O.start.row,w,R)})})}escape(B){this._withTable(B,({range:O,lines:k,table:w,focus:N})=>{const R=d.completeTable(w,B),_=d.formatTable(R.table,B),h=O.end.row+(R.delimiterInserted?2:1);this._textEditor.transact(()=>{this._updateLines(O.start.row,O.end.row+1,_.table.toLines(),k);let y;if(h>this._textEditor.getLastRow())this._textEditor.insertLine(h,""),y=new S.Point(h,0);else{const I=new RegExp(`^${v.marginRegexSrc(B.leftMarginChars)}`,"u"),J=this._textEditor.getLine(h),Z=I.exec(J)[0];y=new S.Point(h,Z.length)}this._textEditor.setCursorPosition(y)}),this.resetSmartCursor()})}alignColumn(B,O){this.withCompletedTable(O,({range:k,lines:w,table:N,focus:R})=>{let _=R,h=N;0<=_.column&&_.column<=h.getHeaderWidth()-1&&(h=d.alterAlignment(N,_.column,B,O));const y=d.formatTable(h,O);_=_.setOffset(f._computeNewOffset(_,N,y,!1)),this._textEditor.transact(()=>{this._updateLines(k.start.row,k.end.row+1,y.table.toLines(),w),this._moveToFocus(k.start.row,y.table,_)})})}selectCell(B){this.withCompletedTable(B,({range:O,lines:k,table:w,focus:N})=>{const R=N;this._textEditor.transact(()=>{this._updateLines(O.start.row,O.end.row+1,w.toLines(),k),this._selectFocus(O.start.row,w,R)})})}moveFocus(B,O,k){this.withCompletedTable(k,({range:w,lines:N,table:R,focus:_})=>{let h=_;const y=h;if(B!==0){const Z=R.getHeight(),ae=h.row<1&&h.row+B>=1?1:h.row>1&&h.row+B<=1?-1:0;h=h.setRow(Math.min(Math.max(h.row+B+ae,0),Z<=2?0:Z-1))}if(O!==0){const Z=R.getHeaderWidth();!(h.column<0&&O<0)&&!(h.column>Z-1&&O>0)&&(h=h.setColumn(Math.min(Math.max(h.column+O,0),Z-1)))}const I=!h.posEquals(y),J=d.formatTable(R,k);h=h.setOffset(f._computeNewOffset(h,R,J,I)),this._textEditor.transact(()=>{this._updateLines(w.start.row,w.end.row+1,J.table.toLines(),N),I?this._selectFocus(w.start.row,J.table,h):this._moveToFocus(w.start.row,J.table,h)}),I&&this.resetSmartCursor()})}nextCell(B){this._withTable(B,({range:O,lines:k,table:w,focus:N})=>{const R=this._scTablePos!==void 0&&!O.start.equals(this._scTablePos)||this._scLastFocus!==void 0&&!N.posEquals(this._scLastFocus);this._scActive&&R&&this.resetSmartCursor();let _=N;const h=d.completeTable(w,B);h.delimiterInserted&&_.row>0&&(_=_.setRow(_.row+1));const y=_;let I=h.table;if(_.row===1){if(_=_.setRow(2),B.smartCursor?(_.column<0||I.getHeaderWidth()-1<_.column)&&(_=_.setColumn(0)):_=_.setColumn(0),_.row>I.getHeight()-1){const ae=new Array(I.getHeaderWidth()).fill(new P.TableCell(""));I=d.insertRow(I,I.getHeight(),new K.TableRow(ae,"",""))}}else{if(_.column>I.getHeaderWidth()-1){const ae=new Array(I.getHeight()-1).fill(new P.TableCell(""));I=d.insertColumn(I,I.getHeaderWidth(),ae,B)}_=_.setColumn(_.column+1)}const J=d.formatTable(I,B);_=_.setOffset(f._computeNewOffset(_,I,J,!0));const Z=J.table.toLines();_.column>J.table.getHeaderWidth()-1&&(Z[_.row]+=" ",_=_.setOffset(1)),this._textEditor.transact(()=>{this._updateLines(O.start.row,O.end.row+1,Z,k),this._selectFocus(O.start.row,J.table,_)}),B.smartCursor&&(this._scActive||(this._scActive=!0,this._scTablePos=O.start,y.column<0||J.table.getHeaderWidth()-1<y.column?this._scStartFocus=new a.Focus(y.row,0,0):this._scStartFocus=y),this._scLastFocus=_)})}previousCell(B){this.withCompletedTable(B,({range:O,lines:k,table:w,focus:N})=>{let R=N;const _=R;R.row===0?R.column>0&&(R=R.setColumn(R.column-1)):R.row===1?R=new a.Focus(0,w.getHeaderWidth()-1,R.offset):R.column>0?R=R.setColumn(R.column-1):R=new a.Focus(R.row===2?0:R.row-1,w.getHeaderWidth()-1,R.offset);const h=!R.posEquals(_),y=d.formatTable(w,B);R=R.setOffset(f._computeNewOffset(R,w,y,h)),this._textEditor.transact(()=>{this._updateLines(O.start.row,O.end.row+1,y.table.toLines(),k),h?this._selectFocus(O.start.row,y.table,R):this._moveToFocus(O.start.row,y.table,R)}),h&&this.resetSmartCursor()})}nextRow(B){this._withTable(B,({range:O,lines:k,table:w,focus:N})=>{const R=this._scTablePos!==void 0&&!O.start.equals(this._scTablePos)||this._scLastFocus!==void 0&&!N.posEquals(this._scLastFocus);this._scActive&&R&&this.resetSmartCursor();let _=N;const h=d.completeTable(w,B);h.delimiterInserted&&_.row>0&&(_=_.setRow(_.row+1));const y=_;let I=h.table;if(_.row===0?_=_.setRow(2):_=_.setRow(_.row+1),B.smartCursor?this._scActive&&this._scStartFocus!==void 0?_=_.setColumn(this._scStartFocus.column):(_.column<0||I.getHeaderWidth()-1<_.column)&&(_=_.setColumn(0)):_=_.setColumn(0),_.row>I.getHeight()-1){const Z=new Array(I.getHeaderWidth()).fill(new P.TableCell(""));I=d.insertRow(I,I.getHeight(),new K.TableRow(Z,"",""))}const J=d.formatTable(I,B);_=_.setOffset(f._computeNewOffset(_,I,J,!0)),this._textEditor.transact(()=>{this._updateLines(O.start.row,O.end.row+1,J.table.toLines(),k),this._selectFocus(O.start.row,J.table,_)}),B.smartCursor&&(this._scActive||(this._scActive=!0,this._scTablePos=O.start,y.column<0||J.table.getHeaderWidth()-1<y.column?this._scStartFocus=new a.Focus(y.row,0,0):this._scStartFocus=y),this._scLastFocus=_)})}insertRow(B){this.withCompletedTable(B,({range:O,lines:k,formulaLines:w,table:N,focus:R})=>{let _=R;_.row<=1&&(_=_.setRow(2)),_=_.setColumn(0);const h=new Array(N.getHeaderWidth()).fill(new P.TableCell("")),y=d.insertRow(N,_.row,new K.TableRow(h,"",""));this.formatAndApply(B,O,k,w,y,_)})}deleteRow(B){this.withCompletedTable(B,({range:O,lines:k,formulaLines:w,table:N,focus:R})=>{let _=R,h=N,y=!1;_.row!==1&&(h=d.deleteRow(h,_.row),y=!0,_.row>h.getHeight()-1&&(_=_.setRow(_.row===2?0:_.row-1))),this.formatAndApply(B,O,k,w,h,_,y)})}moveRow(B,O){this.withCompletedTable(O,({range:k,lines:w,formulaLines:N,table:R,focus:_})=>{let h=_,y=R;if(h.row>1){const I=Math.min(Math.max(h.row+B,2),y.getHeight()-1);y=d.moveRow(y,h.row,I),h=h.setRow(I)}this.formatAndApply(O,k,w,N,y,h)})}evaluateFormulas(B){return this.withCompletedTable(B,({range:O,lines:k,formulaLines:w,table:N,focus:R})=>{const _=N.applyFormulas(w);if(_.isErr())return _.error;this.formatAndApply(B,O,k,w,_.value,R,!1)})}sortRows(B,O){this.withCompletedTable(O,({range:k,lines:w,formulaLines:N,table:R,focus:_})=>{const h=R.getRows().slice(2),y=pe=>/^\s*[-+]?((\d+(\.\d+)?)|(\d+\.)|(\.\d+))([eE][-+]?\d+)?\s*$/.test(pe),I=h.map(pe=>{var X;return(X=pe.getCellAt(_.column))===null||X===void 0?void 0:X.content}).some(pe=>pe!==void 0&&pe!==""&&!y(pe));h.sort((pe,X)=>{const he=pe.getCellAt(_.column),oe=X.getCellAt(_.column);if(he===void 0||he.content==="")return oe===void 0||oe.content===""?0:-1;if(oe===void 0||oe.content==="")return 1;const Ee=I?he.content.replace(/[*~_$]/g,""):parseFloat(he.content),le=I?oe.content.replace(/[*~_$]/g,""):parseFloat(oe.content);return Ee===le?0:Ee===void 0?-1:le===void 0?1:Ee<le?-1:1}),B===W.Descending&&h.reverse();const J=R.getRows().slice(0,2).concat(h),Z=new E.Table(J),{table:ae,focus:se}=this.formatAndApply(O,k,w,N,Z,_,!0);this._moveToFocus(k.start.row,ae,se)})}insertColumn(B){this.withCompletedTable(B,({range:O,lines:k,formulaLines:w,table:N,focus:R})=>{let _=R;_.row===1&&(_=_.setRow(0)),_.column<0&&(_=_.setColumn(0));const h=new Array(N.getHeight()-1).fill(new P.TableCell("")),y=d.insertColumn(N,_.column,h,B);this.formatAndApply(B,O,k,w,y,_)})}deleteColumn(B){this.withCompletedTable(B,({range:O,lines:k,formulaLines:w,table:N,focus:R})=>{let _=R;_.row===1&&(_=_.setRow(0));let h=N,y=!1;0<=_.column&&_.column<=h.getHeaderWidth()-1&&(h=d.deleteColumn(N,_.column,B),y=!0,_.column>h.getHeaderWidth()-1&&(_=_.setColumn(h.getHeaderWidth()-1))),this.formatAndApply(B,O,k,w,h,_,y)})}moveColumn(B,O){this.withCompletedTable(O,({range:k,lines:w,formulaLines:N,table:R,focus:_})=>{let h=_,y=R;if(0<=h.column&&h.column<=y.getHeaderWidth()-1){const I=Math.min(Math.max(h.column+B,0),y.getHeaderWidth()-1);y=d.moveColumn(y,h.column,I),h=h.setColumn(I)}this.formatAndApply(O,k,w,N,y,h)})}formatAll(B){this._textEditor.transact(()=>{const O=f._createIsTableRowRegex(B.leftMarginChars);let k=this._textEditor.getCursorPosition(),w=[],N,R=this._textEditor.getLastRow();for(let _=0;_<=R;_++){const h=this._textEditor.getLine(_);if(this._textEditor.acceptsTableEdit(_)&&O.test(h))w.push(h),N===void 0&&(N=_);else if(N!==void 0){const y=_-1,I=new L.Range(new S.Point(N,0),new S.Point(y,w[w.length-1].length)),J=v.readTable(w,B),Z=J.focusOfPosition(k,N);let ae;if(Z!==void 0){let se=Z;const pe=d.completeTable(J,B);pe.delimiterInserted&&se.row>0&&(se=se.setRow(se.row+1));const X=d.formatTable(pe.table,B);se=se.setOffset(f._computeNewOffset(se,pe.table,X,!1));const he=X.table.toLines();this._updateLines(I.start.row,I.end.row+1,he,w),ae=he.length-w.length,k=X.table.positionOfFocus(se,N)}else{const se=d.completeTable(J,B),X=d.formatTable(se.table,B).table.toLines();this._updateLines(I.start.row,I.end.row+1,X,w),ae=X.length-w.length,k.row>y&&(k=new S.Point(k.row+ae,k.column))}w=[],N=void 0,R+=ae,_+=ae}}if(N!==void 0){const _=R,h=new L.Range(new S.Point(N,0),new S.Point(_,w[w.length-1].length)),y=v.readTable(w,B);let J=y.focusOfPosition(k,N);const Z=d.completeTable(y,B);Z.delimiterInserted&&J.row>0&&(J=J.setRow(J.row+1));const ae=d.formatTable(Z.table,B);J=J.setOffset(f._computeNewOffset(J,Z.table,ae,!1));const se=ae.table.toLines();this._updateLines(h.start.row,h.end.row+1,se,w),k=ae.table.positionOfFocus(J,N)}this._textEditor.setCursorPosition(k)})}exportTable(B,O){return this.withCompletedTable(O,({range:k,lines:w,formulaLines:N,table:R,focus:_})=>{const h=R.getRows();return h.length>0&&!B&&h.splice(0,2),h.map(y=>y.getCells().map(I=>I.content))})}exportCSV(B,O){const k=this.exportTable(B,O);return k?k.map(w=>w.join("	")).join(`
`):void 0}withCompletedTable(B,O){return this._withTable(B,k=>{let w=k.focus;const N=d.completeTable(k.table,B);N.delimiterInserted&&w.row>0&&(w=w.setRow(w.row+1));const R=d.formatTable(N.table,B);return w=w.setOffset(f._computeNewOffset(w,N.table,R,!1)),k.table=R.table,k.focus=w,O(k)})}formatAndApply(B,O,k,w,N,R,_=!1){const h=d.formatTable(N,B);return R=R.setOffset(f._computeNewOffset(R,N,h,_)),this._textEditor.transact(()=>{this._updateLines(O.start.row,O.end.row+1,h.table.toLines(),k),_?this._selectFocus(O.start.row,h.table,R):this._moveToFocus(O.start.row,h.table,R)}),this.resetSmartCursor(),{range:O,lines:k,formulaLines:w,table:h.table,focus:R}}}f.TableEditor=H})(tableEditor);(function(f){Object.defineProperty(f,"__esModule",{value:!0}),f.SortOrder=f.TableEditor=f.optionsWithDefaults=f.defaultOptions=f.ITextEditor=f.shortestEditScript=f.applyEditScript=f.Delete=f.Insert=f.moveColumn=f.deleteColumn=f.insertColumn=f.moveRow=f.deleteRow=f.insertRow=f.alterAlignment=f.formatTable=f.completeTable=f.FormatType=f.readTable=f.Table=f.TableRow=f.TableCell=f.HeaderAlignment=f.DefaultAlignment=f.Alignment=f.Focus=f.Range=f.Point=void 0;var g=point;Object.defineProperty(f,"Point",{enumerable:!0,get:function(){return g.Point}});var a=range$1;Object.defineProperty(f,"Range",{enumerable:!0,get:function(){return a.Range}});var d=focus;Object.defineProperty(f,"Focus",{enumerable:!0,get:function(){return d.Focus}});var v=alignment;Object.defineProperty(f,"Alignment",{enumerable:!0,get:function(){return v.Alignment}}),Object.defineProperty(f,"DefaultAlignment",{enumerable:!0,get:function(){return v.DefaultAlignment}}),Object.defineProperty(f,"HeaderAlignment",{enumerable:!0,get:function(){return v.HeaderAlignment}});var S=tableCell;Object.defineProperty(f,"TableCell",{enumerable:!0,get:function(){return S.TableCell}});var L=tableRow;Object.defineProperty(f,"TableRow",{enumerable:!0,get:function(){return L.TableRow}});var E=table;Object.defineProperty(f,"Table",{enumerable:!0,get:function(){return E.Table}});var P=parser;Object.defineProperty(f,"readTable",{enumerable:!0,get:function(){return P.readTable}});var K=formatter;Object.defineProperty(f,"FormatType",{enumerable:!0,get:function(){return K.FormatType}}),Object.defineProperty(f,"completeTable",{enumerable:!0,get:function(){return K.completeTable}}),Object.defineProperty(f,"formatTable",{enumerable:!0,get:function(){return K.formatTable}}),Object.defineProperty(f,"alterAlignment",{enumerable:!0,get:function(){return K.alterAlignment}}),Object.defineProperty(f,"insertRow",{enumerable:!0,get:function(){return K.insertRow}}),Object.defineProperty(f,"deleteRow",{enumerable:!0,get:function(){return K.deleteRow}}),Object.defineProperty(f,"moveRow",{enumerable:!0,get:function(){return K.moveRow}}),Object.defineProperty(f,"insertColumn",{enumerable:!0,get:function(){return K.insertColumn}}),Object.defineProperty(f,"deleteColumn",{enumerable:!0,get:function(){return K.deleteColumn}}),Object.defineProperty(f,"moveColumn",{enumerable:!0,get:function(){return K.moveColumn}});var W=editScript;Object.defineProperty(f,"Insert",{enumerable:!0,get:function(){return W.Insert}}),Object.defineProperty(f,"Delete",{enumerable:!0,get:function(){return W.Delete}}),Object.defineProperty(f,"applyEditScript",{enumerable:!0,get:function(){return W.applyEditScript}}),Object.defineProperty(f,"shortestEditScript",{enumerable:!0,get:function(){return W.shortestEditScript}});var Q=textEditor;Object.defineProperty(f,"ITextEditor",{enumerable:!0,get:function(){return Q.ITextEditor}});var F=options;Object.defineProperty(f,"defaultOptions",{enumerable:!0,get:function(){return F.defaultOptions}}),Object.defineProperty(f,"optionsWithDefaults",{enumerable:!0,get:function(){return F.optionsWithDefaults}});var q=tableEditor;Object.defineProperty(f,"TableEditor",{enumerable:!0,get:function(){return q.TableEditor}}),Object.defineProperty(f,"SortOrder",{enumerable:!0,get:function(){return q.SortOrder}})})(lib$1);var codemirror="",dialog$1="",base2toneSeaDark="",xml={exports:{}};(function(f,g){(function(a){a(codemirror$1.exports)})(function(a){var d={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},v={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};a.defineMode("xml",function(S,L){var E=S.indentUnit,P={},K=L.htmlMode?d:v;for(var W in K)P[W]=K[W];for(var W in L)P[W]=L[W];var Q,F;function q(X,he){function oe(be){return he.tokenize=be,be(X,he)}var Ee=X.next();if(Ee=="<")return X.eat("!")?X.eat("[")?X.match("CDATA[")?oe(B("atom","]]>")):null:X.match("--")?oe(B("comment","-->")):X.match("DOCTYPE",!0,!0)?(X.eatWhile(/[\w\._\-]/),oe(O(1))):null:X.eat("?")?(X.eatWhile(/[\w\._\-]/),he.tokenize=B("meta","?>"),"meta"):(Q=X.eat("/")?"closeTag":"openTag",he.tokenize=H,"tag bracket");if(Ee=="&"){var le;return X.eat("#")?X.eat("x")?le=X.eatWhile(/[a-fA-F\d]/)&&X.eat(";"):le=X.eatWhile(/[\d]/)&&X.eat(";"):le=X.eatWhile(/[\w\.\-:]/)&&X.eat(";"),le?"atom":"error"}else return X.eatWhile(/[^&<]/),null}q.isInText=!0;function H(X,he){var oe=X.next();if(oe==">"||oe=="/"&&X.eat(">"))return he.tokenize=q,Q=oe==">"?"endTag":"selfcloseTag","tag bracket";if(oe=="=")return Q="equals",null;if(oe=="<"){he.tokenize=q,he.state=_,he.tagName=he.tagStart=null;var Ee=he.tokenize(X,he);return Ee?Ee+" tag error":"tag error"}else return/[\'\"]/.test(oe)?(he.tokenize=te(oe),he.stringStartCol=X.column(),he.tokenize(X,he)):(X.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function te(X){var he=function(oe,Ee){for(;!oe.eol();)if(oe.next()==X){Ee.tokenize=H;break}return"string"};return he.isInAttribute=!0,he}function B(X,he){return function(oe,Ee){for(;!oe.eol();){if(oe.match(he)){Ee.tokenize=q;break}oe.next()}return X}}function O(X){return function(he,oe){for(var Ee;(Ee=he.next())!=null;){if(Ee=="<")return oe.tokenize=O(X+1),oe.tokenize(he,oe);if(Ee==">")if(X==1){oe.tokenize=q;break}else return oe.tokenize=O(X-1),oe.tokenize(he,oe)}return"meta"}}function k(X){return X&&X.toLowerCase()}function w(X,he,oe){this.prev=X.context,this.tagName=he||"",this.indent=X.indented,this.startOfLine=oe,(P.doNotIndent.hasOwnProperty(he)||X.context&&X.context.noIndent)&&(this.noIndent=!0)}function N(X){X.context&&(X.context=X.context.prev)}function R(X,he){for(var oe;;){if(!X.context||(oe=X.context.tagName,!P.contextGrabbers.hasOwnProperty(k(oe))||!P.contextGrabbers[k(oe)].hasOwnProperty(k(he))))return;N(X)}}function _(X,he,oe){return X=="openTag"?(oe.tagStart=he.column(),h):X=="closeTag"?y:_}function h(X,he,oe){return X=="word"?(oe.tagName=he.current(),F="tag",Z):P.allowMissingTagName&&X=="endTag"?(F="tag bracket",Z(X,he,oe)):(F="error",h)}function y(X,he,oe){if(X=="word"){var Ee=he.current();return oe.context&&oe.context.tagName!=Ee&&P.implicitlyClosed.hasOwnProperty(k(oe.context.tagName))&&N(oe),oe.context&&oe.context.tagName==Ee||P.matchClosing===!1?(F="tag",I):(F="tag error",J)}else return P.allowMissingTagName&&X=="endTag"?(F="tag bracket",I(X,he,oe)):(F="error",J)}function I(X,he,oe){return X!="endTag"?(F="error",I):(N(oe),_)}function J(X,he,oe){return F="error",I(X,he,oe)}function Z(X,he,oe){if(X=="word")return F="attribute",ae;if(X=="endTag"||X=="selfcloseTag"){var Ee=oe.tagName,le=oe.tagStart;return oe.tagName=oe.tagStart=null,X=="selfcloseTag"||P.autoSelfClosers.hasOwnProperty(k(Ee))?R(oe,Ee):(R(oe,Ee),oe.context=new w(oe,Ee,le==oe.indented)),_}return F="error",Z}function ae(X,he,oe){return X=="equals"?se:(P.allowMissing||(F="error"),Z(X,he,oe))}function se(X,he,oe){return X=="string"?pe:X=="word"&&P.allowUnquoted?(F="string",Z):(F="error",Z(X,he,oe))}function pe(X,he,oe){return X=="string"?pe:Z(X,he,oe)}return{startState:function(X){var he={tokenize:q,state:_,indented:X||0,tagName:null,tagStart:null,context:null};return X!=null&&(he.baseIndent=X),he},token:function(X,he){if(!he.tagName&&X.sol()&&(he.indented=X.indentation()),X.eatSpace())return null;Q=null;var oe=he.tokenize(X,he);return(oe||Q)&&oe!="comment"&&(F=null,he.state=he.state(Q||oe,X,he),F&&(oe=F=="error"?oe+" error":F)),oe},indent:function(X,he,oe){var Ee=X.context;if(X.tokenize.isInAttribute)return X.tagStart==X.indented?X.stringStartCol+1:X.indented+E;if(Ee&&Ee.noIndent)return a.Pass;if(X.tokenize!=H&&X.tokenize!=q)return oe?oe.match(/^(\s*)/)[0].length:0;if(X.tagName)return P.multilineTagIndentPastTag!==!1?X.tagStart+X.tagName.length+2:X.tagStart+E*(P.multilineTagIndentFactor||1);if(P.alignCDATA&&/<!\[CDATA\[/.test(he))return 0;var le=he&&/^<(\/)?([\w_:\.-]*)/.exec(he);if(le&&le[1])for(;Ee;)if(Ee.tagName==le[2]){Ee=Ee.prev;break}else if(P.implicitlyClosed.hasOwnProperty(k(Ee.tagName)))Ee=Ee.prev;else break;else if(le)for(;Ee;){var be=P.contextGrabbers[k(Ee.tagName)];if(be&&be.hasOwnProperty(k(le[2])))Ee=Ee.prev;else break}for(;Ee&&Ee.prev&&!Ee.startOfLine;)Ee=Ee.prev;return Ee?Ee.indent+E:X.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:P.htmlMode?"html":"xml",helperType:P.htmlMode?"html":"xml",skipAttribute:function(X){X.state==se&&(X.state=Z)},xmlCurrentTag:function(X){return X.tagName?{name:X.tagName,close:X.type=="closeTag"}:null},xmlCurrentContext:function(X){for(var he=[],oe=X.context;oe;oe=oe.prev)he.push(oe.tagName);return he.reverse()}}}),a.defineMIME("text/xml","xml"),a.defineMIME("application/xml","xml"),a.mimeModes.hasOwnProperty("text/html")||a.defineMIME("text/html",{name:"xml",htmlMode:!0})})})();var meta={exports:{}};(function(f,g){(function(a){a(codemirror$1.exports)})(function(a){a.modeInfo=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-encrypted","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["asc","pgp","sig"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h","ino"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy","cbl"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp","cs"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj","cljc","cljx"]},{name:"ClojureScript",mime:"text/x-clojurescript",mode:"clojure",ext:["cljs"]},{name:"Closure Stylesheets (GSS)",mime:"text/x-gss",mode:"css",ext:["gss"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists\.txt$/},{name:"CoffeeScript",mimes:["application/vnd.coffeescript","text/coffeescript","text/x-coffeescript"],mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"Crystal",mime:"text/x-crystal",mode:"crystal",ext:["cr"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"edn",mime:"application/edn",mode:"clojure",ext:["edn"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded JavaScript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Esper",mime:"text/x-esper",mode:"sql"},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"FCL",mime:"text/x-fcl",mode:"fcl"},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90","f95"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history)\.md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy","gradle"],file:/^Jenkinsfile$/},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haskell (Literate)",mime:"text/x-literate-haskell",mode:"haskell-literate",ext:["lhs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm","handlebars","hbs"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Pug",mime:"text/x-pug",mode:"pug",ext:["jade","pug"],alias:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"JSX",mime:"text/jsx",mode:"jsx",ext:["jsx"]},{name:"Jinja2",mime:"text/jinja2",mode:"jinja2",ext:["j2","jinja","jinja2"]},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"],alias:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"clike",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb","wl","wls"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps",ext:["mps"]},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"mbox",mime:"application/mbox",mode:"mbox",ext:["mbox"]},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NSIS",mime:"text/x-nsis",mode:"nsis",ext:["nsh","nsi"]},{name:"NTriples",mimes:["application/n-triples","application/n-quads","text/n-triples"],mode:"ntriples",ext:["nt","nq"]},{name:"Objective-C",mime:"text/x-objectivec",mode:"clike",ext:["m"],alias:["objective-c","objc"]},{name:"Objective-C++",mime:"text/x-objectivec++",mode:"clike",ext:["mm"],alias:["objective-c++","objc++"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Oz",mime:"text/x-oz",mode:"oz",ext:["oz"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mimes:["text/x-php","application/x-httpd-php","application/x-httpd-php-open"],mode:"php",ext:["php","php3","php4","php5","php7","phtml"]},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:["txt","text","conf","def","list","log"]},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"PostgreSQL",mime:"text/x-pgsql",mode:"sql"},{name:"PowerShell",mime:"application/x-powershell",mode:"powershell",ext:["ps1","psd1","psm1"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"ProtoBuf",mime:"text/x-protobuf",mode:"protobuf",ext:["proto"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r","R"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"SAS",mime:"text/x-sas",mode:"sas",ext:["sas"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mimes:["text/x-sh","application/x-sh"],mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD$/},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"SML",mime:"text/x-sml",mode:"mllike",ext:["sml","sig","fun","smackspec"]},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"SQLite",mime:"text/x-sqlite",mode:"sql"},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Stylus",mime:"text/x-styl",mode:"stylus",ext:["styl"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx","tex"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v","sv","svh"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"text/troff",mode:"troff",ext:["1","2","3","4","5","6","7","8","9"]},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"TypeScript-JSX",mime:"text/typescript-jsx",mode:"jsx",ext:["tsx"],alias:["tsx"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"Web IDL",mime:"text/x-webidl",mode:"webidl",ext:["webidl"]},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"VHDL",mime:"text/x-vhdl",mode:"vhdl",ext:["vhd","vhdl"]},{name:"Vue.js Component",mimes:["script/x-vue","text/x-vue"],mode:"vue",ext:["vue"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd","svg"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"Yacas",mime:"text/x-yacas",mode:"yacas",ext:["ys"]},{name:"YAML",mimes:["text/x-yaml","text/yaml"],mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]},{name:"mscgen",mime:"text/x-mscgen",mode:"mscgen",ext:["mscgen","mscin","msc"]},{name:"xu",mime:"text/x-xu",mode:"mscgen",ext:["xu"]},{name:"msgenny",mime:"text/x-msgenny",mode:"mscgen",ext:["msgenny"]},{name:"WebAssembly",mime:"text/webassembly",mode:"wast",ext:["wat","wast"]}];for(var d=0;d<a.modeInfo.length;d++){var v=a.modeInfo[d];v.mimes&&(v.mime=v.mimes[0])}a.findModeByMIME=function(S){S=S.toLowerCase();for(var L=0;L<a.modeInfo.length;L++){var E=a.modeInfo[L];if(E.mime==S)return E;if(E.mimes){for(var P=0;P<E.mimes.length;P++)if(E.mimes[P]==S)return E}}if(/\+xml$/.test(S))return a.findModeByMIME("application/xml");if(/\+json$/.test(S))return a.findModeByMIME("application/json")},a.findModeByExtension=function(S){S=S.toLowerCase();for(var L=0;L<a.modeInfo.length;L++){var E=a.modeInfo[L];if(E.ext){for(var P=0;P<E.ext.length;P++)if(E.ext[P]==S)return E}}},a.findModeByFileName=function(S){for(var L=0;L<a.modeInfo.length;L++){var E=a.modeInfo[L];if(E.file&&E.file.test(S))return E}var P=S.lastIndexOf("."),K=P>-1&&S.substring(P+1,S.length);if(K)return a.findModeByExtension(K)},a.findModeByName=function(S){S=S.toLowerCase();for(var L=0;L<a.modeInfo.length;L++){var E=a.modeInfo[L];if(E.name.toLowerCase()==S)return E;if(E.alias){for(var P=0;P<E.alias.length;P++)if(E.alias[P].toLowerCase()==S)return E}}}})})();(function(f,g){(function(a){a(codemirror$1.exports,xml.exports,meta.exports)})(function(a){a.defineMode("markdown",function(d,v){var S=a.getMode(d,"text/html"),L=S.name=="null";function E(z){if(a.findModeByName){var x=a.findModeByName(z);x&&(z=x.mime||x.mimes[0])}var Se=a.getMode(d,z);return Se.name=="null"?null:Se}v.highlightFormatting===void 0&&(v.highlightFormatting=!1),v.maxBlockquoteDepth===void 0&&(v.maxBlockquoteDepth=0),v.taskLists===void 0&&(v.taskLists=!1),v.strikethrough===void 0&&(v.strikethrough=!1),v.emoji===void 0&&(v.emoji=!1),v.fencedCodeBlockHighlighting===void 0&&(v.fencedCodeBlockHighlighting=!0),v.fencedCodeBlockDefaultMode===void 0&&(v.fencedCodeBlockDefaultMode="text/plain"),v.xml===void 0&&(v.xml=!0),v.tokenTypeOverrides===void 0&&(v.tokenTypeOverrides={});var P={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"image",imageAltText:"image-alt-text",imageMarker:"image-marker",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough",emoji:"builtin"};for(var K in P)P.hasOwnProperty(K)&&v.tokenTypeOverrides[K]&&(P[K]=v.tokenTypeOverrides[K]);var W=/^([*\-_])(?:\s*\1){2,}\s*$/,Q=/^(?:[*\-+]|^[0-9]+([.)]))\s+/,F=/^\[(x| )\](?=\s)/i,q=v.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,H=/^ {0,3}(?:\={1,}|-{2,})\s*$/,te=/^[^#!\[\]*_\\<>` "'(~:]+/,B=/^(~~~+|```+)[ \t]*([\w\/+#-]*)[^\n`]*$/,O=/^\s*\[[^\]]+?\]:.*$/,k=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/,w="    ";function N(z,x,Se){return x.f=x.inline=Se,Se(z,x)}function R(z,x,Se){return x.f=x.block=Se,Se(z,x)}function _(z){return!z||!/\S/.test(z.string)}function h(z){if(z.linkTitle=!1,z.linkHref=!1,z.linkText=!1,z.em=!1,z.strong=!1,z.strikethrough=!1,z.quote=0,z.indentedCode=!1,z.f==I){var x=L;if(!x){var Se=a.innerMode(S,z.htmlState);x=Se.mode.name=="xml"&&Se.state.tagStart===null&&!Se.state.context&&Se.state.tokenize.isInText}x&&(z.f=se,z.block=y,z.htmlState=null)}return z.trailingSpace=0,z.trailingSpaceNewLine=!1,z.prevLine=z.thisLine,z.thisLine={stream:null},null}function y(z,x){var Se=z.column()===x.indentation,Me=_(x.prevLine.stream),De=x.indentedCode,Ve=x.prevLine.hr,Ae=x.list!==!1,Bt=(x.listStack[x.listStack.length-1]||0)+3;x.indentedCode=!1;var gt=x.indentation;if(x.indentationDiff===null&&(x.indentationDiff=x.indentation,Ae)){for(x.list=null;gt<x.listStack[x.listStack.length-1];)x.listStack.pop(),x.listStack.length?x.indentation=x.listStack[x.listStack.length-1]:x.list=!1;x.list!==!1&&(x.indentationDiff=gt-x.listStack[x.listStack.length-1])}var Xe=!Me&&!Ve&&!x.prevLine.header&&(!Ae||!De)&&!x.prevLine.fencedCodeEnd,Ue=(x.list===!1||Ve||Me)&&x.indentation<=Bt&&z.match(W),Be=null;if(x.indentationDiff>=4&&(De||x.prevLine.fencedCodeEnd||x.prevLine.header||Me))return z.skipToEnd(),x.indentedCode=!0,P.code;if(z.eatSpace())return null;if(Se&&x.indentation<=Bt&&(Be=z.match(q))&&Be[1].length<=6)return x.quote=0,x.header=Be[1].length,x.thisLine.header=!0,v.highlightFormatting&&(x.formatting="header"),x.f=x.inline,Z(x);if(x.indentation<=Bt&&z.eat(">"))return x.quote=Se?1:x.quote+1,v.highlightFormatting&&(x.formatting="quote"),z.eatSpace(),Z(x);if(!Ue&&!x.setext&&Se&&x.indentation<=Bt&&(Be=z.match(Q))){var ht=Be[1]?"ol":"ul";return x.indentation=gt+z.current().length,x.list=!0,x.quote=0,x.listStack.push(x.indentation),x.em=!1,x.strong=!1,x.code=!1,x.strikethrough=!1,v.taskLists&&z.match(F,!1)&&(x.taskList=!0),x.f=x.inline,v.highlightFormatting&&(x.formatting=["list","list-"+ht]),Z(x)}else{if(Se&&x.indentation<=Bt&&(Be=z.match(B,!0)))return x.quote=0,x.fencedEndRE=new RegExp(Be[1]+"+ *$"),x.localMode=v.fencedCodeBlockHighlighting&&E(Be[2]||v.fencedCodeBlockDefaultMode),x.localMode&&(x.localState=a.startState(x.localMode)),x.f=x.block=J,v.highlightFormatting&&(x.formatting="code-block"),x.code=-1,Z(x);if(x.setext||(!Xe||!Ae)&&!x.quote&&x.list===!1&&!x.code&&!Ue&&!O.test(z.string)&&(Be=z.lookAhead(1))&&(Be=Be.match(H)))return x.setext?(x.header=x.setext,x.setext=0,z.skipToEnd(),v.highlightFormatting&&(x.formatting="header")):(x.header=Be[0].charAt(0)=="="?1:2,x.setext=x.header),x.thisLine.header=!0,x.f=x.inline,Z(x);if(Ue)return z.skipToEnd(),x.hr=!0,x.thisLine.hr=!0,P.hr;if(z.peek()==="[")return N(z,x,Ee)}return N(z,x,x.inline)}function I(z,x){var Se=S.token(z,x.htmlState);if(!L){var Me=a.innerMode(S,x.htmlState);(Me.mode.name=="xml"&&Me.state.tagStart===null&&!Me.state.context&&Me.state.tokenize.isInText||x.md_inside&&z.current().indexOf(">")>-1)&&(x.f=se,x.block=y,x.htmlState=null)}return Se}function J(z,x){var Se=x.listStack[x.listStack.length-1]||0,Me=x.indentation<Se,De=Se+3;if(x.fencedEndRE&&x.indentation<=De&&(Me||z.match(x.fencedEndRE))){v.highlightFormatting&&(x.formatting="code-block");var Ve;return Me||(Ve=Z(x)),x.localMode=x.localState=null,x.block=y,x.f=se,x.fencedEndRE=null,x.code=0,x.thisLine.fencedCodeEnd=!0,Me?R(z,x,x.block):Ve}else return x.localMode?x.localMode.token(z,x.localState):(z.skipToEnd(),P.code)}function Z(z){var x=[];if(z.formatting){x.push(P.formatting),typeof z.formatting=="string"&&(z.formatting=[z.formatting]);for(var Se=0;Se<z.formatting.length;Se++)x.push(P.formatting+"-"+z.formatting[Se]),z.formatting[Se]==="header"&&x.push(P.formatting+"-"+z.formatting[Se]+"-"+z.header),z.formatting[Se]==="quote"&&(!v.maxBlockquoteDepth||v.maxBlockquoteDepth>=z.quote?x.push(P.formatting+"-"+z.formatting[Se]+"-"+z.quote):x.push("error"))}if(z.taskOpen)return x.push("meta"),x.length?x.join(" "):null;if(z.taskClosed)return x.push("property"),x.length?x.join(" "):null;if(z.linkHref?x.push(P.linkHref,"url"):(z.strong&&x.push(P.strong),z.em&&x.push(P.em),z.strikethrough&&x.push(P.strikethrough),z.emoji&&x.push(P.emoji),z.linkText&&x.push(P.linkText),z.code&&x.push(P.code),z.image&&x.push(P.image),z.imageAltText&&x.push(P.imageAltText,"link"),z.imageMarker&&x.push(P.imageMarker)),z.header&&x.push(P.header,P.header+"-"+z.header),z.quote&&(x.push(P.quote),!v.maxBlockquoteDepth||v.maxBlockquoteDepth>=z.quote?x.push(P.quote+"-"+z.quote):x.push(P.quote+"-"+v.maxBlockquoteDepth)),z.list!==!1){var Me=(z.listStack.length-1)%3;Me?Me===1?x.push(P.list2):x.push(P.list3):x.push(P.list1)}return z.trailingSpaceNewLine?x.push("trailing-space-new-line"):z.trailingSpace&&x.push("trailing-space-"+(z.trailingSpace%2?"a":"b")),x.length?x.join(" "):null}function ae(z,x){if(z.match(te,!0))return Z(x)}function se(z,x){var Se=x.text(z,x);if(typeof Se<"u")return Se;if(x.list)return x.list=null,Z(x);if(x.taskList){var Me=z.match(F,!0)[1]===" ";return Me?x.taskOpen=!0:x.taskClosed=!0,v.highlightFormatting&&(x.formatting="task"),x.taskList=!1,Z(x)}if(x.taskOpen=!1,x.taskClosed=!1,x.header&&z.match(/^#+$/,!0))return v.highlightFormatting&&(x.formatting="header"),Z(x);var De=z.next();if(x.linkTitle){x.linkTitle=!1;var Ve=De;De==="("&&(Ve=")"),Ve=(Ve+"").replace(/([.?*+^\[\]\\(){}|-])/g,"\\$1");var Ae="^\\s*(?:[^"+Ve+"\\\\]+|\\\\\\\\|\\\\.)"+Ve;if(z.match(new RegExp(Ae),!0))return P.linkHref}if(De==="`"){var Bt=x.formatting;v.highlightFormatting&&(x.formatting="code"),z.eatWhile("`");var gt=z.current().length;if(x.code==0&&(!x.quote||gt==1))return x.code=gt,Z(x);if(gt==x.code){var Xe=Z(x);return x.code=0,Xe}else return x.formatting=Bt,Z(x)}else if(x.code)return Z(x);if(De==="\\"&&(z.next(),v.highlightFormatting)){var Ue=Z(x),Be=P.formatting+"-escape";return Ue?Ue+" "+Be:Be}if(De==="!"&&z.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return x.imageMarker=!0,x.image=!0,v.highlightFormatting&&(x.formatting="image"),Z(x);if(De==="["&&x.imageMarker&&z.match(/[^\]]*\](\(.*?\)| ?\[.*?\])/,!1))return x.imageMarker=!1,x.imageAltText=!0,v.highlightFormatting&&(x.formatting="image"),Z(x);if(De==="]"&&x.imageAltText){v.highlightFormatting&&(x.formatting="image");var Ue=Z(x);return x.imageAltText=!1,x.image=!1,x.inline=x.f=X,Ue}if(De==="["&&!x.image)return x.linkText&&z.match(/^.*?\]/)||(x.linkText=!0,v.highlightFormatting&&(x.formatting="link")),Z(x);if(De==="]"&&x.linkText){v.highlightFormatting&&(x.formatting="link");var Ue=Z(x);return x.linkText=!1,x.inline=x.f=z.match(/\(.*?\)| ?\[.*?\]/,!1)?X:se,Ue}if(De==="<"&&z.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1)){x.f=x.inline=pe,v.highlightFormatting&&(x.formatting="link");var Ue=Z(x);return Ue?Ue+=" ":Ue="",Ue+P.linkInline}if(De==="<"&&z.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1)){x.f=x.inline=pe,v.highlightFormatting&&(x.formatting="link");var Ue=Z(x);return Ue?Ue+=" ":Ue="",Ue+P.linkEmail}if(v.xml&&De==="<"&&z.match(/^(!--|\?|!\[CDATA\[|[a-z][a-z0-9-]*(?:\s+[a-z_:.\-]+(?:\s*=\s*[^>]+)?)*\s*(?:>|$))/i,!1)){var ht=z.string.indexOf(">",z.pos);if(ht!=-1){var Zt=z.string.substring(z.start,ht);/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(Zt)&&(x.md_inside=!0)}return z.backUp(1),x.htmlState=a.startState(S),R(z,x,I)}if(v.xml&&De==="<"&&z.match(/^\/\w*?>/))return x.md_inside=!1,"tag";if(De==="*"||De==="_"){for(var ot=1,Ot=z.pos==1?" ":z.string.charAt(z.pos-2);ot<3&&z.eat(De);)ot++;var Lt=z.peek()||" ",Ne=!/\s/.test(Lt)&&(!k.test(Lt)||/\s/.test(Ot)||k.test(Ot)),Oe=!/\s/.test(Ot)&&(!k.test(Ot)||/\s/.test(Lt)||k.test(Lt)),ke=null,et=null;if(ot%2&&(!x.em&&Ne&&(De==="*"||!Oe||k.test(Ot))?ke=!0:x.em==De&&Oe&&(De==="*"||!Ne||k.test(Lt))&&(ke=!1)),ot>1&&(!x.strong&&Ne&&(De==="*"||!Oe||k.test(Ot))?et=!0:x.strong==De&&Oe&&(De==="*"||!Ne||k.test(Lt))&&(et=!1)),et!=null||ke!=null){v.highlightFormatting&&(x.formatting=ke==null?"strong":et==null?"em":"strong em"),ke===!0&&(x.em=De),et===!0&&(x.strong=De);var Xe=Z(x);return ke===!1&&(x.em=!1),et===!1&&(x.strong=!1),Xe}}else if(De===" "&&(z.eat("*")||z.eat("_"))){if(z.peek()===" ")return Z(x);z.backUp(1)}if(v.strikethrough){if(De==="~"&&z.eatWhile(De)){if(x.strikethrough){v.highlightFormatting&&(x.formatting="strikethrough");var Xe=Z(x);return x.strikethrough=!1,Xe}else if(z.match(/^[^\s]/,!1))return x.strikethrough=!0,v.highlightFormatting&&(x.formatting="strikethrough"),Z(x)}else if(De===" "&&z.match("~~",!0)){if(z.peek()===" ")return Z(x);z.backUp(2)}}if(v.emoji&&De===":"&&z.match(/^(?:[a-z_\d+][a-z_\d+-]*|\-[a-z_\d+][a-z_\d+-]*):/)){x.emoji=!0,v.highlightFormatting&&(x.formatting="emoji");var yt=Z(x);return x.emoji=!1,yt}return De===" "&&(z.match(/^ +$/,!1)?x.trailingSpace++:x.trailingSpace&&(x.trailingSpaceNewLine=!0)),Z(x)}function pe(z,x){var Se=z.next();if(Se===">"){x.f=x.inline=se,v.highlightFormatting&&(x.formatting="link");var Me=Z(x);return Me?Me+=" ":Me="",Me+P.linkInline}return z.match(/^[^>]+/,!0),P.linkInline}function X(z,x){if(z.eatSpace())return null;var Se=z.next();return Se==="("||Se==="["?(x.f=x.inline=oe(Se==="("?")":"]"),v.highlightFormatting&&(x.formatting="link-string"),x.linkHref=!0,Z(x)):"error"}var he={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\]]|\\.)*\])*?(?=\])/};function oe(z){return function(x,Se){var Me=x.next();if(Me===z){Se.f=Se.inline=se,v.highlightFormatting&&(Se.formatting="link-string");var De=Z(Se);return Se.linkHref=!1,De}return x.match(he[z]),Se.linkHref=!0,Z(Se)}}function Ee(z,x){return z.match(/^([^\]\\]|\\.)*\]:/,!1)?(x.f=le,z.next(),v.highlightFormatting&&(x.formatting="link"),x.linkText=!0,Z(x)):N(z,x,se)}function le(z,x){if(z.match("]:",!0)){x.f=x.inline=be,v.highlightFormatting&&(x.formatting="link");var Se=Z(x);return x.linkText=!1,Se}return z.match(/^([^\]\\]|\\.)+/,!0),P.linkText}function be(z,x){return z.eatSpace()?null:(z.match(/^[^\s]+/,!0),z.peek()===void 0?x.linkTitle=!0:z.match(/^(?:\s+(?:"(?:[^"\\]|\\.)+"|'(?:[^'\\]|\\.)+'|\((?:[^)\\]|\\.)+\)))?/,!0),x.f=x.inline=se,P.linkHref+" url")}var Fe={startState:function(){return{f:y,prevLine:{stream:null},thisLine:{stream:null},block:y,htmlState:null,indentation:0,inline:se,text:ae,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,setext:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,emoji:!1,fencedEndRE:null}},copyState:function(z){return{f:z.f,prevLine:z.prevLine,thisLine:z.thisLine,block:z.block,htmlState:z.htmlState&&a.copyState(S,z.htmlState),indentation:z.indentation,localMode:z.localMode,localState:z.localMode?a.copyState(z.localMode,z.localState):null,inline:z.inline,text:z.text,formatting:!1,linkText:z.linkText,linkTitle:z.linkTitle,linkHref:z.linkHref,code:z.code,em:z.em,strong:z.strong,strikethrough:z.strikethrough,emoji:z.emoji,header:z.header,setext:z.setext,hr:z.hr,taskList:z.taskList,list:z.list,listStack:z.listStack.slice(0),quote:z.quote,indentedCode:z.indentedCode,trailingSpace:z.trailingSpace,trailingSpaceNewLine:z.trailingSpaceNewLine,md_inside:z.md_inside,fencedEndRE:z.fencedEndRE}},token:function(z,x){if(x.formatting=!1,z!=x.thisLine.stream){if(x.header=0,x.hr=!1,z.match(/^\s*$/,!0))return h(x),null;if(x.prevLine=x.thisLine,x.thisLine={stream:z},x.taskList=!1,x.trailingSpace=0,x.trailingSpaceNewLine=!1,!x.localState&&(x.f=x.block,x.f!=I)){var Se=z.match(/^\s*/,!0)[0].replace(/\t/g,w).length;if(x.indentation=Se,x.indentationDiff=null,Se>0)return null}}return x.f(z,x)},innerMode:function(z){return z.block==I?{state:z.htmlState,mode:S}:z.localState?{state:z.localState,mode:z.localMode}:{state:z,mode:Fe}},indent:function(z,x,Se){return z.block==I&&S.indent?S.indent(z.htmlState,x,Se):z.localState&&z.localMode.indent?z.localMode.indent(z.localState,x,Se):a.Pass},blankLine:h,getType:Z,blockCommentStart:"<!--",blockCommentEnd:"-->",closeBrackets:"()[]{}''\"\"``",fold:"markdown"};return Fe},"xml"),a.defineMIME("text/markdown","markdown"),a.defineMIME("text/x-markdown","markdown")})})();var dialog={exports:{}};(function(f,g){(function(a){a(codemirror$1.exports)})(function(a){function d(S,L,E){var P=S.getWrapperElement(),K;return K=P.appendChild(document.createElement("div")),E?K.className="CodeMirror-dialog CodeMirror-dialog-bottom":K.className="CodeMirror-dialog CodeMirror-dialog-top",typeof L=="string"?K.innerHTML=L:K.appendChild(L),a.addClass(P,"dialog-opened"),K}function v(S,L){S.state.currentNotificationClose&&S.state.currentNotificationClose(),S.state.currentNotificationClose=L}a.defineExtension("openDialog",function(S,L,E){E||(E={}),v(this,null);var P=d(this,S,E.bottom),K=!1,W=this;function Q(H){if(typeof H=="string")F.value=H;else{if(K)return;K=!0,a.rmClass(P.parentNode,"dialog-opened"),P.parentNode.removeChild(P),W.focus(),E.onClose&&E.onClose(P)}}var F=P.getElementsByTagName("input")[0],q;return F?(F.focus(),E.value&&(F.value=E.value,E.selectValueOnOpen!==!1&&F.select()),E.onInput&&a.on(F,"input",function(H){E.onInput(H,F.value,Q)}),E.onKeyUp&&a.on(F,"keyup",function(H){E.onKeyUp(H,F.value,Q)}),a.on(F,"keydown",function(H){E&&E.onKeyDown&&E.onKeyDown(H,F.value,Q)||((H.keyCode==27||E.closeOnEnter!==!1&&H.keyCode==13)&&(F.blur(),a.e_stop(H),Q()),H.keyCode==13&&L(F.value,H))}),E.closeOnBlur!==!1&&a.on(P,"focusout",function(H){H.relatedTarget!==null&&Q()})):(q=P.getElementsByTagName("button")[0])&&(a.on(q,"click",function(){Q(),W.focus()}),E.closeOnBlur!==!1&&a.on(q,"blur",Q),q.focus()),Q}),a.defineExtension("openConfirm",function(S,L,E){v(this,null);var P=d(this,S,E&&E.bottom),K=P.getElementsByTagName("button"),W=!1,Q=this,F=1;function q(){W||(W=!0,a.rmClass(P.parentNode,"dialog-opened"),P.parentNode.removeChild(P),Q.focus())}K[0].focus();for(var H=0;H<K.length;++H){var te=K[H];(function(B){a.on(te,"click",function(O){a.e_preventDefault(O),q(),B&&B(Q)})})(L[H]),a.on(te,"blur",function(){--F,setTimeout(function(){F<=0&&q()},200)}),a.on(te,"focus",function(){++F})}}),a.defineExtension("openNotification",function(S,L){v(this,Q);var E=d(this,S,L&&L.bottom),P=!1,K,W=L&&typeof L.duration<"u"?L.duration:5e3;function Q(){P||(P=!0,clearTimeout(K),a.rmClass(E.parentNode,"dialog-opened"),E.parentNode.removeChild(E))}return a.on(E,"click",function(F){a.e_preventDefault(F),Q()}),W&&(K=setTimeout(Q,W)),Q})})})();var searchcursor={exports:{}};(function(f,g){(function(a){a(codemirror$1.exports)})(function(a){var d=a.Pos;function v(k){var w=k.flags;return w??(k.ignoreCase?"i":"")+(k.global?"g":"")+(k.multiline?"m":"")}function S(k,w){for(var N=v(k),R=N,_=0;_<w.length;_++)R.indexOf(w.charAt(_))==-1&&(R+=w.charAt(_));return N==R?k:new RegExp(k.source,R)}function L(k){return/\\s|\\n|\n|\\W|\\D|\[\^/.test(k.source)}function E(k,w,N){w=S(w,"g");for(var R=N.line,_=N.ch,h=k.lastLine();R<=h;R++,_=0){w.lastIndex=_;var y=k.getLine(R),I=w.exec(y);if(I)return{from:d(R,I.index),to:d(R,I.index+I[0].length),match:I}}}function P(k,w,N){if(!L(w))return E(k,w,N);w=S(w,"gm");for(var R,_=1,h=N.line,y=k.lastLine();h<=y;){for(var I=0;I<_&&!(h>y);I++){var J=k.getLine(h++);R=R==null?J:R+`
`+J}_=_*2,w.lastIndex=N.ch;var Z=w.exec(R);if(Z){var ae=R.slice(0,Z.index).split(`
`),se=Z[0].split(`
`),pe=N.line+ae.length-1,X=ae[ae.length-1].length;return{from:d(pe,X),to:d(pe+se.length-1,se.length==1?X+se[0].length:se[se.length-1].length),match:Z}}}}function K(k,w,N){for(var R,_=0;_<=k.length;){w.lastIndex=_;var h=w.exec(k);if(!h)break;var y=h.index+h[0].length;if(y>k.length-N)break;(!R||y>R.index+R[0].length)&&(R=h),_=h.index+1}return R}function W(k,w,N){w=S(w,"g");for(var R=N.line,_=N.ch,h=k.firstLine();R>=h;R--,_=-1){var y=k.getLine(R),I=K(y,w,_<0?0:y.length-_);if(I)return{from:d(R,I.index),to:d(R,I.index+I[0].length),match:I}}}function Q(k,w,N){if(!L(w))return W(k,w,N);w=S(w,"gm");for(var R,_=1,h=k.getLine(N.line).length-N.ch,y=N.line,I=k.firstLine();y>=I;){for(var J=0;J<_&&y>=I;J++){var Z=k.getLine(y--);R=R==null?Z:Z+`
`+R}_*=2;var ae=K(R,w,h);if(ae){var se=R.slice(0,ae.index).split(`
`),pe=ae[0].split(`
`),X=y+se.length,he=se[se.length-1].length;return{from:d(X,he),to:d(X+pe.length-1,pe.length==1?he+pe[0].length:pe[pe.length-1].length),match:ae}}}}var F,q;String.prototype.normalize?(F=function(k){return k.normalize("NFD").toLowerCase()},q=function(k){return k.normalize("NFD")}):(F=function(k){return k.toLowerCase()},q=function(k){return k});function H(k,w,N,R){if(k.length==w.length)return N;for(var _=0,h=N+Math.max(0,k.length-w.length);;){if(_==h)return _;var y=_+h>>1,I=R(k.slice(0,y)).length;if(I==N)return y;I>N?h=y:_=y+1}}function te(k,w,N,R){if(!w.length)return null;var _=R?F:q,h=_(w).split(/\r|\n\r?/);e:for(var y=N.line,I=N.ch,J=k.lastLine()+1-h.length;y<=J;y++,I=0){var Z=k.getLine(y).slice(I),ae=_(Z);if(h.length==1){var se=ae.indexOf(h[0]);if(se==-1)continue e;var N=H(Z,ae,se,_)+I;return{from:d(y,H(Z,ae,se,_)+I),to:d(y,H(Z,ae,se+h[0].length,_)+I)}}else{var pe=ae.length-h[0].length;if(ae.slice(pe)!=h[0])continue e;for(var X=1;X<h.length-1;X++)if(_(k.getLine(y+X))!=h[X])continue e;var he=k.getLine(y+h.length-1),oe=_(he),Ee=h[h.length-1];if(oe.slice(0,Ee.length)!=Ee)continue e;return{from:d(y,H(Z,ae,pe,_)+I),to:d(y+h.length-1,H(he,oe,Ee.length,_))}}}}function B(k,w,N,R){if(!w.length)return null;var _=R?F:q,h=_(w).split(/\r|\n\r?/);e:for(var y=N.line,I=N.ch,J=k.firstLine()-1+h.length;y>=J;y--,I=-1){var Z=k.getLine(y);I>-1&&(Z=Z.slice(0,I));var ae=_(Z);if(h.length==1){var se=ae.lastIndexOf(h[0]);if(se==-1)continue e;return{from:d(y,H(Z,ae,se,_)),to:d(y,H(Z,ae,se+h[0].length,_))}}else{var pe=h[h.length-1];if(ae.slice(0,pe.length)!=pe)continue e;for(var X=1,N=y-h.length+1;X<h.length-1;X++)if(_(k.getLine(N+X))!=h[X])continue e;var he=k.getLine(y+1-h.length),oe=_(he);if(oe.slice(oe.length-h[0].length)!=h[0])continue e;return{from:d(y+1-h.length,H(he,oe,he.length-h[0].length,_)),to:d(y,H(Z,ae,pe.length,_))}}}}function O(k,w,N,R){this.atOccurrence=!1,this.afterEmptyMatch=!1,this.doc=k,N=N?k.clipPos(N):d(0,0),this.pos={from:N,to:N};var _;typeof R=="object"?_=R.caseFold:(_=R,R=null),typeof w=="string"?(_==null&&(_=!1),this.matches=function(h,y){return(h?B:te)(k,w,y,_)}):(w=S(w,"gm"),!R||R.multiline!==!1?this.matches=function(h,y){return(h?Q:P)(k,w,y)}:this.matches=function(h,y){return(h?W:E)(k,w,y)})}O.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(k){var w=this.doc.clipPos(k?this.pos.from:this.pos.to);if(this.afterEmptyMatch&&this.atOccurrence&&(w=d(w.line,w.ch),k?(w.ch--,w.ch<0&&(w.line--,w.ch=(this.doc.getLine(w.line)||"").length)):(w.ch++,w.ch>(this.doc.getLine(w.line)||"").length&&(w.ch=0,w.line++)),a.cmpPos(w,this.doc.clipPos(w))!=0))return this.atOccurrence=!1;var N=this.matches(k,w);if(this.afterEmptyMatch=N&&a.cmpPos(N.from,N.to)==0,N)return this.pos=N,this.atOccurrence=!0,this.pos.match||!0;var R=d(k?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:R,to:R},this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(k,w){if(!!this.atOccurrence){var N=a.splitLines(k);this.doc.replaceRange(N,this.pos.from,this.pos.to,w),this.pos.to=d(this.pos.from.line+N.length-1,N[N.length-1].length+(N.length==1?this.pos.from.ch:0))}}},a.defineExtension("getSearchCursor",function(k,w,N){return new O(this.doc,k,w,N)}),a.defineDocExtension("getSearchCursor",function(k,w,N){return new O(this,k,w,N)}),a.defineExtension("selectMatches",function(k,w){for(var N=[],R=this.getSearchCursor(k,this.getCursor("from"),w);R.findNext()&&!(a.cmpPos(R.to(),this.getCursor("to"))>0);)N.push({anchor:R.from(),head:R.to()});N.length&&this.setSelections(N,0)})})})();var matchbrackets={exports:{}};(function(f,g){(function(a){a(codemirror$1.exports)})(function(a){var d=/MSIE \d/.test(navigator.userAgent)&&(document.documentMode==null||document.documentMode<8),v=a.Pos,S={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function L(F){return F&&F.bracketRegex||/[(){}[\]]/}function E(F,q,H){var te=F.getLineHandle(q.line),B=q.ch-1,O=H&&H.afterCursor;O==null&&(O=/(^| )cm-fat-cursor($| )/.test(F.getWrapperElement().className));var k=L(H),w=!O&&B>=0&&k.test(te.text.charAt(B))&&S[te.text.charAt(B)]||k.test(te.text.charAt(B+1))&&S[te.text.charAt(++B)];if(!w)return null;var N=w.charAt(1)==">"?1:-1;if(H&&H.strict&&N>0!=(B==q.ch))return null;var R=F.getTokenTypeAt(v(q.line,B+1)),_=P(F,v(q.line,B+(N>0?1:0)),N,R,H);return _==null?null:{from:v(q.line,B),to:_&&_.pos,match:_&&_.ch==w.charAt(0),forward:N>0}}function P(F,q,H,te,B){for(var O=B&&B.maxScanLineLength||1e4,k=B&&B.maxScanLines||1e3,w=[],N=L(B),R=H>0?Math.min(q.line+k,F.lastLine()+1):Math.max(F.firstLine()-1,q.line-k),_=q.line;_!=R;_+=H){var h=F.getLine(_);if(!!h){var y=H>0?0:h.length-1,I=H>0?h.length:-1;if(!(h.length>O))for(_==q.line&&(y=q.ch-(H<0?1:0));y!=I;y+=H){var J=h.charAt(y);if(N.test(J)&&(te===void 0||(F.getTokenTypeAt(v(_,y+1))||"")==(te||""))){var Z=S[J];if(Z&&Z.charAt(1)==">"==H>0)w.push(J);else if(w.length)w.pop();else return{pos:v(_,y),ch:J}}}}}return _-H==(H>0?F.lastLine():F.firstLine())?!1:null}function K(F,q,H){for(var te=F.state.matchBrackets.maxHighlightLineLength||1e3,B=H&&H.highlightNonMatching,O=[],k=F.listSelections(),w=0;w<k.length;w++){var N=k[w].empty()&&E(F,k[w].head,H);if(N&&(N.match||B!==!1)&&F.getLine(N.from.line).length<=te){var R=N.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";O.push(F.markText(N.from,v(N.from.line,N.from.ch+1),{className:R})),N.to&&F.getLine(N.to.line).length<=te&&O.push(F.markText(N.to,v(N.to.line,N.to.ch+1),{className:R}))}}if(O.length){d&&F.state.focused&&F.focus();var _=function(){F.operation(function(){for(var h=0;h<O.length;h++)O[h].clear()})};if(q)setTimeout(_,800);else return _}}function W(F){F.operation(function(){F.state.matchBrackets.currentlyHighlighted&&(F.state.matchBrackets.currentlyHighlighted(),F.state.matchBrackets.currentlyHighlighted=null),F.state.matchBrackets.currentlyHighlighted=K(F,!1,F.state.matchBrackets)})}function Q(F){F.state.matchBrackets&&F.state.matchBrackets.currentlyHighlighted&&(F.state.matchBrackets.currentlyHighlighted(),F.state.matchBrackets.currentlyHighlighted=null)}a.defineOption("matchBrackets",!1,function(F,q,H){H&&H!=a.Init&&(F.off("cursorActivity",W),F.off("focus",W),F.off("blur",Q),Q(F)),q&&(F.state.matchBrackets=typeof q=="object"?q:{},F.on("cursorActivity",W),F.on("focus",W),F.on("blur",Q))}),a.defineExtension("matchBrackets",function(){K(this,!0)}),a.defineExtension("findMatchingBracket",function(F,q,H){return(H||typeof q=="boolean")&&(H?(H.strict=q,q=H):q=q?{strict:!0}:null),E(this,F,q)}),a.defineExtension("scanForBracket",function(F,q,H,te){return P(this,F,q,H,te)})})})();(function(f,g){(function(a){a(codemirror$1.exports)})(function(a){var d=/^(\s*)(>[> ]*|[*+-] \[[x ]\]\s|[*+-]\s|(\d+)([.)]))(\s*)/,v=/^(\s*)(>[> ]*|[*+-] \[[x ]\]|[*+-]|(\d+)[.)])(\s*)$/,S=/[*+-]\s/;a.commands.newlineAndIndentContinueMarkdownList=function(E){if(E.getOption("disableInput"))return a.Pass;for(var P=E.listSelections(),K=[],W=0;W<P.length;W++){var Q=P[W].head,F=E.getStateAfter(Q.line),q=a.innerMode(E.getMode(),F);if(q.mode.name!=="markdown"&&q.mode.helperType!=="markdown"){E.execCommand("newlineAndIndent");return}else F=q.state;var H=F.list!==!1,te=F.quote!==0,B=E.getLine(Q.line),O=d.exec(B),k=/^\s*$/.test(B.slice(0,Q.ch));if(!P[W].empty()||!H&&!te||!O||k){E.execCommand("newlineAndIndent");return}if(v.test(B)){var w=te&&/>\s*$/.test(B),N=!/>\s*$/.test(B);(w||N)&&E.replaceRange("",{line:Q.line,ch:0},{line:Q.line,ch:Q.ch+1}),K[W]=`
`}else{var R=O[1],_=O[5],h=!(S.test(O[2])||O[2].indexOf(">")>=0),y=h?parseInt(O[3],10)+1+O[4]:O[2].replace("x"," ");K[W]=`
`+R+y+_,h&&L(E,Q)}}E.replaceSelections(K)};function L(E,P){var K=P.line,W=0,Q=0,F=d.exec(E.getLine(K)),q=F[1];do{W+=1;var H=K+W,te=E.getLine(H),B=d.exec(te);if(B){var O=B[1],k=parseInt(F[3],10)+W-Q,w=parseInt(B[3],10),N=w;if(q===O&&!isNaN(w))k===w&&(N=w+1),k>w&&(N=k+1),E.replaceRange(te.replace(d,O+N+B[4]+B[5]),{line:H,ch:0},{line:H,ch:te.length});else{if(q.length>O.length||q.length<O.length&&W===1)return;Q+=1}}}while(B)}})})();(function(f,g){(function(a){a(codemirror$1.exports,searchcursor.exports,dialog.exports,matchbrackets.exports)})(function(a){var d=a.Pos;function v(K,W){var Q=K.state.vim;if(!Q||Q.insertMode)return W.head;var F=Q.sel.head;if(!F)return W.head;if(!(Q.visualBlock&&W.head.line!=F.line))return W.from()==W.anchor&&!W.empty()&&W.head.line==F.line&&W.head.ch!=F.ch?new d(W.head.line,W.head.ch-1):W.head}var S=[{keys:"<Left>",type:"keyToKey",toKeys:"h"},{keys:"<Right>",type:"keyToKey",toKeys:"l"},{keys:"<Up>",type:"keyToKey",toKeys:"k"},{keys:"<Down>",type:"keyToKey",toKeys:"j"},{keys:"g<Up>",type:"keyToKey",toKeys:"gk"},{keys:"g<Down>",type:"keyToKey",toKeys:"gj"},{keys:"<Space>",type:"keyToKey",toKeys:"l"},{keys:"<BS>",type:"keyToKey",toKeys:"h",context:"normal"},{keys:"<Del>",type:"keyToKey",toKeys:"x",context:"normal"},{keys:"<C-Space>",type:"keyToKey",toKeys:"W"},{keys:"<C-BS>",type:"keyToKey",toKeys:"B",context:"normal"},{keys:"<S-Space>",type:"keyToKey",toKeys:"w"},{keys:"<S-BS>",type:"keyToKey",toKeys:"b",context:"normal"},{keys:"<C-n>",type:"keyToKey",toKeys:"j"},{keys:"<C-p>",type:"keyToKey",toKeys:"k"},{keys:"<C-[>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-c>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-[>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"<C-c>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"s",type:"keyToKey",toKeys:"cl",context:"normal"},{keys:"s",type:"keyToKey",toKeys:"c",context:"visual"},{keys:"S",type:"keyToKey",toKeys:"cc",context:"normal"},{keys:"S",type:"keyToKey",toKeys:"VdO",context:"visual"},{keys:"<Home>",type:"keyToKey",toKeys:"0"},{keys:"<End>",type:"keyToKey",toKeys:"$"},{keys:"<PageUp>",type:"keyToKey",toKeys:"<C-b>"},{keys:"<PageDown>",type:"keyToKey",toKeys:"<C-f>"},{keys:"<CR>",type:"keyToKey",toKeys:"j^",context:"normal"},{keys:"<Ins>",type:"keyToKey",toKeys:"i",context:"normal"},{keys:"<Ins>",type:"action",action:"toggleOverwrite",context:"insert"},{keys:"H",type:"motion",motion:"moveToTopLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"M",type:"motion",motion:"moveToMiddleLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"L",type:"motion",motion:"moveToBottomLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"h",type:"motion",motion:"moveByCharacters",motionArgs:{forward:!1}},{keys:"l",type:"motion",motion:"moveByCharacters",motionArgs:{forward:!0}},{keys:"j",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,linewise:!0}},{keys:"k",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,linewise:!0}},{keys:"gj",type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!0}},{keys:"gk",type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!1}},{keys:"w",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1}},{keys:"W",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1,bigWord:!0}},{keys:"e",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,inclusive:!0}},{keys:"E",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"b",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1}},{keys:"B",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1,bigWord:!0}},{keys:"ge",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,inclusive:!0}},{keys:"gE",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"{",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!1,toJumplist:!0}},{keys:"}",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!0,toJumplist:!0}},{keys:"(",type:"motion",motion:"moveBySentence",motionArgs:{forward:!1}},{keys:")",type:"motion",motion:"moveBySentence",motionArgs:{forward:!0}},{keys:"<C-f>",type:"motion",motion:"moveByPage",motionArgs:{forward:!0}},{keys:"<C-b>",type:"motion",motion:"moveByPage",motionArgs:{forward:!1}},{keys:"<C-d>",type:"motion",motion:"moveByScroll",motionArgs:{forward:!0,explicitRepeat:!0}},{keys:"<C-u>",type:"motion",motion:"moveByScroll",motionArgs:{forward:!1,explicitRepeat:!0}},{keys:"gg",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"G",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!0,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"g$",type:"motion",motion:"moveToEndOfDisplayLine"},{keys:"g^",type:"motion",motion:"moveToStartOfDisplayLine"},{keys:"g0",type:"motion",motion:"moveToStartOfDisplayLine"},{keys:"0",type:"motion",motion:"moveToStartOfLine"},{keys:"^",type:"motion",motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"+",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0}},{keys:"-",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,toFirstChar:!0}},{keys:"_",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0,repeatOffset:-1}},{keys:"$",type:"motion",motion:"moveToEol",motionArgs:{inclusive:!0}},{keys:"%",type:"motion",motion:"moveToMatchedSymbol",motionArgs:{inclusive:!0,toJumplist:!0}},{keys:"f<character>",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"F<character>",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!1}},{keys:"t<character>",type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"T<character>",type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!1}},{keys:";",type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!0}},{keys:",",type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!1}},{keys:"'<character>",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0,linewise:!0}},{keys:"`<character>",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0}},{keys:"]`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0}},{keys:"[`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1}},{keys:"]'",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0,linewise:!0}},{keys:"['",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1,linewise:!0}},{keys:"]p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0,matchIndent:!0}},{keys:"[p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0,matchIndent:!0}},{keys:"]<character>",type:"motion",motion:"moveToSymbol",motionArgs:{forward:!0,toJumplist:!0}},{keys:"[<character>",type:"motion",motion:"moveToSymbol",motionArgs:{forward:!1,toJumplist:!0}},{keys:"|",type:"motion",motion:"moveToColumn"},{keys:"o",type:"motion",motion:"moveToOtherHighlightedEnd",context:"visual"},{keys:"O",type:"motion",motion:"moveToOtherHighlightedEnd",motionArgs:{sameLine:!0},context:"visual"},{keys:"d",type:"operator",operator:"delete"},{keys:"y",type:"operator",operator:"yank"},{keys:"c",type:"operator",operator:"change"},{keys:"=",type:"operator",operator:"indentAuto"},{keys:">",type:"operator",operator:"indent",operatorArgs:{indentRight:!0}},{keys:"<",type:"operator",operator:"indent",operatorArgs:{indentRight:!1}},{keys:"g~",type:"operator",operator:"changeCase"},{keys:"gu",type:"operator",operator:"changeCase",operatorArgs:{toLower:!0},isEdit:!0},{keys:"gU",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},isEdit:!0},{keys:"n",type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:!0}},{keys:"N",type:"motion",motion:"findNext",motionArgs:{forward:!1,toJumplist:!0}},{keys:"gn",type:"motion",motion:"findAndSelectNextInclusive",motionArgs:{forward:!0}},{keys:"gN",type:"motion",motion:"findAndSelectNextInclusive",motionArgs:{forward:!1}},{keys:"x",type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!0},operatorMotionArgs:{visualLine:!1}},{keys:"X",type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!1},operatorMotionArgs:{visualLine:!0}},{keys:"D",type:"operatorMotion",operator:"delete",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},{keys:"D",type:"operator",operator:"delete",operatorArgs:{linewise:!0},context:"visual"},{keys:"Y",type:"operatorMotion",operator:"yank",motion:"expandToLine",motionArgs:{linewise:!0},context:"normal"},{keys:"Y",type:"operator",operator:"yank",operatorArgs:{linewise:!0},context:"visual"},{keys:"C",type:"operatorMotion",operator:"change",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},{keys:"C",type:"operator",operator:"change",operatorArgs:{linewise:!0},context:"visual"},{keys:"~",type:"operatorMotion",operator:"changeCase",motion:"moveByCharacters",motionArgs:{forward:!0},operatorArgs:{shouldMoveCursor:!0},context:"normal"},{keys:"~",type:"operator",operator:"changeCase",context:"visual"},{keys:"<C-u>",type:"operatorMotion",operator:"delete",motion:"moveToStartOfLine",context:"insert"},{keys:"<C-w>",type:"operatorMotion",operator:"delete",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1},context:"insert"},{keys:"<C-w>",type:"idle",context:"normal"},{keys:"<C-i>",type:"action",action:"jumpListWalk",actionArgs:{forward:!0}},{keys:"<C-o>",type:"action",action:"jumpListWalk",actionArgs:{forward:!1}},{keys:"<C-e>",type:"action",action:"scroll",actionArgs:{forward:!0,linewise:!0}},{keys:"<C-y>",type:"action",action:"scroll",actionArgs:{forward:!1,linewise:!0}},{keys:"a",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"charAfter"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"eol"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"endOfSelectedArea"},context:"visual"},{keys:"i",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"inplace"},context:"normal"},{keys:"gi",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"lastEdit"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"firstNonBlank"},context:"normal"},{keys:"gI",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"bol"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"startOfSelectedArea"},context:"visual"},{keys:"o",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!0},context:"normal"},{keys:"O",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!1},context:"normal"},{keys:"v",type:"action",action:"toggleVisualMode"},{keys:"V",type:"action",action:"toggleVisualMode",actionArgs:{linewise:!0}},{keys:"<C-v>",type:"action",action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:"<C-q>",type:"action",action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:"gv",type:"action",action:"reselectLastSelection"},{keys:"J",type:"action",action:"joinLines",isEdit:!0},{keys:"gJ",type:"action",action:"joinLines",actionArgs:{keepSpaces:!0},isEdit:!0},{keys:"p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0}},{keys:"P",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0}},{keys:"r<character>",type:"action",action:"replace",isEdit:!0},{keys:"@<character>",type:"action",action:"replayMacro"},{keys:"q<character>",type:"action",action:"enterMacroRecordMode"},{keys:"R",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{replace:!0},context:"normal"},{keys:"R",type:"operator",operator:"change",operatorArgs:{linewise:!0,fullLine:!0},context:"visual",exitVisualBlock:!0},{keys:"u",type:"action",action:"undo",context:"normal"},{keys:"u",type:"operator",operator:"changeCase",operatorArgs:{toLower:!0},context:"visual",isEdit:!0},{keys:"U",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},context:"visual",isEdit:!0},{keys:"<C-r>",type:"action",action:"redo"},{keys:"m<character>",type:"action",action:"setMark"},{keys:'"<character>',type:"action",action:"setRegister"},{keys:"zz",type:"action",action:"scrollToCursor",actionArgs:{position:"center"}},{keys:"z.",type:"action",action:"scrollToCursor",actionArgs:{position:"center"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"zt",type:"action",action:"scrollToCursor",actionArgs:{position:"top"}},{keys:"z<CR>",type:"action",action:"scrollToCursor",actionArgs:{position:"top"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"z-",type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"}},{keys:"zb",type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:".",type:"action",action:"repeatLastEdit"},{keys:"<C-a>",type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!0,backtrack:!1}},{keys:"<C-x>",type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!1,backtrack:!1}},{keys:"<C-t>",type:"action",action:"indent",actionArgs:{indentRight:!0},context:"insert"},{keys:"<C-d>",type:"action",action:"indent",actionArgs:{indentRight:!1},context:"insert"},{keys:"a<character>",type:"motion",motion:"textObjectManipulation"},{keys:"i<character>",type:"motion",motion:"textObjectManipulation",motionArgs:{textObjectInner:!0}},{keys:"/",type:"search",searchArgs:{forward:!0,querySrc:"prompt",toJumplist:!0}},{keys:"?",type:"search",searchArgs:{forward:!1,querySrc:"prompt",toJumplist:!0}},{keys:"*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"#",type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"g*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:"g#",type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:":",type:"ex"}],L=S.length,E=[{name:"colorscheme",shortName:"colo"},{name:"map"},{name:"imap",shortName:"im"},{name:"nmap",shortName:"nm"},{name:"vmap",shortName:"vm"},{name:"unmap"},{name:"write",shortName:"w"},{name:"undo",shortName:"u"},{name:"redo",shortName:"red"},{name:"set",shortName:"se"},{name:"setlocal",shortName:"setl"},{name:"setglobal",shortName:"setg"},{name:"sort",shortName:"sor"},{name:"substitute",shortName:"s",possiblyAsync:!0},{name:"nohlsearch",shortName:"noh"},{name:"yank",shortName:"y"},{name:"delmarks",shortName:"delm"},{name:"registers",shortName:"reg",excludeFromCommandHistory:!0},{name:"vglobal",shortName:"v"},{name:"global",shortName:"g"}],P=function(){function K(n){n.setOption("disableInput",!0),n.setOption("showCursorWhenSelecting",!1),a.signal(n,"vim-mode-change",{mode:"normal"}),n.on("cursorActivity",M),Ve(n),a.on(n.getInputField(),"paste",O(n))}function W(n){n.setOption("disableInput",!1),n.off("cursorActivity",M),a.off(n.getInputField(),"paste",O(n)),n.state.vim=null,tr&&clearTimeout(tr)}function Q(n,i){this==a.keyMap.vim&&(n.options.$customCursor=null,a.rmClass(n.getWrapperElement(),"cm-fat-cursor")),(!i||i.attach!=F)&&W(n)}function F(n,i){this==a.keyMap.vim&&(n.curOp&&(n.curOp.selectionChanged=!0),n.options.$customCursor=v,a.addClass(n.getWrapperElement(),"cm-fat-cursor")),(!i||i.attach!=F)&&K(n)}a.defineOption("vimMode",!1,function(n,i,o){i&&n.getOption("keyMap")!="vim"?n.setOption("keyMap","vim"):!i&&o!=a.Init&&/^vim/.test(n.getOption("keyMap"))&&n.setOption("keyMap","default")});function q(n,i){if(!!i){if(this[n])return this[n];var o=B(n);if(!o)return!1;var s=Xe.findKey(i,o);return typeof s=="function"&&a.signal(i,"vim-keypress",o),s}}var H={Shift:"S",Ctrl:"C",Alt:"A",Cmd:"D",Mod:"A",CapsLock:""},te={Enter:"CR",Backspace:"BS",Delete:"Del",Insert:"Ins"};function B(n){if(n.charAt(0)=="'")return n.charAt(1);var i=n.split(/-(?!$)/),o=i[i.length-1];if(i.length==1&&i[0].length==1)return!1;if(i.length==2&&i[0]=="Shift"&&o.length==1)return!1;for(var s=!1,u=0;u<i.length;u++){var c=i[u];c in H?i[u]=H[c]:s=!0,c in te&&(i[u]=te[c])}return s?(he(o)&&(i[i.length-1]=o.toLowerCase()),"<"+i.join("-")+">"):!1}function O(n){var i=n.state.vim;return i.onPasteFn||(i.onPasteFn=function(){i.insertMode||(n.setCursor(St(n.getCursor(),0,1)),Kt.enterInsertMode(n,{},i))}),i.onPasteFn}var k=/[\d]/,w=[a.isWordChar,function(n){return n&&!a.isWordChar(n)&&!/\s/.test(n)}],N=[function(n){return/\S/.test(n)}];function R(n,i){for(var o=[],s=n;s<n+i;s++)o.push(String.fromCharCode(s));return o}var _=R(65,26),h=R(97,26),y=R(48,10),I=[].concat(_,h,y,["<",">"]),J=[].concat(_,h,y,["-",'"',".",":","_","/"]),Z;try{Z=new RegExp("^[\\p{Lu}]$","u")}catch{Z=/^[A-Z]$/}function ae(n,i){return i>=n.firstLine()&&i<=n.lastLine()}function se(n){return/^[a-z]$/.test(n)}function pe(n){return"()[]{}".indexOf(n)!=-1}function X(n){return k.test(n)}function he(n){return Z.test(n)}function oe(n){return/^\s*$/.test(n)}function Ee(n){return".?!".indexOf(n)!=-1}function le(n,i){for(var o=0;o<i.length;o++)if(i[o]==n)return!0;return!1}var be={};function Fe(n,i,o,s,u){if(i===void 0&&!u)throw Error("defaultValue is required unless callback is provided");if(o||(o="string"),be[n]={type:o,defaultValue:i,callback:u},s)for(var c=0;c<s.length;c++)be[s[c]]=be[n];i&&z(n,i)}function z(n,i,o,s){var u=be[n];s=s||{};var c=s.scope;if(!u)return new Error("Unknown option: "+n);if(u.type=="boolean"){if(i&&i!==!0)return new Error("Invalid argument: "+n+"="+i);i!==!1&&(i=!0)}u.callback?(c!=="local"&&u.callback(i,void 0),c!=="global"&&o&&u.callback(i,o)):(c!=="local"&&(u.value=u.type=="boolean"?!!i:i),c!=="global"&&o&&(o.state.vim.options[n]={value:i}))}function x(n,i,o){var s=be[n];o=o||{};var u=o.scope;if(!s)return new Error("Unknown option: "+n);if(s.callback){var c=i&&s.callback(void 0,i);return u!=="global"&&c!==void 0?c:u!=="local"?s.callback():void 0}else{var c=u!=="global"&&i&&i.state.vim.options[n];return(c||u!=="local"&&s||{}).value}}Fe("filetype",void 0,"string",["ft"],function(n,i){if(i!==void 0)if(n===void 0){var o=i.getOption("mode");return o=="null"?"":o}else{var o=n==""?"null":n;i.setOption("mode",o)}});var Se=function(){var n=100,i=-1,o=0,s=0,u=new Array(n);function c($,V,G){var ce=i%n,de=u[ce];function ue(Re){var Ce=++i%n,We=u[Ce];We&&We.clear(),u[Ce]=$.setBookmark(Re)}if(de){var ve=de.find();ve&&!Pt(ve,V)&&ue(V)}else ue(V);ue(G),o=i,s=i-n+1,s<0&&(s=0)}function C($,V){i+=V,i>o?i=o:i<s&&(i=s);var G=u[(n+i)%n];if(G&&!G.find()){var ce=V>0?1:-1,de,ue=$.getCursor();do if(i+=ce,G=u[(n+i)%n],G&&(de=G.find())&&!Pt(ue,de))break;while(i<o&&i>s)}return G}function D($,V){var G=i,ce=C($,V);return i=G,ce&&ce.find()}return{cachedCursor:void 0,add:c,find:D,move:C}},Me=function(n){return n?{changes:n.changes,expectCursorActivityForChange:n.expectCursorActivityForChange}:{changes:[],expectCursorActivityForChange:!1}};function De(){this.latestRegister=void 0,this.isPlaying=!1,this.isRecording=!1,this.replaySearchQueries=[],this.onRecordingDone=void 0,this.lastInsertModeChanges=Me()}De.prototype={exitMacroRecordMode:function(){var n=Ae.macroModeState;n.onRecordingDone&&n.onRecordingDone(),n.onRecordingDone=void 0,n.isRecording=!1},enterMacroRecordMode:function(n,i){var o=Ae.registerController.getRegister(i);o&&(o.clear(),this.latestRegister=i,n.openDialog&&(this.onRecordingDone=n.openDialog(document.createTextNode("(recording)["+i+"]"),null,{bottom:!0})),this.isRecording=!0)}};function Ve(n){return n.state.vim||(n.state.vim={inputState:new Ue,lastEditInputState:void 0,lastEditActionCommand:void 0,lastHPos:-1,lastHSPos:-1,lastMotion:null,marks:{},insertMode:!1,insertModeRepeat:void 0,visualMode:!1,visualLine:!1,visualBlock:!1,lastSelection:null,lastPastedText:null,sel:{},options:{}}),n.state.vim}var Ae;function Bt(){Ae={searchQuery:null,searchIsReversed:!1,lastSubstituteReplacePart:void 0,jumpList:Se(),macroModeState:new De,lastCharacterSearch:{increment:0,forward:!0,selectedCharacter:""},registerController:new ot({}),searchHistoryController:new Ot,exCommandHistoryController:new Ot};for(var n in be){var i=be[n];i.value=i.defaultValue}}var gt,Xe={buildKeyMap:function(){},getRegisterController:function(){return Ae.registerController},resetVimGlobalState_:Bt,getVimGlobalState_:function(){return Ae},maybeInitVimState_:Ve,suppressErrorLogging:!1,InsertModeKey:U,map:function(n,i,o){Rt.map(n,i,o)},unmap:function(n,i){return Rt.unmap(n,i)},noremap:function(n,i,o){function s(de){return de?[de]:["normal","insert","visual"]}for(var u=s(o),c=S.length,C=L,D=c-C;D<c&&u.length;D++){var $=S[D];if($.keys==i&&(!o||!$.context||$.context===o)&&$.type.substr(0,2)!=="ex"&&$.type.substr(0,3)!=="key"){var V={};for(var G in $)V[G]=$[G];V.keys=n,o&&!V.context&&(V.context=o),this._mapCommand(V);var ce=s($.context);u=u.filter(function(de){return ce.indexOf(de)===-1})}}},mapclear:function(n){var i=S.length,o=L,s=S.slice(0,i-o);if(S=S.slice(i-o),n)for(var u=s.length-1;u>=0;u--){var c=s[u];if(n!==c.context)if(c.context)this._mapCommand(c);else{var C=["normal","insert","visual"];for(var D in C)if(C[D]!==n){var $={};for(var V in c)$[V]=c[V];$.context=C[D],this._mapCommand($)}}}},setOption:z,getOption:x,defineOption:Fe,defineEx:function(n,i,o){if(!i)i=n;else if(n.indexOf(i)!==0)throw new Error('(Vim.defineEx) "'+i+'" is not a prefix of "'+n+'", command not registered');yn[n]=o,Rt.commandMap_[i]={name:n,shortName:i,type:"api"}},handleKey:function(n,i,o){var s=this.findKey(n,i,o);if(typeof s=="function")return s()},findKey:function(n,i,o){var s=Ve(n);function u(){var G=Ae.macroModeState;if(G.isRecording){if(i=="q")return G.exitMacroRecordMode(),Be(n),!0;o!="mapping"&&Ie(G,i)}}function c(){if(i=="<Esc>"){if(s.visualMode)zt(n);else if(s.insertMode)jn(n);else return;return Be(n),!0}}function C(G){for(var ce;G;)ce=/<\w+-.+?>|<\w+>|./.exec(G),i=ce[0],G=G.substring(ce.index+i.length),Xe.handleKey(n,i,"mapping")}function D(){if(c())return!0;for(var G=s.inputState.keyBuffer=s.inputState.keyBuffer+i,ce=i.length==1,de=Lt.matchCommand(G,S,s.inputState,"insert");G.length>1&&de.type!="full";){var G=s.inputState.keyBuffer=G.slice(1),ue=Lt.matchCommand(G,S,s.inputState,"insert");ue.type!="none"&&(de=ue)}if(de.type=="none")return Be(n),!1;if(de.type=="partial")return gt&&window.clearTimeout(gt),gt=window.setTimeout(function(){s.insertMode&&s.inputState.keyBuffer&&Be(n)},x("insertModeEscKeysTimeout")),!ce;if(gt&&window.clearTimeout(gt),ce){for(var ve=n.listSelections(),Re=0;Re<ve.length;Re++){var Ce=ve[Re].head;n.replaceRange("",St(Ce,0,-(G.length-1)),Ce,"+input")}Ae.macroModeState.lastInsertModeChanges.changes.pop()}return Be(n),de.command}function $(){if(u()||c())return!0;var G=s.inputState.keyBuffer=s.inputState.keyBuffer+i;if(/^[1-9]\d*$/.test(G))return!0;var ve=/^(\d*)(.*)$/.exec(G);if(!ve)return Be(n),!1;var ce=s.visualMode?"visual":"normal",de=ve[2]||ve[1];s.inputState.operatorShortcut&&s.inputState.operatorShortcut.slice(-1)==de&&(de=s.inputState.operatorShortcut);var ue=Lt.matchCommand(de,S,s.inputState,ce);if(ue.type=="none")return Be(n),!1;if(ue.type=="partial")return!0;s.inputState.keyBuffer="";var ve=/^(\d*)(.*)$/.exec(G);return ve[1]&&ve[1]!="0"&&s.inputState.pushRepeatDigit(ve[1]),ue.command}var V;return s.insertMode?V=D():V=$(),V===!1?!s.insertMode&&i.length===1?function(){return!0}:void 0:V===!0?function(){return!0}:function(){return n.operation(function(){n.curOp.isVimOp=!0;try{V.type=="keyToKey"?C(V.toKeys):Lt.processCommand(n,s,V)}catch(G){throw n.state.vim=void 0,Ve(n),Xe.suppressErrorLogging||console.log(G),G}return!0})}},handleEx:function(n,i){Rt.processCommand(n,i)},defineMotion:Oe,defineAction:jr,defineOperator:yt,mapCommand:Jr,_mapCommand:Hn,defineRegister:Zt,exitVisualMode:zt,exitInsertMode:jn};function Ue(){this.prefixRepeat=[],this.motionRepeat=[],this.operator=null,this.operatorArgs=null,this.motion=null,this.motionArgs=null,this.keyBuffer=[],this.registerName=null}Ue.prototype.pushRepeatDigit=function(n){this.operator?this.motionRepeat=this.motionRepeat.concat(n):this.prefixRepeat=this.prefixRepeat.concat(n)},Ue.prototype.getRepeat=function(){var n=0;return(this.prefixRepeat.length>0||this.motionRepeat.length>0)&&(n=1,this.prefixRepeat.length>0&&(n*=parseInt(this.prefixRepeat.join(""),10)),this.motionRepeat.length>0&&(n*=parseInt(this.motionRepeat.join(""),10))),n};function Be(n,i){n.state.vim.inputState=new Ue,a.signal(n,"vim-command-done",i)}function ht(n,i,o){this.clear(),this.keyBuffer=[n||""],this.insertModeChanges=[],this.searchQueries=[],this.linewise=!!i,this.blockwise=!!o}ht.prototype={setText:function(n,i,o){this.keyBuffer=[n||""],this.linewise=!!i,this.blockwise=!!o},pushText:function(n,i){i&&(this.linewise||this.keyBuffer.push(`
`),this.linewise=!0),this.keyBuffer.push(n)},pushInsertModeChanges:function(n){this.insertModeChanges.push(Me(n))},pushSearchQuery:function(n){this.searchQueries.push(n)},clear:function(){this.keyBuffer=[],this.insertModeChanges=[],this.searchQueries=[],this.linewise=!1},toString:function(){return this.keyBuffer.join("")}};function Zt(n,i){var o=Ae.registerController.registers;if(!n||n.length!=1)throw Error("Register name must be 1 character");if(o[n])throw Error("Register already defined "+n);o[n]=i,J.push(n)}function ot(n){this.registers=n,this.unnamedRegister=n['"']=new ht,n["."]=new ht,n[":"]=new ht,n["/"]=new ht}ot.prototype={pushText:function(n,i,o,s,u){if(n!=="_"){s&&o.charAt(o.length-1)!==`
`&&(o+=`
`);var c=this.isValidRegister(n)?this.getRegister(n):null;if(!c){switch(i){case"yank":this.registers["0"]=new ht(o,s,u);break;case"delete":case"change":o.indexOf(`
`)==-1?this.registers["-"]=new ht(o,s):(this.shiftNumericRegisters_(),this.registers["1"]=new ht(o,s));break}this.unnamedRegister.setText(o,s,u);return}var C=he(n);C?c.pushText(o,s):c.setText(o,s,u),this.unnamedRegister.setText(c.toString(),s)}},getRegister:function(n){return this.isValidRegister(n)?(n=n.toLowerCase(),this.registers[n]||(this.registers[n]=new ht),this.registers[n]):this.unnamedRegister},isValidRegister:function(n){return n&&le(n,J)},shiftNumericRegisters_:function(){for(var n=9;n>=2;n--)this.registers[n]=this.getRegister(""+(n-1))}};function Ot(){this.historyBuffer=[],this.iterator=0,this.initialPrefix=null}Ot.prototype={nextMatch:function(n,i){var o=this.historyBuffer,s=i?-1:1;this.initialPrefix===null&&(this.initialPrefix=n);for(var u=this.iterator+s;i?u>=0:u<o.length;u+=s)for(var c=o[u],C=0;C<=c.length;C++)if(this.initialPrefix==c.substring(0,C))return this.iterator=u,c;if(u>=o.length)return this.iterator=o.length,this.initialPrefix;if(u<0)return n},pushInput:function(n){var i=this.historyBuffer.indexOf(n);i>-1&&this.historyBuffer.splice(i,1),n.length&&this.historyBuffer.push(n)},reset:function(){this.initialPrefix=null,this.iterator=this.historyBuffer.length}};var Lt={matchCommand:function(n,i,o,s){var u=gn(n,i,s,o);if(!u.full&&!u.partial)return{type:"none"};if(!u.full&&u.partial)return{type:"partial"};for(var c,C=0;C<u.full.length;C++){var D=u.full[C];c||(c=D)}if(c.keys.slice(-11)=="<character>"){var $=sr(n);if(!$)return{type:"none"};o.selectedCharacter=$}return{type:"full",command:c}},processCommand:function(n,i,o){switch(i.inputState.repeatOverride=o.repeatOverride,o.type){case"motion":this.processMotion(n,i,o);break;case"operator":this.processOperator(n,i,o);break;case"operatorMotion":this.processOperatorMotion(n,i,o);break;case"action":this.processAction(n,i,o);break;case"search":this.processSearch(n,i,o);break;case"ex":case"keyToEx":this.processEx(n,i,o);break}},processMotion:function(n,i,o){i.inputState.motion=o.motion,i.inputState.motionArgs=nn(o.motionArgs),this.evalInput(n,i)},processOperator:function(n,i,o){var s=i.inputState;if(s.operator)if(s.operator==o.operator){s.motion="expandToLine",s.motionArgs={linewise:!0},this.evalInput(n,i);return}else Be(n);s.operator=o.operator,s.operatorArgs=nn(o.operatorArgs),o.keys.length>1&&(s.operatorShortcut=o.keys),o.exitVisualBlock&&(i.visualBlock=!1,Yt(n)),i.visualMode&&this.evalInput(n,i)},processOperatorMotion:function(n,i,o){var s=i.visualMode,u=nn(o.operatorMotionArgs);u&&s&&u.visualLine&&(i.visualLine=!0),this.processOperator(n,i,o),s||this.processMotion(n,i,o)},processAction:function(n,i,o){var s=i.inputState,u=s.getRepeat(),c=!!u,C=nn(o.actionArgs)||{};s.selectedCharacter&&(C.selectedCharacter=s.selectedCharacter),o.operator&&this.processOperator(n,i,o),o.motion&&this.processMotion(n,i,o),(o.motion||o.operator)&&this.evalInput(n,i),C.repeat=u||1,C.repeatIsExplicit=c,C.registerName=s.registerName,Be(n),i.lastMotion=null,o.isEdit&&this.recordLastEdit(i,s,o),Kt[o.action](n,C,i)},processSearch:function(n,i,o){if(!n.getSearchCursor)return;var s=o.searchArgs.forward,u=o.searchArgs.wholeWordOnly;qt(n).setReversed(!s);var c=s?"/":"?",C=qt(n).getQuery(),D=n.getScrollInfo();function $(Ce,We,qe){Ae.searchHistoryController.pushInput(Ce),Ae.searchHistoryController.reset();try{Wn(n,Ce,We,qe)}catch{Qe(n,"Invalid regex: "+Ce),Be(n);return}Lt.processMotion(n,i,{type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:o.searchArgs.toJumplist}})}function V(Ce){n.scrollTo(D.left,D.top),$(Ce,!0,!0);var We=Ae.macroModeState;We.isRecording&&st(We,Ce)}function G(Ce,We,qe){var je=a.keyName(Ce),rt,lt;je=="Up"||je=="Down"?(rt=je=="Up",lt=Ce.target?Ce.target.selectionEnd:0,We=Ae.searchHistoryController.nextMatch(We,rt)||"",qe(We),lt&&Ce.target&&(Ce.target.selectionEnd=Ce.target.selectionStart=Math.min(lt,Ce.target.value.length))):je!="Left"&&je!="Right"&&je!="Ctrl"&&je!="Alt"&&je!="Shift"&&Ae.searchHistoryController.reset();var kt;try{kt=Wn(n,We,!0,!0)}catch{}kt?n.scrollIntoView(sn(n,!s,kt),30):(en(n),n.scrollTo(D.left,D.top))}function ce(Ce,We,qe){var je=a.keyName(Ce);je=="Esc"||je=="Ctrl-C"||je=="Ctrl-["||je=="Backspace"&&We==""?(Ae.searchHistoryController.pushInput(We),Ae.searchHistoryController.reset(),Wn(n,C),en(n),n.scrollTo(D.left,D.top),a.e_stop(Ce),Be(n),qe(),n.focus()):je=="Up"||je=="Down"?a.e_stop(Ce):je=="Ctrl-U"&&(a.e_stop(Ce),qe(""))}switch(o.searchArgs.querySrc){case"prompt":var de=Ae.macroModeState;if(de.isPlaying){var Re=de.replaySearchQueries.shift();$(Re,!0,!1)}else Nn(n,{onClose:V,prefix:c,desc:"(JavaScript regexp)",onKeyUp:G,onKeyDown:ce});break;case"wordUnderCursor":var ue=Yn(n,!1,!0,!1,!0),ve=!0;if(ue||(ue=Yn(n,!1,!0,!1,!1),ve=!1),!ue)return;var Re=n.getLine(ue.start.line).substring(ue.start.ch,ue.end.ch);ve&&u?Re="\\b"+Re+"\\b":Re=rn(Re),Ae.jumpList.cachedCursor=n.getCursor(),n.setCursor(ue.start),$(Re,!0,!1);break}},processEx:function(n,i,o){function s(c){Ae.exCommandHistoryController.pushInput(c),Ae.exCommandHistoryController.reset(),Rt.processCommand(n,c)}function u(c,C,D){var $=a.keyName(c),V,G;($=="Esc"||$=="Ctrl-C"||$=="Ctrl-["||$=="Backspace"&&C=="")&&(Ae.exCommandHistoryController.pushInput(C),Ae.exCommandHistoryController.reset(),a.e_stop(c),Be(n),D(),n.focus()),$=="Up"||$=="Down"?(a.e_stop(c),V=$=="Up",G=c.target?c.target.selectionEnd:0,C=Ae.exCommandHistoryController.nextMatch(C,V)||"",D(C),G&&c.target&&(c.target.selectionEnd=c.target.selectionStart=Math.min(G,c.target.value.length))):$=="Ctrl-U"?(a.e_stop(c),D("")):$!="Left"&&$!="Right"&&$!="Ctrl"&&$!="Alt"&&$!="Shift"&&Ae.exCommandHistoryController.reset()}o.type=="keyToEx"?Rt.processCommand(n,o.exArgs.input):i.visualMode?Nn(n,{onClose:s,prefix:":",value:"'<,'>",onKeyDown:u,selectValueOnOpen:!1}):Nn(n,{onClose:s,prefix:":",onKeyDown:u})},evalInput:function(n,i){var o=i.inputState,s=o.motion,u=o.motionArgs||{},c=o.operator,C=o.operatorArgs||{},D=o.registerName,$=i.sel,V=_t(i.visualMode?At(n,$.head):n.getCursor("head")),G=_t(i.visualMode?At(n,$.anchor):n.getCursor("anchor")),ce=_t(V),de=_t(G),ue,ve,Re;if(c&&this.recordLastEdit(i,o),o.repeatOverride!==void 0?Re=o.repeatOverride:Re=o.getRepeat(),Re>0&&u.explicitRepeat?u.repeatIsExplicit=!0:(u.noRepeat||!u.explicitRepeat&&Re===0)&&(Re=1,u.repeatIsExplicit=!1),o.selectedCharacter&&(u.selectedCharacter=C.selectedCharacter=o.selectedCharacter),u.repeat=Re,Be(n),s){var Ce=Ne[s](n,V,u,i,o);if(i.lastMotion=Ne[s],!Ce)return;if(u.toJumplist){var We=Ae.jumpList,qe=We.cachedCursor;qe?(Nt(n,qe,Ce),delete We.cachedCursor):Nt(n,V,Ce)}Ce instanceof Array?(ve=Ce[0],ue=Ce[1]):ue=Ce,ue||(ue=_t(V)),i.visualMode?(i.visualBlock&&ue.ch===1/0||(ue=At(n,ue)),ve&&(ve=At(n,ve)),ve=ve||de,$.anchor=ve,$.head=ue,Yt(n),It(n,i,"<",dt(ve,ue)?ve:ue),It(n,i,">",dt(ve,ue)?ue:ve)):c||(ue=At(n,ue),n.setCursor(ue.line,ue.ch))}if(c){if(C.lastSel){ve=de;var je=C.lastSel,rt=Math.abs(je.head.line-je.anchor.line),lt=Math.abs(je.head.ch-je.anchor.ch);je.visualLine?ue=new d(de.line+rt,de.ch):je.visualBlock?ue=new d(de.line+rt,de.ch+lt):je.head.line==je.anchor.line?ue=new d(de.line,de.ch+lt):ue=new d(de.line+rt,de.ch),i.visualMode=!0,i.visualLine=je.visualLine,i.visualBlock=je.visualBlock,$=i.sel={anchor:ve,head:ue},Yt(n)}else i.visualMode&&(C.lastSel={anchor:_t($.anchor),head:_t($.head),visualBlock:i.visualBlock,visualLine:i.visualLine});var kt,ut,ct,Ge,Tt;if(i.visualMode){if(kt=Wt($.head,$.anchor),ut=fn($.head,$.anchor),ct=i.visualLine||C.linewise,Ge=i.visualBlock?"block":ct?"line":"char",Tt=Mt(n,{anchor:kt,head:ut},Ge),ct){var Vt=Tt.ranges;if(Ge=="block")for(var Ut=0;Ut<Vt.length;Ut++)Vt[Ut].head.ch=Ct(n,Vt[Ut].head.line);else Ge=="line"&&(Vt[0].head=new d(Vt[0].head.line+1,0))}}else{if(kt=_t(ve||de),ut=_t(ue||ce),dt(ut,kt)){var vt=kt;kt=ut,ut=vt}ct=u.linewise||C.linewise,ct?Er(n,kt,ut):u.forward&&Ar(n,kt,ut),Ge="char";var _n=!u.inclusive||ct;Tt=Mt(n,{anchor:kt,head:ut},Ge,_n)}n.setSelections(Tt.ranges,Tt.primary),i.lastMotion=null,C.repeat=Re,C.registerName=D,C.linewise=ct;var ii=et[c](n,C,Tt.ranges,de,ue);i.visualMode&&zt(n,ii!=null),ii&&n.setCursor(ii)}},recordLastEdit:function(n,i,o){var s=Ae.macroModeState;s.isPlaying||(n.lastEditInputState=i,n.lastEditActionCommand=o,s.lastInsertModeChanges.changes=[],s.lastInsertModeChanges.expectCursorActivityForChange=!1,s.lastInsertModeChanges.visualBlock=n.visualBlock?n.sel.head.line-n.sel.anchor.line:0)}},Ne={moveToTopLine:function(n,i,o){var s=In(n).top+o.repeat-1;return new d(s,on(n.getLine(s)))},moveToMiddleLine:function(n){var i=In(n),o=Math.floor((i.top+i.bottom)*.5);return new d(o,on(n.getLine(o)))},moveToBottomLine:function(n,i,o){var s=In(n).bottom-o.repeat+1;return new d(s,on(n.getLine(s)))},expandToLine:function(n,i,o){var s=i;return new d(s.line+o.repeat-1,1/0)},findNext:function(n,i,o){var s=qt(n),u=s.getQuery();if(!!u){var c=!o.forward;return c=s.isReversed()?!c:c,Xt(n,u),sn(n,c,u,o.repeat)}},findAndSelectNextInclusive:function(n,i,o,s,u){var c=qt(n),C=c.getQuery();if(!!C){var D=!o.forward;D=c.isReversed()?!D:D;var $=Un(n,D,C,o.repeat,s);if(!!$){if(u.operator)return $;var V=$[0],G=new d($[1].line,$[1].ch-1);if(s.visualMode){(s.visualLine||s.visualBlock)&&(s.visualLine=!1,s.visualBlock=!1,a.signal(n,"vim-mode-change",{mode:"visual",subMode:""}));var ce=s.sel.anchor;if(ce)return c.isReversed()?o.forward?[ce,V]:[ce,G]:o.forward?[ce,G]:[ce,V]}else s.visualMode=!0,s.visualLine=!1,s.visualBlock=!1,a.signal(n,"vim-mode-change",{mode:"visual",subMode:""});return D?[G,V]:[V,G]}}},goToMark:function(n,i,o,s){var u=Nr(n,s,o.selectedCharacter);return u?o.linewise?{line:u.line,ch:on(n.getLine(u.line))}:u:null},moveToOtherHighlightedEnd:function(n,i,o,s){if(s.visualBlock&&o.sameLine){var u=s.sel;return[At(n,new d(u.anchor.line,u.head.ch)),At(n,new d(u.head.line,u.anchor.ch))]}else return[s.sel.head,s.sel.anchor]},jumpToMark:function(n,i,o,s){for(var u=i,c=0;c<o.repeat;c++){var C=u;for(var D in s.marks)if(!!se(D)){var $=s.marks[D].find(),V=o.forward?dt($,C):dt(C,$);if(!V&&!(o.linewise&&$.line==C.line)){var G=Pt(C,u),ce=o.forward?Cr(C,$,u):Cr(u,$,C);(G||ce)&&(u=$)}}}return o.linewise&&(u=new d(u.line,on(n.getLine(u.line)))),u},moveByCharacters:function(n,i,o){var s=i,u=o.repeat,c=o.forward?s.ch+u:s.ch-u;return new d(s.line,c)},moveByLines:function(n,i,o,s){var u=i,c=u.ch;switch(s.lastMotion){case this.moveByLines:case this.moveByDisplayLines:case this.moveByScroll:case this.moveToColumn:case this.moveToEol:c=s.lastHPos;break;default:s.lastHPos=c}var C=o.repeat+(o.repeatOffset||0),D=o.forward?u.line+C:u.line-C,$=n.firstLine(),V=n.lastLine(),G=n.findPosV(u,o.forward?C:-C,"line",s.lastHSPos),ce=o.forward?G.line>D:G.line<D;return ce&&(D=G.line,c=G.ch),D<$&&u.line==$?this.moveToStartOfLine(n,i,o,s):D>V&&u.line==V?hr(n,i,o,s,!0):(o.toFirstChar&&(c=on(n.getLine(D)),s.lastHPos=c),s.lastHSPos=n.charCoords(new d(D,c),"div").left,new d(D,c))},moveByDisplayLines:function(n,i,o,s){var u=i;switch(s.lastMotion){case this.moveByDisplayLines:case this.moveByScroll:case this.moveByLines:case this.moveToColumn:case this.moveToEol:break;default:s.lastHSPos=n.charCoords(u,"div").left}var c=o.repeat,C=n.findPosV(u,o.forward?c:-c,"line",s.lastHSPos);if(C.hitSide)if(o.forward)var D=n.charCoords(C,"div"),$={top:D.top+8,left:s.lastHSPos},C=n.coordsChar($,"div");else{var V=n.charCoords(new d(n.firstLine(),0),"div");V.left=s.lastHSPos,C=n.coordsChar(V,"div")}return s.lastHPos=C.ch,C},moveByPage:function(n,i,o){var s=i,u=o.repeat;return n.findPosV(s,o.forward?u:-u,"page")},moveByParagraph:function(n,i,o){var s=o.forward?1:-1;return Sn(n,i,o.repeat,s)},moveBySentence:function(n,i,o){var s=o.forward?1:-1;return Bn(n,i,o.repeat,s)},moveByScroll:function(n,i,o,s){var u=n.getScrollInfo(),D=null,c=o.repeat;c||(c=u.clientHeight/(2*n.defaultTextHeight()));var C=n.charCoords(i,"local");o.repeat=c;var D=Ne.moveByDisplayLines(n,i,o,s);if(!D)return null;var $=n.charCoords(D,"local");return n.scrollTo(null,u.top+$.top-C.top),D},moveByWords:function(n,i,o){return Kr(n,i,o.repeat,!!o.forward,!!o.wordEnd,!!o.bigWord)},moveTillCharacter:function(n,i,o){var s=o.repeat,u=dr(n,s,o.forward,o.selectedCharacter),c=o.forward?-1:1;return kr(c,o),u?(u.ch+=c,u):null},moveToCharacter:function(n,i,o){var s=o.repeat;return kr(0,o),dr(n,s,o.forward,o.selectedCharacter)||i},moveToSymbol:function(n,i,o){var s=o.repeat;return Tr(n,s,o.forward,o.selectedCharacter)||i},moveToColumn:function(n,i,o,s){var u=o.repeat;return s.lastHPos=u-1,s.lastHSPos=n.charCoords(i,"div").left,En(n,u)},moveToEol:function(n,i,o,s){return hr(n,i,o,s,!1)},moveToFirstNonWhiteSpaceCharacter:function(n,i){var o=i;return new d(o.line,on(n.getLine(o.line)))},moveToMatchedSymbol:function(n,i){for(var o=i,s=o.line,u=o.ch,c=n.getLine(s),C;u<c.length;u++)if(C=c.charAt(u),C&&pe(C)){var D=n.getTokenTypeAt(new d(s,u+1));if(D!=="string"&&D!=="comment")break}if(u<c.length){var $=u==="<"||u===">"?/[(){}[\]<>]/:/[(){}[\]]/,V=n.findMatchingBracket(new d(s,u),{bracketRegex:$});return V.to}else return o},moveToStartOfLine:function(n,i){return new d(i.line,0)},moveToLineOrEdgeOfDocument:function(n,i,o){var s=o.forward?n.lastLine():n.firstLine();return o.repeatIsExplicit&&(s=o.repeat-n.getOption("firstLineNumber")),new d(s,on(n.getLine(s)))},moveToStartOfDisplayLine:function(n){return n.execCommand("goLineLeft"),n.getCursor()},moveToEndOfDisplayLine:function(n){n.execCommand("goLineRight");var i=n.getCursor();return i.sticky=="before"&&i.ch--,i},textObjectManipulation:function(n,i,o,s){var u={"(":")",")":"(","{":"}","}":"{","[":"]","]":"[","<":">",">":"<"},c={"'":!0,'"':!0,"`":!0},C=o.selectedCharacter;C=="b"?C="(":C=="B"&&(C="{");var D=!o.textObjectInner,$;if(u[C])$=gr(n,i,C,D);else if(c[C])$=Vr(n,i,C,D);else if(C==="W")$=Yn(n,D,!0,!0);else if(C==="w")$=Yn(n,D,!0,!1);else if(C==="p")if($=Sn(n,i,o.repeat,0,D),o.linewise=!0,s.visualMode)s.visualLine||(s.visualLine=!0);else{var V=s.inputState.operatorArgs;V&&(V.linewise=!0),$.end.line--}else if(C==="t")$=Sr(n,i,D);else return null;return n.state.vim.visualMode?qr(n,$.start,$.end):[$.start,$.end]},repeatLastCharacterSearch:function(n,i,o){var s=Ae.lastCharacterSearch,u=o.repeat,c=o.forward===s.forward,C=(s.increment?1:0)*(c?-1:1);n.moveH(-C,"char"),o.inclusive=!!c;var D=dr(n,u,c,s.selectedCharacter);return D?(D.ch+=C,D):(n.moveH(C,"char"),i)}};function Oe(n,i){Ne[n]=i}function ke(n,i){for(var o=[],s=0;s<i;s++)o.push(n);return o}var et={change:function(n,i,o){var s,u,c=n.state.vim,C=o[0].anchor,D=o[0].head;if(c.visualMode)if(i.fullLine)D.ch=Number.MAX_VALUE,D.line--,n.setSelection(C,D),u=n.getSelection(),n.replaceSelection(""),s=C;else{u=n.getSelection();var de=ke("",o.length);n.replaceSelections(de),s=Wt(o[0].head,o[0].anchor)}else{u=n.getRange(C,D);var $=c.lastEditInputState||{};if($.motion=="moveByWords"&&!oe(u)){var V=/\s+$/.exec(u);V&&$.motionArgs&&$.motionArgs.forward&&(D=St(D,0,-V[0].length),u=u.slice(0,-V[0].length))}var G=new d(C.line-1,Number.MAX_VALUE),ce=n.firstLine()==n.lastLine();D.line>n.lastLine()&&i.linewise&&!ce?n.replaceRange("",G,D):n.replaceRange("",C,D),i.linewise&&(ce||(n.setCursor(G),a.commands.newlineAndIndent(n)),C.ch=Number.MAX_VALUE),s=C}Ae.registerController.pushText(i.registerName,"change",u,i.linewise,o.length>1),Kt.enterInsertMode(n,{head:s},n.state.vim)},delete:function(n,i,o){var s,u,c=n.state.vim;if(c.visualBlock){u=n.getSelection();var $=ke("",o.length);n.replaceSelections($),s=Wt(o[0].head,o[0].anchor)}else{var C=o[0].anchor,D=o[0].head;i.linewise&&D.line!=n.firstLine()&&C.line==n.lastLine()&&C.line==D.line-1&&(C.line==n.firstLine()?C.ch=0:C=new d(C.line-1,Ct(n,C.line-1))),u=n.getRange(C,D),n.replaceRange("",C,D),s=C,i.linewise&&(s=Ne.moveToFirstNonWhiteSpaceCharacter(n,C))}return Ae.registerController.pushText(i.registerName,"delete",u,i.linewise,c.visualBlock),At(n,s)},indent:function(n,i,o){var s=n.state.vim,u=o[0].anchor.line,c=s.visualBlock?o[o.length-1].anchor.line:o[0].head.line,C=s.visualMode?i.repeat:1;i.linewise&&c--;for(var D=u;D<=c;D++)for(var $=0;$<C;$++)n.indentLine(D,i.indentRight);return Ne.moveToFirstNonWhiteSpaceCharacter(n,o[0].anchor)},indentAuto:function(n,i,o){return n.execCommand("indentAuto"),Ne.moveToFirstNonWhiteSpaceCharacter(n,o[0].anchor)},changeCase:function(n,i,o,s,u){for(var c=n.getSelections(),C=[],D=i.toLower,$=0;$<c.length;$++){var V=c[$],G="";if(D===!0)G=V.toLowerCase();else if(D===!1)G=V.toUpperCase();else for(var ce=0;ce<V.length;ce++){var de=V.charAt(ce);G+=he(de)?de.toLowerCase():de.toUpperCase()}C.push(G)}return n.replaceSelections(C),i.shouldMoveCursor?u:!n.state.vim.visualMode&&i.linewise&&o[0].anchor.line+1==o[0].head.line?Ne.moveToFirstNonWhiteSpaceCharacter(n,s):i.linewise?s:Wt(o[0].anchor,o[0].head)},yank:function(n,i,o,s){var u=n.state.vim,c=n.getSelection(),C=u.visualMode?Wt(u.sel.anchor,u.sel.head,o[0].head,o[0].anchor):s;return Ae.registerController.pushText(i.registerName,"yank",c,i.linewise,u.visualBlock),C}};function yt(n,i){et[n]=i}var Kt={jumpListWalk:function(n,i,o){if(!o.visualMode){var s=i.repeat,u=i.forward,c=Ae.jumpList,C=c.move(n,u?s:-s),D=C?C.find():void 0;D=D||n.getCursor(),n.setCursor(D)}},scroll:function(n,i,o){if(!o.visualMode){var s=i.repeat||1,u=n.defaultTextHeight(),c=n.getScrollInfo().top,C=u*s,D=i.forward?c+C:c-C,$=_t(n.getCursor()),V=n.charCoords($,"local");if(i.forward)D>V.top?($.line+=(D-V.top)/u,$.line=Math.ceil($.line),n.setCursor($),V=n.charCoords($,"local"),n.scrollTo(null,V.top)):n.scrollTo(null,D);else{var G=D+n.getScrollInfo().clientHeight;G<V.bottom?($.line-=(V.bottom-G)/u,$.line=Math.floor($.line),n.setCursor($),V=n.charCoords($,"local"),n.scrollTo(null,V.bottom-n.getScrollInfo().clientHeight)):n.scrollTo(null,D)}}},scrollToCursor:function(n,i){var o=n.getCursor().line,s=n.charCoords(new d(o,0),"local"),u=n.getScrollInfo().clientHeight,c=s.top,C=s.bottom-c;switch(i.position){case"center":c=c-u/2+C;break;case"bottom":c=c-u+C;break}n.scrollTo(null,c)},replayMacro:function(n,i,o){var s=i.selectedCharacter,u=i.repeat,c=Ae.macroModeState;for(s=="@"?s=c.latestRegister:c.latestRegister=s;u--;)ee(n,o,c,s)},enterMacroRecordMode:function(n,i){var o=Ae.macroModeState,s=i.selectedCharacter;Ae.registerController.isValidRegister(s)&&o.enterMacroRecordMode(n,s)},toggleOverwrite:function(n){n.state.overwrite?(n.toggleOverwrite(!1),n.setOption("keyMap","vim-insert"),a.signal(n,"vim-mode-change",{mode:"insert"})):(n.toggleOverwrite(!0),n.setOption("keyMap","vim-replace"),a.signal(n,"vim-mode-change",{mode:"replace"}))},enterInsertMode:function(n,i,o){if(!n.getOption("readOnly")){o.insertMode=!0,o.insertModeRepeat=i&&i.repeat||1;var s=i?i.insertAt:null,u=o.sel,c=i.head||n.getCursor("head"),C=n.listSelections().length;if(s=="eol")c=new d(c.line,Ct(n,c.line));else if(s=="bol")c=new d(c.line,0);else if(s=="charAfter")c=St(c,0,1);else if(s=="firstNonBlank")c=Ne.moveToFirstNonWhiteSpaceCharacter(n,c);else if(s=="startOfSelectedArea"){if(!o.visualMode)return;o.visualBlock?(c=new d(Math.min(u.head.line,u.anchor.line),Math.min(u.head.ch,u.anchor.ch)),C=Math.abs(u.head.line-u.anchor.line)+1):u.head.line<u.anchor.line?c=u.head:c=new d(u.anchor.line,0)}else if(s=="endOfSelectedArea"){if(!o.visualMode)return;o.visualBlock?(c=new d(Math.min(u.head.line,u.anchor.line),Math.max(u.head.ch,u.anchor.ch)+1),C=Math.abs(u.head.line-u.anchor.line)+1):u.head.line>=u.anchor.line?c=St(u.head,0,1):c=new d(u.anchor.line,0)}else if(s=="inplace"){if(o.visualMode)return}else s=="lastEdit"&&(c=_r(n)||c);n.setOption("disableInput",!1),i&&i.replace?(n.toggleOverwrite(!0),n.setOption("keyMap","vim-replace"),a.signal(n,"vim-mode-change",{mode:"replace"})):(n.toggleOverwrite(!1),n.setOption("keyMap","vim-insert"),a.signal(n,"vim-mode-change",{mode:"insert"})),Ae.macroModeState.isPlaying||(n.on("change",pt),a.on(n.getInputField(),"keydown",ne)),o.visualMode&&zt(n),Qn(n,c,C)}},toggleVisualMode:function(n,i,o){var s=i.repeat,u=n.getCursor(),c;o.visualMode?o.visualLine^i.linewise||o.visualBlock^i.blockwise?(o.visualLine=!!i.linewise,o.visualBlock=!!i.blockwise,a.signal(n,"vim-mode-change",{mode:"visual",subMode:o.visualLine?"linewise":o.visualBlock?"blockwise":""}),Yt(n)):zt(n):(o.visualMode=!0,o.visualLine=!!i.linewise,o.visualBlock=!!i.blockwise,c=At(n,new d(u.line,u.ch+s-1)),o.sel={anchor:u,head:c},a.signal(n,"vim-mode-change",{mode:"visual",subMode:o.visualLine?"linewise":o.visualBlock?"blockwise":""}),Yt(n),It(n,o,"<",Wt(u,c)),It(n,o,">",fn(u,c)))},reselectLastSelection:function(n,i,o){var s=o.lastSelection;if(o.visualMode&&mt(n,o),s){var u=s.anchorMark.find(),c=s.headMark.find();if(!u||!c)return;o.sel={anchor:u,head:c},o.visualMode=!0,o.visualLine=s.visualLine,o.visualBlock=s.visualBlock,Yt(n),It(n,o,"<",Wt(u,c)),It(n,o,">",fn(u,c)),a.signal(n,"vim-mode-change",{mode:"visual",subMode:o.visualLine?"linewise":o.visualBlock?"blockwise":""})}},joinLines:function(n,i,o){var s,u;if(o.visualMode){if(s=n.getCursor("anchor"),u=n.getCursor("head"),dt(u,s)){var c=u;u=s,s=c}u.ch=Ct(n,u.line)-1}else{var C=Math.max(i.repeat,2);s=n.getCursor(),u=At(n,new d(s.line+C-1,1/0))}for(var D=0,$=s.line;$<u.line;$++){D=Ct(n,s.line);var c=new d(s.line+1,Ct(n,s.line+1)),V=n.getRange(s,c);V=i.keepSpaces?V.replace(/\n\r?/g,""):V.replace(/\n\s*/g," "),n.replaceRange(V,s,c)}var G=new d(s.line,D);o.visualMode&&zt(n,!1),n.setCursor(G)},newLineAndEnterInsertMode:function(n,i,o){o.insertMode=!0;var s=_t(n.getCursor());if(s.line===n.firstLine()&&!i.after)n.replaceRange(`
`,new d(n.firstLine(),0)),n.setCursor(n.firstLine(),0);else{s.line=i.after?s.line:s.line-1,s.ch=Ct(n,s.line),n.setCursor(s);var u=a.commands.newlineAndIndentContinueComment||a.commands.newlineAndIndent;u(n)}this.enterInsertMode(n,{repeat:i.repeat},o)},paste:function(n,i,o){var s=_t(n.getCursor()),u=Ae.registerController.getRegister(i.registerName),c=u.toString();if(!!c){if(i.matchIndent){var C=n.getOption("tabSize"),D=function(Ut){var vt=Ut.split("	").length-1,_n=Ut.split(" ").length-1;return vt*C+_n*1},$=n.getLine(n.getCursor().line),V=D($.match(/^\s*/)[0]),G=c.replace(/\n$/,""),ce=c!==G,de=D(c.match(/^\s*/)[0]),c=G.replace(/^\s*/gm,function(Ut){var vt=V+(D(Ut)-de);if(vt<0)return"";if(n.getOption("indentWithTabs")){var _n=Math.floor(vt/C);return Array(_n+1).join("	")}else return Array(vt+1).join(" ")});c+=ce?`
`:""}if(i.repeat>1)var c=Array(i.repeat+1).join(c);var ue=u.linewise,ve=u.blockwise;if(ve){c=c.split(`
`),ue&&c.pop();for(var Re=0;Re<c.length;Re++)c[Re]=c[Re]==""?" ":c[Re];s.ch+=i.after?1:0,s.ch=Math.min(Ct(n,s.line),s.ch)}else ue?o.visualMode?c=o.visualLine?c.slice(0,-1):`
`+c.slice(0,c.length-1)+`
`:i.after?(c=`
`+c.slice(0,c.length-1),s.ch=Ct(n,s.line)):s.ch=0:s.ch+=i.after?1:0;var Ce,We;if(o.visualMode){o.lastPastedText=c;var qe,je=zr(n,o),rt=je[0],lt=je[1],kt=n.getSelection(),ut=n.listSelections(),ct=new Array(ut.length).join("1").split("1");o.lastSelection&&(qe=o.lastSelection.headMark.find()),Ae.registerController.unnamedRegister.setText(kt),ve?(n.replaceSelections(ct),lt=new d(rt.line+c.length-1,rt.ch),n.setCursor(rt),Zn(n,lt),n.replaceSelections(c),Ce=rt):o.visualBlock?(n.replaceSelections(ct),n.setCursor(rt),n.replaceRange(c,rt,rt),Ce=rt):(n.replaceRange(c,rt,lt),Ce=n.posFromIndex(n.indexFromPos(rt)+c.length-1)),qe&&(o.lastSelection.headMark=n.setBookmark(qe)),ue&&(Ce.ch=0)}else if(ve){n.setCursor(s);for(var Re=0;Re<c.length;Re++){var Ge=s.line+Re;Ge>n.lastLine()&&n.replaceRange(`
`,new d(Ge,0));var Tt=Ct(n,Ge);Tt<s.ch&&Hr(n,Ge,s.ch)}n.setCursor(s),Zn(n,new d(s.line+c.length-1,s.ch)),n.replaceSelections(c),Ce=s}else n.replaceRange(c,s),ue&&i.after?Ce=new d(s.line+1,on(n.getLine(s.line+1))):ue&&!i.after?Ce=new d(s.line,on(n.getLine(s.line))):!ue&&i.after?(We=n.indexFromPos(s),Ce=n.posFromIndex(We+c.length-1)):(We=n.indexFromPos(s),Ce=n.posFromIndex(We+c.length));o.visualMode&&zt(n,!1),n.setCursor(Ce)}},undo:function(n,i){n.operation(function(){lr(n,a.commands.undo,i.repeat)(),n.setCursor(n.getCursor("anchor"))})},redo:function(n,i){lr(n,a.commands.redo,i.repeat)()},setRegister:function(n,i,o){o.inputState.registerName=i.selectedCharacter},setMark:function(n,i,o){var s=i.selectedCharacter;It(n,o,s,n.getCursor())},replace:function(n,i,o){var s=i.selectedCharacter,u=n.getCursor(),c,C,D=n.listSelections();if(o.visualMode)u=n.getCursor("start"),C=n.getCursor("end");else{var $=n.getLine(u.line);c=u.ch+i.repeat,c>$.length&&(c=$.length),C=new d(u.line,c)}if(s==`
`)o.visualMode||n.replaceRange("",u,C),(a.commands.newlineAndIndentContinueComment||a.commands.newlineAndIndent)(n);else{var V=n.getRange(u,C);if(V=V.replace(/[^\n]/g,s),o.visualBlock){var G=new Array(n.getOption("tabSize")+1).join(" ");V=n.getSelection(),V=V.replace(/\t/g,G).replace(/[^\n]/g,s).split(`
`),n.replaceSelections(V)}else n.replaceRange(V,u,C);o.visualMode?(u=dt(D[0].anchor,D[0].head)?D[0].anchor:D[0].head,n.setCursor(u),zt(n,!1)):n.setCursor(St(C,0,-1))}},incrementNumberToken:function(n,i){for(var o=n.getCursor(),s=n.getLine(o.line),u=/(-?)(?:(0x)([\da-f]+)|(0b|0|)(\d+))/gi,c,C,D,$;(c=u.exec(s))!==null&&(C=c.index,D=C+c[0].length,!(o.ch<D)););if(!(!i.backtrack&&D<=o.ch)){if(c){var V=c[2]||c[4],G=c[3]||c[5],ce=i.increase?1:-1,de={"0b":2,"0":8,"":10,"0x":16}[V.toLowerCase()],ue=parseInt(c[1]+G,de)+ce*i.repeat;$=ue.toString(de);var ve=V?new Array(G.length-$.length+1+c[1].length).join("0"):"";$.charAt(0)==="-"?$="-"+V+ve+$.substr(1):$=V+ve+$;var Re=new d(o.line,C),Ce=new d(o.line,D);n.replaceRange($,Re,Ce)}else return;n.setCursor(new d(o.line,C+$.length-1))}},repeatLastEdit:function(n,i,o){var s=o.lastEditInputState;if(!!s){var u=i.repeat;u&&i.repeatIsExplicit?o.lastEditInputState.repeatOverride=u:u=o.lastEditInputState.repeatOverride||u,ye(n,o,u,!1)}},indent:function(n,i){n.indentLine(n.getCursor().line,i.indentRight)},exitInsertMode:jn};function jr(n,i){Kt[n]=i}function At(n,i){var o=n.state.vim,s=o.insertMode||o.visualMode,u=Math.min(Math.max(n.firstLine(),i.line),n.lastLine()),c=Ct(n,u)-1+!!s,C=Math.min(Math.max(0,i.ch),c);return new d(u,C)}function nn(n){var i={};for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o]);return i}function St(n,i,o){return typeof i=="object"&&(o=i.ch,i=i.line),new d(n.line+i,n.ch+o)}function gn(n,i,o,s){for(var u,c=[],C=[],D=0;D<i.length;D++){var $=i[D];o=="insert"&&$.context!="insert"||$.context&&$.context!=o||s.operator&&$.type=="action"||!(u=ar(n,$.keys))||(u=="partial"&&c.push($),u=="full"&&C.push($))}return{partial:c.length&&c,full:C.length&&C}}function ar(n,i){if(i.slice(-11)=="<character>"){var o=i.length-11,s=n.slice(0,o),u=i.slice(0,o);return s==u&&n.length>o?"full":u.indexOf(s)==0?"partial":!1}else return n==i?"full":i.indexOf(n)==0?"partial":!1}function sr(n){var i=/^.*(<[^>]+>)$/.exec(n),o=i?i[1]:n.slice(-1);if(o.length>1)switch(o){case"<CR>":o=`
`;break;case"<Space>":o=" ";break;default:o="";break}return o}function lr(n,i,o){return function(){for(var s=0;s<o;s++)i(n)}}function _t(n){return new d(n.line,n.ch)}function Pt(n,i){return n.ch==i.ch&&n.line==i.line}function dt(n,i){return n.line<i.line||n.line==i.line&&n.ch<i.ch}function Wt(n,i){return arguments.length>2&&(i=Wt.apply(void 0,Array.prototype.slice.call(arguments,1))),dt(n,i)?n:i}function fn(n,i){return arguments.length>2&&(i=fn.apply(void 0,Array.prototype.slice.call(arguments,1))),dt(n,i)?i:n}function Cr(n,i,o){var s=dt(n,i),u=dt(i,o);return s&&u}function Ct(n,i){return n.getLine(i).length}function An(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}function rn(n){return n.replace(/([.?*+$\[\]\/\\(){}|\-])/g,"\\$1")}function Hr(n,i,o){var s=Ct(n,i),u=new Array(o-s+1).join(" ");n.setCursor(new d(i,s)),n.replaceRange(u,n.getCursor())}function Zn(n,i){var o=[],s=n.listSelections(),u=_t(n.clipPos(i)),c=!Pt(i,u),C=n.getCursor("head"),D=ri(s,C),$=Pt(s[D].head,s[D].anchor),V=s.length-1,G=V-D>D?V:0,ce=s[G].anchor,de=Math.min(ce.line,u.line),ue=Math.max(ce.line,u.line),ve=ce.ch,Re=u.ch,Ce=s[G].head.ch-ve,We=Re-ve;Ce>0&&We<=0?(ve++,c||Re--):Ce<0&&We>=0?(ve--,$||Re++):Ce<0&&We==-1&&(ve--,Re++);for(var qe=de;qe<=ue;qe++){var je={anchor:new d(qe,ve),head:new d(qe,Re)};o.push(je)}return n.setSelections(o),i.ch=Re,ce.ch=ve,ce}function Qn(n,i,o){for(var s=[],u=0;u<o;u++){var c=St(i,u,0);s.push({anchor:c,head:c})}n.setSelections(s,0)}function ri(n,i,o){for(var s=0;s<n.length;s++){var u=o!="head"&&Pt(n[s].anchor,i),c=o!="anchor"&&Pt(n[s].head,i);if(u||c)return s}return-1}function zr(n,i){var o=i.lastSelection,s=function(){var c=n.listSelections(),C=c[0],D=c[c.length-1],$=dt(C.anchor,C.head)?C.anchor:C.head,V=dt(D.anchor,D.head)?D.head:D.anchor;return[$,V]},u=function(){var c=n.getCursor(),C=n.getCursor(),D=o.visualBlock;if(D){var $=D.width,V=D.height;C=new d(c.line+V,c.ch+$);for(var G=[],ce=c.line;ce<C.line;ce++){var de=new d(ce,c.ch),ue=new d(ce,C.ch),ve={anchor:de,head:ue};G.push(ve)}n.setSelections(G)}else{var Re=o.anchorMark.find(),Ce=o.headMark.find(),We=Ce.line-Re.line,qe=Ce.ch-Re.ch;C={line:C.line+We,ch:We?C.ch:qe+C.ch},o.visualLine&&(c=new d(c.line,0),C=new d(C.line,Ct(n,C.line))),n.setSelection(c,C)}return[c,C]};return i.visualMode?s():u()}function mt(n,i){var o=i.sel.anchor,s=i.sel.head;i.lastPastedText&&(s=n.posFromIndex(n.indexFromPos(o)+i.lastPastedText.length),i.lastPastedText=null),i.lastSelection={anchorMark:n.setBookmark(o),headMark:n.setBookmark(s),anchor:_t(o),head:_t(s),visualMode:i.visualMode,visualLine:i.visualLine,visualBlock:i.visualBlock}}function qr(n,i,o){var s=n.state.vim.sel,u=s.head,c=s.anchor,C;return dt(o,i)&&(C=o,o=i,i=C),dt(u,c)?(u=Wt(i,u),c=fn(c,o)):(c=Wt(i,c),u=fn(u,o),u=St(u,0,-1),u.ch==-1&&u.line!=n.firstLine()&&(u=new d(u.line-1,Ct(n,u.line-1)))),[c,u]}function Yt(n,i,u){var s=n.state.vim;i=i||s.sel;var u=u||s.visualLine?"line":s.visualBlock?"block":"char",c=Mt(n,i,u);n.setSelections(c.ranges,c.primary)}function Mt(n,i,o,s){var u=_t(i.head),c=_t(i.anchor);if(o=="char"){var C=!s&&!dt(i.head,i.anchor)?1:0,D=dt(i.head,i.anchor)?1:0;return u=St(i.head,0,C),c=St(i.anchor,0,D),{ranges:[{anchor:c,head:u}],primary:0}}else if(o=="line"){if(dt(i.head,i.anchor))u.ch=0,c.ch=Ct(n,c.line);else{c.ch=0;var $=n.lastLine();u.line>$&&(u.line=$),u.ch=Ct(n,u.line)}return{ranges:[{anchor:c,head:u}],primary:0}}else if(o=="block"){var V=Math.min(c.line,u.line),G=c.ch,ce=Math.max(c.line,u.line),de=u.ch;G<de?de+=1:G+=1;for(var ue=ce-V+1,ve=u.line==V?0:ue-1,Re=[],Ce=0;Ce<ue;Ce++)Re.push({anchor:new d(V+Ce,G),head:new d(V+Ce,de)});return{ranges:Re,primary:ve}}}function ur(n){var i=n.getCursor("head");return n.getSelection().length==1&&(i=Wt(i,n.getCursor("anchor"))),i}function zt(n,i){var o=n.state.vim;i!==!1&&n.setCursor(At(n,o.sel.head)),mt(n,o),o.visualMode=!1,o.visualLine=!1,o.visualBlock=!1,o.insertMode||a.signal(n,"vim-mode-change",{mode:"normal"})}function Ar(n,i,o){var s=n.getRange(i,o);if(/\n\s*$/.test(s)){var u=s.split(`
`);u.pop();for(var c,c=u.pop();u.length>0&&c&&oe(c);c=u.pop())o.line--,o.ch=0;c?(o.line--,o.ch=Ct(n,o.line)):o.ch=0}}function Er(n,i,o){i.ch=0,o.ch=0,o.line++}function on(n){if(!n)return 0;var i=n.search(/\S/);return i==-1?n.length:i}function Yn(n,i,o,s,u){for(var c=ur(n),C=n.getLine(c.line),D=c.ch,$=u?w[0]:N[0];!$(C.charAt(D));)if(D++,D>=C.length)return null;s?$=N[0]:($=w[0],$(C.charAt(D))||($=w[1]));for(var V=D,G=D;$(C.charAt(V))&&V<C.length;)V++;for(;$(C.charAt(G))&&G>=0;)G--;if(G++,i){for(var ce=V;/\s/.test(C.charAt(V))&&V<C.length;)V++;if(ce==V){for(var de=G;/\s/.test(C.charAt(G-1))&&G>0;)G--;G||(G=de)}}return{start:new d(c.line,G),end:new d(c.line,V)}}function Sr(n,i,o){var s=i;if(!a.findMatchingTag||!a.findEnclosingTag)return{start:s,end:s};var u=a.findMatchingTag(n,i)||a.findEnclosingTag(n,i);return!u||!u.open||!u.close?{start:s,end:s}:o?{start:u.open.from,end:u.close.to}:{start:u.open.to,end:u.close.from}}function Nt(n,i,o){Pt(i,o)||Ae.jumpList.add(n,i,o)}function kr(n,i){Ae.lastCharacterSearch.increment=n,Ae.lastCharacterSearch.forward=i.forward,Ae.lastCharacterSearch.selectedCharacter=i.selectedCharacter}var Dt={"(":"bracket",")":"bracket","{":"bracket","}":"bracket","[":"section","]":"section","*":"comment","/":"comment",m:"method",M:"method","#":"preprocess"},cr={bracket:{isComplete:function(n){if(n.nextCh===n.symb){if(n.depth++,n.depth>=1)return!0}else n.nextCh===n.reverseSymb&&n.depth--;return!1}},section:{init:function(n){n.curMoveThrough=!0,n.symb=(n.forward?"]":"[")===n.symb?"{":"}"},isComplete:function(n){return n.index===0&&n.nextCh===n.symb}},comment:{isComplete:function(n){var i=n.lastCh==="*"&&n.nextCh==="/";return n.lastCh=n.nextCh,i}},method:{init:function(n){n.symb=n.symb==="m"?"{":"}",n.reverseSymb=n.symb==="{"?"}":"{"},isComplete:function(n){return n.nextCh===n.symb}},preprocess:{init:function(n){n.index=0},isComplete:function(n){if(n.nextCh==="#"){var i=n.lineText.match(/^#(\w+)/)[1];if(i==="endif"){if(n.forward&&n.depth===0)return!0;n.depth++}else if(i==="if"){if(!n.forward&&n.depth===0)return!0;n.depth--}if(i==="else"&&n.depth===0)return!0}return!1}}};function Tr(n,i,o,s){var u=_t(n.getCursor()),c=o?1:-1,C=o?n.lineCount():-1,D=u.ch,$=u.line,V=n.getLine($),G={lineText:V,nextCh:V.charAt(D),lastCh:null,index:D,symb:s,reverseSymb:(o?{")":"(","}":"{"}:{"(":")","{":"}"})[s],forward:o,depth:0,curMoveThrough:!1},ce=Dt[s];if(!ce)return u;var de=cr[ce].init,ue=cr[ce].isComplete;for(de&&de(G);$!==C&&i;){if(G.index+=c,G.nextCh=G.lineText.charAt(G.index),!G.nextCh){if($+=c,G.lineText=n.getLine($)||"",c>0)G.index=0;else{var ve=G.lineText.length;G.index=ve>0?ve-1:0}G.nextCh=G.lineText.charAt(G.index)}ue(G)&&(u.line=$,u.ch=G.index,i--)}return G.nextCh||G.curMoveThrough?new d($,G.index):u}function fr(n,i,o,s,u){var c=i.line,C=i.ch,D=n.getLine(c),$=o?1:-1,V=s?N:w;if(u&&D==""){if(c+=$,D=n.getLine(c),!ae(n,c))return null;C=o?0:D.length}for(;;){if(u&&D=="")return{from:0,to:0,line:c};for(var G=$>0?D.length:-1,ce=G,de=G;C!=G;){for(var ue=!1,ve=0;ve<V.length&&!ue;++ve)if(V[ve](D.charAt(C))){for(ce=C;C!=G&&V[ve](D.charAt(C));)C+=$;if(de=C,ue=ce!=de,ce==i.ch&&c==i.line&&de==ce+$)continue;return{from:Math.min(ce,de+1),to:Math.max(ce,de),line:c}}ue||(C+=$)}if(c+=$,!ae(n,c))return null;D=n.getLine(c),C=$>0?0:D.length}}function Kr(n,i,o,s,u,c){var C=_t(i),D=[];(s&&!u||!s&&u)&&o++;for(var $=!(s&&u),V=0;V<o;V++){var G=fr(n,i,s,c,$);if(!G){var ce=Ct(n,n.lastLine());D.push(s?{line:n.lastLine(),from:ce,to:ce}:{line:0,from:0,to:0});break}D.push(G),i=new d(G.line,s?G.to-1:G.from)}var de=D.length!=o,ue=D[0],ve=D.pop();return s&&!u?(!de&&(ue.from!=C.ch||ue.line!=C.line)&&(ve=D.pop()),new d(ve.line,ve.from)):s&&u?new d(ve.line,ve.to-1):!s&&u?(!de&&(ue.to!=C.ch||ue.line!=C.line)&&(ve=D.pop()),new d(ve.line,ve.to)):new d(ve.line,ve.from)}function hr(n,i,o,s,u){var c=i,C=new d(c.line+o.repeat-1,1/0),D=n.clipPos(C);return D.ch--,u||(s.lastHPos=1/0,s.lastHSPos=n.charCoords(D,"div").left),C}function dr(n,i,o,s){for(var u=n.getCursor(),c=u.ch,C,D=0;D<i;D++){var $=n.getLine(u.line);if(C=pr(c,$,s,o,!0),C==-1)return null;c=C}return new d(n.getCursor().line,C)}function En(n,i){var o=n.getCursor().line;return At(n,new d(o,i-1))}function It(n,i,o,s){!le(o,I)||(i.marks[o]&&i.marks[o].clear(),i.marks[o]=n.setBookmark(s))}function pr(n,i,o,s,u){var c;return s?(c=i.indexOf(o,n+1),c!=-1&&!u&&(c-=1)):(c=i.lastIndexOf(o,n-1),c!=-1&&!u&&(c+=1)),c}function Sn(n,i,o,s,u){var c=i.line,C=n.firstLine(),D=n.lastLine(),$,V,G=c;function ce(Ce){return!n.getLine(Ce)}function de(Ce,We,qe){return qe?ce(Ce)!=ce(Ce+We):!ce(Ce)&&ce(Ce+We)}if(s){for(;C<=G&&G<=D&&o>0;)de(G,s)&&o--,G+=s;return new d(G,0)}var ue=n.state.vim;if(ue.visualLine&&de(c,1,!0)){var ve=ue.sel.anchor;de(ve.line,-1,!0)&&(!u||ve.line!=c)&&(c+=1)}var Re=ce(c);for(G=c;G<=D&&o;G++)de(G,1,!0)&&(!u||ce(G)!=Re)&&o--;for(V=new d(G,0),G>D&&!Re?Re=!0:u=!1,G=c;G>C&&!((!u||ce(G)==Re||G==c)&&de(G,-1,!0));G--);return $=new d(G,0),{start:$,end:V}}function Bn(n,i,o,s){function u($,V){if(V.pos+V.dir<0||V.pos+V.dir>=V.line.length){if(V.ln+=V.dir,!ae($,V.ln)){V.line=null,V.ln=null,V.pos=null;return}V.line=$.getLine(V.ln),V.pos=V.dir>0?0:V.line.length-1}else V.pos+=V.dir}function c($,V,G,ce){var Ce=$.getLine(V),de=Ce==="",ue={line:Ce,ln:V,pos:G,dir:ce},ve={ln:ue.ln,pos:ue.pos},Re=ue.line==="";for(u($,ue);ue.line!==null;){if(ve.ln=ue.ln,ve.pos=ue.pos,ue.line===""&&!Re)return{ln:ue.ln,pos:ue.pos};if(de&&ue.line!==""&&!oe(ue.line[ue.pos]))return{ln:ue.ln,pos:ue.pos};Ee(ue.line[ue.pos])&&!de&&(ue.pos===ue.line.length-1||oe(ue.line[ue.pos+1]))&&(de=!0),u($,ue)}var Ce=$.getLine(ve.ln);ve.pos=0;for(var We=Ce.length-1;We>=0;--We)if(!oe(Ce[We])){ve.pos=We;break}return ve}function C($,V,G,ce){var Re=$.getLine(V),de={line:Re,ln:V,pos:G,dir:ce},ue={ln:de.ln,pos:null},ve=de.line==="";for(u($,de);de.line!==null;){if(de.line===""&&!ve)return ue.pos!==null?ue:{ln:de.ln,pos:de.pos};if(Ee(de.line[de.pos])&&ue.pos!==null&&!(de.ln===ue.ln&&de.pos+1===ue.pos))return ue;de.line!==""&&!oe(de.line[de.pos])&&(ve=!1,ue={ln:de.ln,pos:de.pos}),u($,de)}var Re=$.getLine(ue.ln);ue.pos=0;for(var Ce=0;Ce<Re.length;++Ce)if(!oe(Re[Ce])){ue.pos=Ce;break}return ue}for(var D={ln:i.line,pos:i.ch};o>0;)s<0?D=C(n,D.ln,D.pos,s):D=c(n,D.ln,D.pos,s),o--;return new d(D.ln,D.pos)}function gr(n,i,o,s){var u=i,c,C,D={"(":/[()]/,")":/[()]/,"[":/[[\]]/,"]":/[[\]]/,"{":/[{}]/,"}":/[{}]/,"<":/[<>]/,">":/[<>]/}[o],$={"(":"(",")":"(","[":"[","]":"[","{":"{","}":"{","<":"<",">":"<"}[o],V=n.getLine(u.line).charAt(u.ch),G=V===$?1:0;if(c=n.scanForBracket(new d(u.line,u.ch+G),-1,void 0,{bracketRegex:D}),C=n.scanForBracket(new d(u.line,u.ch+G),1,void 0,{bracketRegex:D}),!c||!C)return{start:u,end:u};if(c=c.pos,C=C.pos,c.line==C.line&&c.ch>C.ch||c.line>C.line){var ce=c;c=C,C=ce}return s?C.ch+=1:c.ch+=1,{start:c,end:C}}function Vr(n,i,o,s){var u=_t(i),c=n.getLine(u.line),C=c.split(""),D,$,V,G,ce=C.indexOf(o);if(u.ch<ce?u.ch=ce:ce<u.ch&&C[u.ch]==o&&($=u.ch,--u.ch),C[u.ch]==o&&!$)D=u.ch+1;else for(V=u.ch;V>-1&&!D;V--)C[V]==o&&(D=V+1);if(D&&!$)for(V=D,G=C.length;V<G&&!$;V++)C[V]==o&&($=V);return!D||!$?{start:u,end:u}:(s&&(--D,++$),{start:new d(u.line,D),end:new d(u.line,$)})}Fe("pcre",!0,"boolean");function kn(){}kn.prototype={getQuery:function(){return Ae.query},setQuery:function(n){Ae.query=n},getOverlay:function(){return this.searchOverlay},setOverlay:function(n){this.searchOverlay=n},isReversed:function(){return Ae.isReversed},setReversed:function(n){Ae.isReversed=n},getScrollbarAnnotate:function(){return this.annotate},setScrollbarAnnotate:function(n){this.annotate=n}};function qt(n){var i=n.state.vim;return i.searchState_||(i.searchState_=new kn)}function mr(n){return Rn(n,"/")}function Tn(n){return mn(n,"/")}function Rn(n,i){var o=mn(n,i)||[];if(!o.length)return[];var s=[];if(o[0]===0){for(var u=0;u<o.length;u++)typeof o[u]=="number"&&s.push(n.substring(o[u]+1,o[u+1]));return s}}function mn(n,i){i||(i="/");for(var o=!1,s=[],u=0;u<n.length;u++){var c=n.charAt(u);!o&&c==i&&s.push(u),o=!o&&c=="\\"}return s}function vn(n){for(var i="|(){",o="}",s=!1,u=[],c=-1;c<n.length;c++){var C=n.charAt(c)||"",D=n.charAt(c+1)||"",$=D&&i.indexOf(D)!=-1;s?((C!=="\\"||!$)&&u.push(C),s=!1):C==="\\"?(s=!0,D&&o.indexOf(D)!=-1&&($=!0),(!$||D==="\\")&&u.push(C)):(u.push(C),$&&D!=="\\"&&u.push("\\"))}return u.join("")}var vr={"\\n":`
`,"\\r":"\r","\\t":"	"};function Rr(n){for(var i=!1,o=[],s=-1;s<n.length;s++){var u=n.charAt(s)||"",c=n.charAt(s+1)||"";vr[u+c]?(o.push(vr[u+c]),s++):i?(o.push(u),i=!1):u==="\\"?(i=!0,X(c)||c==="$"?o.push("$"):c!=="/"&&c!=="\\"&&o.push("\\")):(u==="$"&&o.push("$"),o.push(u),c==="/"&&o.push("\\"))}return o.join("")}var Ln={"\\/":"/","\\\\":"\\","\\n":`
`,"\\r":"\r","\\t":"	","\\&":"&"};function yr(n){for(var i=new a.StringStream(n),o=[];!i.eol();){for(;i.peek()&&i.peek()!="\\";)o.push(i.next());var s=!1;for(var u in Ln)if(i.match(u,!0)){s=!0,o.push(Ln[u]);break}s||o.push(i.next())}return o.join("")}function Lr(n,i,o){var s=Ae.registerController.getRegister("/");if(s.setText(n),n instanceof RegExp)return n;var u=Tn(n),c,C;if(!u.length)c=n;else{c=n.substring(0,u[0]);var D=n.substring(u[0]);C=D.indexOf("i")!=-1}if(!c)return null;x("pcre")||(c=vn(c)),o&&(i=/^[^A-Z]*$/.test(c));var $=new RegExp(c,i||C?"im":"m");return $}function an(n){typeof n=="string"&&(n=document.createElement(n));for(var i,o=1;o<arguments.length;o++)if(!!(i=arguments[o]))if(typeof i!="object"&&(i=document.createTextNode(i)),i.nodeType)n.appendChild(i);else for(var s in i)!Object.prototype.hasOwnProperty.call(i,s)||(s[0]==="$"?n.style[s.slice(1)]=i[s]:n.setAttribute(s,i[s]));return n}function Qe(n,i){var o=an("pre",{$color:"red",class:"cm-vim-message"},i);n.openNotification?n.openNotification(o,{bottom:!0,duration:5e3}):alert(o.innerText)}function Xn(n,i){return an(document.createDocumentFragment(),an("span",{$fontFamily:"monospace",$whiteSpace:"pre"},n,an("input",{type:"text",autocorrect:"off",autocapitalize:"off",spellcheck:"false"})),i&&an("span",{$color:"#888"},i))}function Nn(n,i){var o=Xn(i.prefix,i.desc);if(n.openDialog)n.openDialog(o,i.onClose,{onKeyDown:i.onKeyDown,onKeyUp:i.onKeyUp,bottom:!0,selectValueOnOpen:!1,value:i.value});else{var s="";typeof i.prefix!="string"&&i.prefix&&(s+=i.prefix.textContent),i.desc&&(s+=" "+i.desc),i.onClose(prompt(s,""))}}function On(n,i){if(n instanceof RegExp&&i instanceof RegExp){for(var o=["global","multiline","ignoreCase","source"],s=0;s<o.length;s++){var u=o[s];if(n[u]!==i[u])return!1}return!0}return!1}function Wn(n,i,o,s){if(!!i){var u=qt(n),c=Lr(i,!!o,!!s);if(!!c)return Xt(n,c),On(c,u.getQuery())||u.setQuery(c),c}}function er(n){if(n.source.charAt(0)=="^")var i=!0;return{token:function(o){if(i&&!o.sol()){o.skipToEnd();return}var s=o.match(n,!1);if(s)return s[0].length==0?(o.next(),"searching"):!o.sol()&&(o.backUp(1),!n.exec(o.next()+s[0]))?(o.next(),null):(o.match(n),"searching");for(;!o.eol()&&(o.next(),!o.match(n,!1)););},query:n}}var tr=0;function Xt(n,i){clearTimeout(tr),tr=setTimeout(function(){if(!!n.state.vim){var o=qt(n),s=o.getOverlay();(!s||i!=s.query)&&(s&&n.removeOverlay(s),s=er(i),n.addOverlay(s),n.showMatchesOnScrollbar&&(o.getScrollbarAnnotate()&&o.getScrollbarAnnotate().clear(),o.setScrollbarAnnotate(n.showMatchesOnScrollbar(i))),o.setOverlay(s))}},50)}function sn(n,i,o,s){return s===void 0&&(s=1),n.operation(function(){for(var u=n.getCursor(),c=n.getSearchCursor(o,u),C=0;C<s;C++){var D=c.find(i);if(C==0&&D&&Pt(c.from(),u)){var $=i?c.from():c.to();D=c.find(i),D&&!D[0]&&Pt(c.from(),$)&&n.getLine($.line).length==$.ch&&(D=c.find(i))}if(!D&&(c=n.getSearchCursor(o,i?new d(n.lastLine()):new d(n.firstLine(),0)),!c.find(i)))return}return c.from()})}function Un(n,i,o,s,u){return s===void 0&&(s=1),n.operation(function(){var c=n.getCursor(),C=n.getSearchCursor(o,c),D=C.find(!i);!u.visualMode&&D&&Pt(C.from(),c)&&C.find(!i);for(var $=0;$<s;$++)if(D=C.find(i),!D&&(C=n.getSearchCursor(o,i?new d(n.lastLine()):new d(n.firstLine(),0)),!C.find(i)))return;return[C.from(),C.to()]})}function en(n){var i=qt(n);n.removeOverlay(qt(n).getOverlay()),i.setOverlay(null),i.getScrollbarAnnotate()&&(i.getScrollbarAnnotate().clear(),i.setScrollbarAnnotate(null))}function ln(n,i,o){return typeof n!="number"&&(n=n.line),i instanceof Array?le(n,i):typeof o=="number"?n>=i&&n<=o:n==i}function In(n){var i=n.getScrollInfo(),o=6,s=10,u=n.coordsChar({left:0,top:o+i.top},"local"),c=i.clientHeight-s+i.top,C=n.coordsChar({left:0,top:c},"local");return{top:u.line,bottom:C.line}}function Nr(n,i,o){if(o=="'"||o=="`")return Ae.jumpList.find(n,-1)||new d(0,0);if(o==".")return _r(n);var s=i.marks[o];return s&&s.find()}function _r(n){for(var i=n.doc.history.done,o=i.length;o--;)if(i[o].changes)return _t(i[o].changes[0].to)}var Or=function(){this.buildCommandMap_()};Or.prototype={processCommand:function(n,i,o){var s=this;n.operation(function(){n.curOp.isVimOp=!0,s._processCommand(n,i,o)})},_processCommand:function(n,i,o){var s=n.state.vim,u=Ae.registerController.getRegister(":"),c=u.toString();s.visualMode&&zt(n);var C=new a.StringStream(i);u.setText(i);var D=o||{};D.input=i;try{this.parseInput_(n,C,D)}catch(ce){throw Qe(n,ce.toString()),ce}var $,V;if(!D.commandName)D.line!==void 0&&(V="move");else if($=this.matchCommand_(D.commandName),$){if(V=$.name,$.excludeFromCommandHistory&&u.setText(c),this.parseCommandArgs_(C,D,$),$.type=="exToKey"){for(var G=0;G<$.toKeys.length;G++)Xe.handleKey(n,$.toKeys[G],"mapping");return}else if($.type=="exToEx"){this.processCommand(n,$.toInput);return}}if(!V){Qe(n,'Not an editor command ":'+i+'"');return}try{yn[V](n,D),(!$||!$.possiblyAsync)&&D.callback&&D.callback()}catch(ce){throw Qe(n,ce.toString()),ce}},parseInput_:function(n,i,o){i.eatWhile(":"),i.eat("%")?(o.line=n.firstLine(),o.lineEnd=n.lastLine()):(o.line=this.parseLineSpec_(n,i),o.line!==void 0&&i.eat(",")&&(o.lineEnd=this.parseLineSpec_(n,i)));var s=i.match(/^(\w+|!!|@@|[!#&*<=>@~])/);return s?o.commandName=s[1]:o.commandName=i.match(/.*/)[0],o},parseLineSpec_:function(n,i){var o=i.match(/^(\d+)/);if(o)return parseInt(o[1],10)-1;switch(i.next()){case".":return this.parseLineSpecOffset_(i,n.getCursor().line);case"$":return this.parseLineSpecOffset_(i,n.lastLine());case"'":var s=i.next(),u=Nr(n,n.state.vim,s);if(!u)throw new Error("Mark not set");return this.parseLineSpecOffset_(i,u.line);case"-":case"+":return i.backUp(1),this.parseLineSpecOffset_(i,n.getCursor().line);default:i.backUp(1);return}},parseLineSpecOffset_:function(n,i){var o=n.match(/^([+-])?(\d+)/);if(o){var s=parseInt(o[2],10);o[1]=="-"?i-=s:i+=s}return i},parseCommandArgs_:function(n,i,o){if(!n.eol()){i.argString=n.match(/.*/)[0];var s=o.argDelimiter||/\s+/,u=An(i.argString).split(s);u.length&&u[0]&&(i.args=u)}},matchCommand_:function(n){for(var i=n.length;i>0;i--){var o=n.substring(0,i);if(this.commandMap_[o]){var s=this.commandMap_[o];if(s.name.indexOf(n)===0)return s}}return null},buildCommandMap_:function(){this.commandMap_={};for(var n=0;n<E.length;n++){var i=E[n],o=i.shortName||i.name;this.commandMap_[o]=i}},map:function(n,i,o){if(n!=":"&&n.charAt(0)==":"){if(o)throw Error("Mode not supported for ex mappings");var s=n.substring(1);i!=":"&&i.charAt(0)==":"?this.commandMap_[s]={name:s,type:"exToEx",toInput:i.substring(1),user:!0}:this.commandMap_[s]={name:s,type:"exToKey",toKeys:i,user:!0}}else if(i!=":"&&i.charAt(0)==":"){var u={keys:n,type:"keyToEx",exArgs:{input:i.substring(1)}};o&&(u.context=o),S.unshift(u)}else{var u={keys:n,type:"keyToKey",toKeys:i};o&&(u.context=o),S.unshift(u)}},unmap:function(n,i){if(n!=":"&&n.charAt(0)==":"){if(i)throw Error("Mode not supported for ex mappings");var o=n.substring(1);if(this.commandMap_[o]&&this.commandMap_[o].user)return delete this.commandMap_[o],!0}else for(var s=n,u=0;u<S.length;u++)if(s==S[u].keys&&S[u].context===i)return S.splice(u,1),!0}};var yn={colorscheme:function(n,i){if(!i.args||i.args.length<1){Qe(n,n.getOption("theme"));return}n.setOption("theme",i.args[0])},map:function(n,i,o){var s=i.args;if(!s||s.length<2){n&&Qe(n,"Invalid mapping: "+i.input);return}Rt.map(s[0],s[1],o)},imap:function(n,i){this.map(n,i,"insert")},nmap:function(n,i){this.map(n,i,"normal")},vmap:function(n,i){this.map(n,i,"visual")},unmap:function(n,i,o){var s=i.args;(!s||s.length<1||!Rt.unmap(s[0],o))&&n&&Qe(n,"No such mapping: "+i.input)},move:function(n,i){Lt.processCommand(n,n.state.vim,{type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0},repeatOverride:i.line+1})},set:function(n,i){var o=i.args,s=i.setCfg||{};if(!o||o.length<1){n&&Qe(n,"Invalid mapping: "+i.input);return}var u=o[0].split("="),c=u[0],C=u[1],D=!1;if(c.charAt(c.length-1)=="?"){if(C)throw Error("Trailing characters: "+i.argString);c=c.substring(0,c.length-1),D=!0}C===void 0&&c.substring(0,2)=="no"&&(c=c.substring(2),C=!1);var $=be[c]&&be[c].type=="boolean";if($&&C==null&&(C=!0),!$&&C===void 0||D){var V=x(c,n,s);V instanceof Error?Qe(n,V.message):V===!0||V===!1?Qe(n," "+(V?"":"no")+c):Qe(n,"  "+c+"="+V)}else{var G=z(c,C,n,s);G instanceof Error&&Qe(n,G.message)}},setlocal:function(n,i){i.setCfg={scope:"local"},this.set(n,i)},setglobal:function(n,i){i.setCfg={scope:"global"},this.set(n,i)},registers:function(n,i){var o=i.args,s=Ae.registerController.registers,u=`----------Registers----------

`;if(o){var c;o=o.join("");for(var D=0;D<o.length;D++)if(c=o.charAt(D),!!Ae.registerController.isValidRegister(c)){var $=s[c]||new ht;u+='"'+c+"    "+$.toString()+`
`}}else for(var c in s){var C=s[c].toString();C.length&&(u+='"'+c+"    "+C+`
`)}Qe(n,u)},sort:function(n,i){var o,s,u,c,C;function D(){if(i.argString){var ct=new a.StringStream(i.argString);if(ct.eat("!")&&(o=!0),ct.eol())return;if(!ct.eatSpace())return"Invalid arguments";var Ge=ct.match(/([dinuox]+)?\s*(\/.+\/)?\s*/);if(!Ge&&!ct.eol())return"Invalid arguments";if(Ge[1]){s=Ge[1].indexOf("i")!=-1,u=Ge[1].indexOf("u")!=-1;var Tt=Ge[1].indexOf("d")!=-1||Ge[1].indexOf("n")!=-1&&1,Vt=Ge[1].indexOf("x")!=-1&&1,Ut=Ge[1].indexOf("o")!=-1&&1;if(Tt+Vt+Ut>1)return"Invalid arguments";c=Tt&&"decimal"||Vt&&"hex"||Ut&&"octal"}Ge[2]&&(C=new RegExp(Ge[2].substr(1,Ge[2].length-2),s?"i":""))}}var $=D();if($){Qe(n,$+": "+i.argString);return}var V=i.line||n.firstLine(),G=i.lineEnd||i.line||n.lastLine();if(V==G)return;var ce=new d(V,0),de=new d(G,Ct(n,G)),ue=n.getRange(ce,de).split(`
`),ve=C||(c=="decimal"?/(-?)([\d]+)/:c=="hex"?/(-?)(?:0x)?([0-9a-f]+)/i:c=="octal"?/([0-7]+)/:null),Re=c=="decimal"?10:c=="hex"?16:c=="octal"?8:null,Ce=[],We=[];if(c||C)for(var qe=0;qe<ue.length;qe++){var je=C?ue[qe].match(C):null;je&&je[0]!=""?Ce.push(je):!C&&ve.exec(ue[qe])?Ce.push(ue[qe]):We.push(ue[qe])}else We=ue;function rt(ct,Ge){if(o){var Tt;Tt=ct,ct=Ge,Ge=Tt}s&&(ct=ct.toLowerCase(),Ge=Ge.toLowerCase());var Vt=c&&ve.exec(ct),Ut=c&&ve.exec(Ge);return Vt?(Vt=parseInt((Vt[1]+Vt[2]).toLowerCase(),Re),Ut=parseInt((Ut[1]+Ut[2]).toLowerCase(),Re),Vt-Ut):ct<Ge?-1:1}function lt(ct,Ge){if(o){var Tt;Tt=ct,ct=Ge,Ge=Tt}return s&&(ct[0]=ct[0].toLowerCase(),Ge[0]=Ge[0].toLowerCase()),ct[0]<Ge[0]?-1:1}if(Ce.sort(C?lt:rt),C)for(var qe=0;qe<Ce.length;qe++)Ce[qe]=Ce[qe].input;else c||We.sort(rt);if(ue=o?Ce.concat(We):We.concat(Ce),u){var kt=ue,ut;ue=[];for(var qe=0;qe<kt.length;qe++)kt[qe]!=ut&&ue.push(kt[qe]),ut=kt[qe]}n.replaceRange(ue.join(`
`),ce,de)},vglobal:function(n,i){this.global(n,i)},global:function(n,i){var o=i.argString;if(!o){Qe(n,"Regular Expression missing from global");return}var s=i.commandName[0]==="v",u=i.line!==void 0?i.line:n.firstLine(),c=i.lineEnd||i.line||n.lastLine(),C=mr(o),D=o,$;if(C.length&&(D=C[0],$=C.slice(1,C.length).join("/")),D)try{Wn(n,D,!0,!0)}catch{Qe(n,"Invalid regex: "+D);return}for(var V=qt(n).getQuery(),G=[],ce=u;ce<=c;ce++){var de=n.getLineHandle(ce),ue=V.test(de.text);ue!==s&&G.push($?de:de.text)}if(!$){Qe(n,G.join(`
`));return}var ve=0,Re=function(){if(ve<G.length){var Ce=G[ve++],We=n.getLineNumber(Ce);if(We==null){Re();return}var qe=We+1+$;Rt.processCommand(n,qe,{callback:Re})}};Re()},substitute:function(n,i){if(!n.getSearchCursor)throw new Error("Search feature not available. Requires searchcursor.js or any other getSearchCursor implementation.");var o=i.argString,s=o?Rn(o,o[0]):[],u,c="",C,D,$,V=!1,G=!1;if(s.length)u=s[0],x("pcre")&&u!==""&&(u=new RegExp(u).source),c=s[1],c!==void 0&&(x("pcre")?c=yr(c.replace(/([^\\])&/g,"$1$$&")):c=Rr(c),Ae.lastSubstituteReplacePart=c),C=s[2]?s[2].split(" "):[];else if(o&&o.length){Qe(n,"Substitutions should be of the form :s/pattern/replace/");return}if(C&&(D=C[0],$=parseInt(C[1]),D&&(D.indexOf("c")!=-1&&(V=!0),D.indexOf("g")!=-1&&(G=!0),x("pcre")?u=u+"/"+D:u=u.replace(/\//g,"\\/")+"/"+D)),u)try{Wn(n,u,!0,!0)}catch{Qe(n,"Invalid regex: "+u);return}if(c=c||Ae.lastSubstituteReplacePart,c===void 0){Qe(n,"No previous substitute regular expression");return}var ce=qt(n),de=ce.getQuery(),ue=i.line!==void 0?i.line:n.getCursor().line,ve=i.lineEnd||ue;ue==n.firstLine()&&ve==n.lastLine()&&(ve=1/0),$&&(ue=ve,ve=ue+$-1);var Re=At(n,new d(ue,0)),Ce=n.getSearchCursor(de,Re);Gr(n,V,G,ue,ve,Ce,de,c,i.callback)},redo:a.commands.redo,undo:a.commands.undo,write:function(n){a.commands.save?a.commands.save(n):n.save&&n.save()},nohlsearch:function(n){en(n)},yank:function(n){var i=_t(n.getCursor()),o=i.line,s=n.getLine(o);Ae.registerController.pushText("0","yank",s,!0,!0)},delmarks:function(n,i){if(!i.argString||!An(i.argString)){Qe(n,"Argument required");return}for(var o=n.state.vim,s=new a.StringStream(An(i.argString));!s.eol();){s.eatSpace();var u=s.pos;if(!s.match(/[a-zA-Z]/,!1)){Qe(n,"Invalid argument: "+i.argString.substring(u));return}var c=s.next();if(s.match("-",!0)){if(!s.match(/[a-zA-Z]/,!1)){Qe(n,"Invalid argument: "+i.argString.substring(u));return}var C=c,D=s.next();if(se(C)&&se(D)||he(C)&&he(D)){var $=C.charCodeAt(0),V=D.charCodeAt(0);if($>=V){Qe(n,"Invalid argument: "+i.argString.substring(u));return}for(var G=0;G<=V-$;G++){var ce=String.fromCharCode($+G);delete o.marks[ce]}}else{Qe(n,"Invalid argument: "+C+"-");return}}else delete o.marks[c]}}},Rt=new Or;function Gr(n,i,o,s,u,c,C,D,$){n.state.vim.exMode=!0;var V=!1,G,ce,de;function ue(){n.operation(function(){for(;!V;)ve(),Ce();We()})}function ve(){var je=n.getRange(c.from(),c.to()),rt=je.replace(C,D),lt=c.to().line;c.replace(rt),ce=c.to().line,u+=ce-lt,de=ce<lt}function Re(){var je=G&&_t(c.to()),rt=c.findNext();return rt&&!rt[0]&&je&&Pt(c.from(),je)&&(rt=c.findNext()),rt}function Ce(){for(;Re()&&ln(c.from(),s,u);)if(!(!o&&c.from().line==ce&&!de)){n.scrollIntoView(c.from(),30),n.setSelection(c.from(),c.to()),G=c.from(),V=!1;return}V=!0}function We(je){if(je&&je(),n.focus(),G){n.setCursor(G);var rt=n.state.vim;rt.exMode=!1,rt.lastHPos=rt.lastHSPos=G.ch}$&&$()}function qe(je,rt,lt){a.e_stop(je);var kt=a.keyName(je);switch(kt){case"Y":ve(),Ce();break;case"N":Ce();break;case"A":var ut=$;$=void 0,n.operation(ue),$=ut;break;case"L":ve();case"Q":case"Esc":case"Ctrl-C":case"Ctrl-[":We(lt);break}return V&&We(lt),!0}if(Ce(),V){Qe(n,"No matches for "+C.source);return}if(!i){ue(),$&&$();return}Nn(n,{prefix:an("span","replace with ",an("strong",D)," (y/n/a/q/l)"),onKeyDown:qe})}a.keyMap.vim={attach:F,detach:Q,call:q};function jn(n){var i=n.state.vim,o=Ae.macroModeState,s=Ae.registerController.getRegister("."),u=o.isPlaying,c=o.lastInsertModeChanges;u||(n.off("change",pt),a.off(n.getInputField(),"keydown",ne)),!u&&i.insertModeRepeat>1&&(ye(n,i,i.insertModeRepeat-1,!0),i.lastEditInputState.repeatOverride=i.insertModeRepeat),delete i.insertModeRepeat,i.insertMode=!1,n.setCursor(n.getCursor().line,n.getCursor().ch-1),n.setOption("keyMap","vim"),n.setOption("disableInput",!0),n.toggleOverwrite(!1),s.setText(c.changes.join("")),a.signal(n,"vim-mode-change",{mode:"normal"}),o.isRecording&&Te(o)}function Hn(n){S.unshift(n)}function Jr(n,i,o,s,u){var c={keys:n,type:i};c[i]=o,c[i+"Args"]=s;for(var C in u)c[C]=u[C];Hn(c)}Fe("insertModeEscKeysTimeout",200,"number"),a.keyMap["vim-insert"]={fallthrough:["default"],attach:F,detach:Q,call:q},a.keyMap["vim-replace"]={Backspace:"goCharLeft",fallthrough:["vim-insert"],attach:F,detach:Q,call:q};function ee(n,i,o,s){var u=Ae.registerController.getRegister(s);if(s==":"){u.keyBuffer[0]&&Rt.processCommand(n,u.keyBuffer[0]),o.isPlaying=!1;return}var c=u.keyBuffer,C=0;o.isPlaying=!0,o.replaySearchQueries=u.searchQueries.slice(0);for(var D=0;D<c.length;D++)for(var $=c[D],V,G;$;)if(V=/<\w+-.+?>|<\w+>|./.exec($),G=V[0],$=$.substring(V.index+G.length),Xe.handleKey(n,G,"macro"),i.insertMode){var ce=u.insertModeChanges[C++].changes;Ae.macroModeState.lastInsertModeChanges.changes=ce,ge(n,ce,1),jn(n)}o.isPlaying=!1}function Ie(n,i){if(!n.isPlaying){var o=n.latestRegister,s=Ae.registerController.getRegister(o);s&&s.pushText(i)}}function Te(n){if(!n.isPlaying){var i=n.latestRegister,o=Ae.registerController.getRegister(i);o&&o.pushInsertModeChanges&&o.pushInsertModeChanges(n.lastInsertModeChanges)}}function st(n,i){if(!n.isPlaying){var o=n.latestRegister,s=Ae.registerController.getRegister(o);s&&s.pushSearchQuery&&s.pushSearchQuery(i)}}function pt(n,i){var o=Ae.macroModeState,s=o.lastInsertModeChanges;if(!o.isPlaying)for(;i;){if(s.expectCursorActivityForChange=!0,s.ignoreCount>1)s.ignoreCount--;else if(i.origin=="+input"||i.origin=="paste"||i.origin===void 0){var u=n.listSelections().length;u>1&&(s.ignoreCount=u);var c=i.text.join(`
`);s.maybeReset&&(s.changes=[],s.maybeReset=!1),c&&(n.state.overwrite&&!/\n/.test(c)?s.changes.push([c]):s.changes.push(c))}i=i.next}}function M(n){var i=n.state.vim;if(i.insertMode){var o=Ae.macroModeState;if(o.isPlaying)return;var s=o.lastInsertModeChanges;s.expectCursorActivityForChange?s.expectCursorActivityForChange=!1:s.maybeReset=!0}else n.curOp.isVimOp||b(n,i)}function b(n,i){var o=n.getCursor("anchor"),s=n.getCursor("head");if(i.visualMode&&!n.somethingSelected()?zt(n,!1):!i.visualMode&&!i.insertMode&&n.somethingSelected()&&(i.visualMode=!0,i.visualLine=!1,a.signal(n,"vim-mode-change",{mode:"visual"})),i.visualMode){var u=dt(s,o)?0:-1,c=dt(s,o)?-1:0;s=St(s,0,u),o=St(o,0,c),i.sel={anchor:o,head:s},It(n,i,"<",Wt(s,o)),It(n,i,">",fn(s,o))}else i.insertMode||(i.lastHPos=n.getCursor().ch)}function U(n){this.keyName=n}function ne(n){var i=Ae.macroModeState,o=i.lastInsertModeChanges,s=a.keyName(n);if(!s)return;function u(){return o.maybeReset&&(o.changes=[],o.maybeReset=!1),o.changes.push(new U(s)),!0}(s.indexOf("Delete")!=-1||s.indexOf("Backspace")!=-1)&&a.lookupKey(s,"vim-insert",u)}function ye(n,i,o,s){var u=Ae.macroModeState;u.isPlaying=!0;var c=!!i.lastEditActionCommand,C=i.inputState;function D(){c?Lt.processAction(n,i,i.lastEditActionCommand):Lt.evalInput(n,i)}function $(G){if(u.lastInsertModeChanges.changes.length>0){G=i.lastEditActionCommand?G:1;var ce=u.lastInsertModeChanges;ge(n,ce.changes,G)}}if(i.inputState=i.lastEditInputState,c&&i.lastEditActionCommand.interlaceInsertRepeat)for(var V=0;V<o;V++)D(),$(1);else s||D(),$(o);i.inputState=C,i.insertMode&&!s&&jn(n),u.isPlaying=!1}function ge(n,i,o){function s(ce){return typeof ce=="string"?a.commands[ce](n):ce(n),!0}var u=n.getCursor("head"),c=Ae.macroModeState.lastInsertModeChanges.visualBlock;c&&(Qn(n,u,c+1),o=n.listSelections().length,n.setCursor(u));for(var C=0;C<o;C++){c&&n.setCursor(St(u,C,0));for(var D=0;D<i.length;D++){var $=i[D];if($ instanceof U)a.lookupKey($.keyName,"vim-insert",s);else if(typeof $=="string")n.replaceSelection($);else{var V=n.getCursor(),G=St(V,0,$[0].length);n.replaceRange($[0],V,G),n.setCursor(G)}}}c&&n.setCursor(St(u,0,1))}return Bt(),Xe};a.Vim=P()})})();class TextEditorInterface extends lib$1.ITextEditor{editor;doc;transaction;onDidFinishTransaction;constructor(g){super();this.editor=g,this.doc=g.getDoc(),this.transaction=!1,this.onDidFinishTransaction=null}getCursorPosition(){const{line:g,ch:a}=this.doc.getCursor();return new lib$1.Point(g,a)}setCursorPosition(g){this.doc.setCursor({line:g.row,ch:g.column})}setSelectionRange(g){this.doc.setSelection({line:g.start.row,ch:g.start.column},{line:g.end.row,ch:g.end.column})}getLastRow(){return this.doc.lineCount()-1}acceptsTableEdit(){return!0}getLine(g){return this.doc.getLine(g)}insertLine(g,a){const d=this.getLastRow();if(g>d){const v=this.getLine(d);this.doc.replaceRange(`
`+a,{line:d,ch:v.length},{line:d,ch:v.length})}else this.doc.replaceRange(a+`
`,{line:g,ch:0},{line:g,ch:0})}deleteLine(g){const a=this.getLastRow();if(g>=a)if(a>0){const d=this.getLine(a-1),v=this.getLine(a);this.doc.replaceRange("",{line:a-1,ch:d.length},{line:a,ch:v.length})}else{const d=this.getLine(a);this.doc.replaceRange("",{line:a,ch:0},{line:a,ch:d.length})}else this.doc.replaceRange("",{line:g,ch:0},{line:g+1,ch:0})}replaceLines(g,a,d){const v=this.getLastRow();if(a>v){const S=this.getLine(v);this.doc.replaceRange(d.join(`
`),{line:g,ch:0},{line:v,ch:S.length})}else this.doc.replaceRange(d.join(`
`)+`
`,{line:g,ch:0},{line:a,ch:0})}transact(g){this.transaction=!0,g(),this.transaction=!1,this.onDidFinishTransaction&&this.onDidFinishTransaction.call(void 0)}}const encode=f=>Array.from(f).map(v=>v.codePointAt(0).toString(2)).map(v=>Array.from(v).map(S=>S==="1"?"\u200D":"\u200C").join("")).join("\u200B"),decode=f=>f.split("\u200B").map(v=>Array.from(v).map(S=>S==="\u200D"?"1":"0").join("")).map(v=>String.fromCodePoint(parseInt(v,2))).join(""),useEditorStore=defineStore("editor",{state:()=>({cm:null}),actions:{async init(f){const g=useTitleBarStore(),a=document.getElementById(f);a.value="",codemirror$1.exports.commands.save=this.save,codemirror$1.exports.Vim.defineEx("wq","wq",this.saveAndQuit),codemirror$1.exports.Vim.defineEx("quit","q",this.quitWithoutSaving),codemirror$1.exports.Vim.defineEx("help","h",this.help);const d=codemirror$1.exports.fromTextArea(a,{mode:"markdown",theme:"markdown",lineNumbers:!0,lineWrapping:!0,indentUnit:2,tabSize:2,indentWithTabs:!0,showCursorWhenSelecting:!0,keyMap:"vim"});d.addKeyMap({"Ctrl-]":()=>{codemirror$1.exports.Vim.exitInsertMode(d)}});const v=new TextEditorInterface(d),S=new lib$1.TableEditor(v),L=lib$1.optionsWithDefaults({smartCursor:!0}),E=codemirror$1.exports.normalizeKeyMap({Tab:W=>{const Q=Array(W.getOption("indentUnit")+1).join(" ");W.replaceSelection(Q)},Enter:"newlineAndIndentContinueMarkdownList"});d.setOption("extraKeys",E);const P=codemirror$1.exports.normalizeKeyMap({Tab:()=>{S.nextCell(L)},"Shift-Tab":()=>{S.previousCell(L)},Enter:()=>{S.nextRow(L)},"Ctrl-Enter":()=>{S.escape(L)},"Cmd-Enter":()=>{S.escape(L)},"Shift-Ctrl-Left":()=>{S.alignColumn(lib$1.Alignment.LEFT,L)},"Shift-Cmd-Left":()=>{S.alignColumn(lib$1.Alignment.LEFT,L)},"Shift-Ctrl-Right":()=>{S.alignColumn(lib$1.Alignment.RIGHT,L)},"Shift-Cmd-Right":()=>{S.alignColumn(lib$1.Alignment.RIGHT,L)},"Shift-Ctrl-Up":()=>{S.alignColumn(lib$1.Alignment.CENTER,L)},"Shift-Cmd-Up":()=>{S.alignColumn(lib$1.Alignment.CENTER,L)},"Shift-Ctrl-Down":()=>{S.alignColumn(lib$1.Alignment.NONE,L)},"Shift-Cmd-Down":()=>{S.alignColumn(lib$1.Alignment.NONE,L)},"Ctrl-Left":()=>{S.moveFocus(0,-1,L)},"Cmd-Left":()=>{S.moveFocus(0,-1,L)},"Ctrl-Right":()=>{S.moveFocus(0,1,L)},"Cmd-Right":()=>{S.moveFocus(0,1,L)},"Ctrl-Up":()=>{S.moveFocus(-1,0,L)},"Cmd-Up":()=>{S.moveFocus(-1,0,L)},"Ctrl-Down":()=>{S.moveFocus(1,0,L)},"Cmd-Down":()=>{S.moveFocus(1,0,L)},"Ctrl-K Ctrl-I":()=>{S.insertRow(L)},"Cmd-K Cmd-I":()=>{S.insertRow(L)},"Ctrl-L Ctrl-I":()=>{S.deleteRow(L)},"Cmd-L Cmd-I":()=>{S.deleteRow(L)},"Ctrl-K Ctrl-J":()=>{S.insertColumn(L)},"Cmd-K Cmd-J":()=>{S.insertColumn(L)},"Ctrl-L Ctrl-J":()=>{S.deleteColumn(L)},"Cmd-L Cmd-J":()=>{S.deleteColumn(L)},"Alt-Shift-Ctrl-Left":()=>{S.moveColumn(-1,L)},"Alt-Shift-Cmd-Left":()=>{S.moveColumn(-1,L)},"Alt-Shift-Ctrl-Right":()=>{S.moveColumn(1,L)},"Alt-Shift-Cmd-Right":()=>{S.moveColumn(1,L)},"Alt-Shift-Ctrl-Up":()=>{S.moveRow(-1,L)},"Alt-Shift-Cmd-Up":()=>{S.moveRow(-1,L)},"Alt-Shift-Ctrl-Down":()=>{S.moveRow(1,L)},"Alt-Shift-Cmd-Down":()=>{S.moveRow(1,L)}});function K(){S.cursorIsInTable(L)?d.setOption("extraKeys",P):(d.setOption("extraKeys",E),S.resetSmartCursor())}return d.on("cursorActivity",()=>{v.transaction||K()}),d.on("changes",()=>{v.transaction||K()}),v.onDidFinishTransaction=()=>{K()},logseq.on("ui:visible:changed",async W=>{if(!!W&&d){const Q=await logseq.Editor.getSelectedBlocks();if(Q&&Q.length>1){let F=await logseq.Editor.getCurrentPage();F||(F=await logseq.Editor.getPage(Q[0].page.id)),g.setTitle(F.name),g.setMode("Multiple");const q=Q.map(H=>{const te=encode(H.uuid);return`> ((${H.uuid}))${te}:
${H.content}`}).join(`
`);d.setValue(q)}else{const F=await logseq.Editor.getCurrentBlock();if(F){d.setValue(F.content);let q=await logseq.Editor.getCurrentPage();q||(q=await logseq.Editor.getPage(F.page.id)),g.setTitle(q.name),g.setMode("Single")}}d.refresh(),d.focus()}}),this.cm=d,d},async save(){if(this.cm){if(useTitleBarStore().mode==="Single"){const g=await logseq.Editor.getCurrentBlock();g&&await logseq.Editor.updateBlock(g.uuid,this.cm.getValue()),logseq.hideMainUI({restoreEditingCursor:!0})}else{const a=this.cm.getValue().split(/^> \(\(([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})\)\)([\u200b-\u200f\uFEFF\u202a-\u202e]+):\n/gim);for(let d=1;d<a.length;d+=3){const v=a[d],S=a[d+1];if(v!==decode(S))continue;const L=a[d+2];await logseq.Editor.updateBlock(v,L)}}logseq.App.showMsg("Saved back to Logseq!")}},async saveAndQuit(){await this.save(),logseq.hideMainUI({restoreEditingCursor:!0})},quitWithoutSaving(){logseq.hideMainUI({restoreEditingCursor:!0}),logseq.App.showMsg("Quit without saving!")},help(){useHelpStore().open()}}});var Editor_vue_vue_type_style_index_0_lang="";const _hoisted_1$2={class:"flex-1"},_hoisted_2$1=createBaseVNode("textarea",{id:"editor"},null,-1),_hoisted_3$1=[_hoisted_2$1],_sfc_main$2=defineComponent({setup(f){const g=useEditorStore();return onMounted(async()=>{g.init("editor")}),(a,d)=>(openBlock(),createElementBlock("div",_hoisted_1$2,_hoisted_3$1))}}),_hoisted_1$1={class:"flex-none px-4 h-12 text-gray-300 flex justify-between items-center bg-[#1d262f] text-sm border-b border-gray-600"},_hoisted_2=createBaseVNode("div",{class:"text-gray-600 inline-block"},null,-1),_hoisted_3={class:""},_hoisted_4=createBaseVNode("span",{class:"text-gray-600"},"Logseq VIM Editor / ",-1),_hoisted_5={class:"text-gray-600"},_hoisted_6={class:"flex gap-1"},_hoisted_7=createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[createBaseVNode("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1),_hoisted_8=createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[createBaseVNode("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),_sfc_main$1=defineComponent({setup(f){const g=useTitleBarStore(),a=useEditorStore(),d=()=>{a.saveAndQuit()},v=()=>{a.quitWithoutSaving()};return(S,L)=>{const E=NIcon;return openBlock(),createElementBlock("div",_hoisted_1$1,[_hoisted_2,createBaseVNode("div",_hoisted_3,[_hoisted_4,createTextVNode(" "+toDisplayString(unref(g).title)+" ",1),createBaseVNode("span",_hoisted_5," / ["+toDisplayString(unref(g).mode==="Single"?"Single block":"Multiple blocks")+"]",1)]),createBaseVNode("div",_hoisted_6,[createVNode(E,{size:"20",onClick:d,class:"cursor-pointer",title:"Save and quit"},{default:withCtx(()=>[_hoisted_7]),_:1}),createVNode(E,{size:"20",onClick:v,class:"cursor-pointer",title:"Quit"},{default:withCtx(()=>[_hoisted_8]),_:1})])])}}});var _export_sfc=(f,g)=>{const a=f.__vccOpts||f;for(const[d,v]of g)a[d]=v;return a};const _sfc_main={},_hoisted_1={class:"w-full h-full flex flex-col"};function _sfc_render(f,g){const a=_sfc_main$1,d=_sfc_main$2,v=_sfc_main$3;return openBlock(),createElementBlock("div",_hoisted_1,[createVNode(a),createVNode(d),createVNode(v)])}var App=_export_sfc(_sfc_main,[["render",_sfc_render]]),style="";const settingsVersion="v1",defaultSettings={keyBindings:{openVimEditor:"mod+shift+e"},settingsVersion,disabled:!1},initSettings=()=>{let f=logseq.settings;(!f||f.settingsVersion!=defaultSettings.settingsVersion)&&(f=defaultSettings,logseq.updateSettings(f))},getSettings=(f,g=void 0)=>{const a=logseq.settings,d=Object.assign(defaultSettings,a);return f?d[f]?d[f]:g:d},model={openModel(){logseq.showMainUI({autoFocus:!0})}};function main(){initSettings();const f=getSettings("keyBindings");logseq.setMainUIInlineStyle({position:"fixed",zIndex:11}),logseq.provideModel(model);const g=createApp(App);g.use(createPinia()),g.mount("#app");const a=async()=>{if(!await logseq.Editor.getCurrentBlock()){logseq.App.showMsg("Please select a block");return}model.openModel()};logseq.Editor.registerSlashCommand("VIM Editor",a),logseq.Editor.registerBlockContextMenuItem("VIM Editor",a),logseq.App.registerCommandPalette({key:"vim-editor-open-vim-editor",label:"VIM Editor",keybinding:{mode:"global",binding:f.openVimEditor}},a)}logseq.ready(main);
